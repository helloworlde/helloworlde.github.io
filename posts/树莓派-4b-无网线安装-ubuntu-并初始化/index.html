<!doctype html><html lang=en><head><meta name=viewport content="width=device-width,initial-scale=1"><title>树莓派 4b 无网线安装 Ubuntu 并初始化</title>
<meta charset=utf-8><meta name=description content="Ladder@树莓派 4b 无网线安装 Ubuntu 并初始化 必需设备：
树莓派 4b SD 卡 HDMI 线 显示器 键盘 电源及数据线 设置镜像 在树莓派官网的连接，找到 Ubuntu，根据指引，找到 Ubuntu 的镜像，即https://ubuntu.com/download/raspberry-pi 下载镜像 点击下载 64 位镜像，随后会开始下载ubuntu-19.10.1-preinstalled-server-arm64+raspi3.img.xz这个文件
但是这个文件下载很慢，也没有国内的镜像，可以使用迅雷下载，或者直接下载上传的镜像 ubuntu-19.10.1-preinstalled-server-arm64+raspi3.img.xz
刻录镜像 格式化 SD卡 刻录镜像前，要先将 SD 卡格式化，在 Mac 上，可以使用官方推荐的SD Card Formatter, 也可以用上传到地址进行下载Mac 版：SDCardFormatterv5_Mac.zip
刻录镜像 刻录镜像有多种方式，不同平台操作不同，可以参考 https://ubuntu.com/download/iot/installation-media
在 Mac 上，可以用官方推荐的软件balenaEtcher，可以从上传的位置下载balenaEtcher-1.5.70.dmg，也可以直接用命令行执行
查找 SD 卡挂载名称 diskutil list /dev/disk0 (internal, physical): #: TYPE NAME SIZE IDENTIFIER 0: GUID_partition_scheme *500.3 GB disk0 1: EFI EFI 314.6 MB disk0s1 2: Apple_APFS Container disk1 500."><meta name=author content="HelloWood"><link rel=canonical href=https://blog.hellowood.dev/posts/%E6%A0%91%E8%8E%93%E6%B4%BE-4b-%E6%97%A0%E7%BD%91%E7%BA%BF%E5%AE%89%E8%A3%85-ubuntu-%E5%B9%B6%E5%88%9D%E5%A7%8B%E5%8C%96/><meta name=google-site-verification content="G-3MSGPYTHPZ"><link rel=alternate type=application/rss+xml href=https://blog.hellowood.dev//index.xml title=HelloWood><script async src="https://www.googletagmanager.com/gtag/js?id=G-3MSGPYTHPZ"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3MSGPYTHPZ")}</script><script async defer data-website-id=7a9034de-0ce7-4756-942a-829e6cd22301 src=https://umami.hellowood.dev/script.js></script><script defer data-cf-beacon='{"token": "b2e481d136dc428c8c96c8673e2a04cf"}' src=https://static.cloudflareinsights.com/beacon.min.js></script><meta property="og:url" content="https://blog.hellowood.dev/posts/%E6%A0%91%E8%8E%93%E6%B4%BE-4b-%E6%97%A0%E7%BD%91%E7%BA%BF%E5%AE%89%E8%A3%85-ubuntu-%E5%B9%B6%E5%88%9D%E5%A7%8B%E5%8C%96/"><meta property="og:site_name" content="HelloWood"><meta property="og:title" content="树莓派 4b 无网线安装 Ubuntu 并初始化"><meta property="og:description" content="树莓派 4b 无网线安装 Ubuntu 并初始化 必需设备：
树莓派 4b SD 卡 HDMI 线 显示器 键盘 电源及数据线 设置镜像 在树莓派官网的连接，找到 Ubuntu，根据指引，找到 Ubuntu 的镜像，即https://ubuntu.com/download/raspberry-pi 下载镜像 点击下载 64 位镜像，随后会开始下载ubuntu-19.10.1-preinstalled-server-arm64+raspi3.img.xz这个文件
但是这个文件下载很慢，也没有国内的镜像，可以使用迅雷下载，或者直接下载上传的镜像 ubuntu-19.10.1-preinstalled-server-arm64+raspi3.img.xz
刻录镜像 格式化 SD卡 刻录镜像前，要先将 SD 卡格式化，在 Mac 上，可以使用官方推荐的SD Card Formatter, 也可以用上传到地址进行下载Mac 版：SDCardFormatterv5_Mac.zip
刻录镜像 刻录镜像有多种方式，不同平台操作不同，可以参考 https://ubuntu.com/download/iot/installation-media
在 Mac 上，可以用官方推荐的软件balenaEtcher，可以从上传的位置下载balenaEtcher-1.5.70.dmg，也可以直接用命令行执行
查找 SD 卡挂载名称 diskutil list /dev/disk0 (internal, physical): #: TYPE NAME SIZE IDENTIFIER 0: GUID_partition_scheme *500.3 GB disk0 1: EFI EFI 314.6 MB disk0s1 2: Apple_APFS Container disk1 500."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-12-15T22:42:04+00:00"><meta property="article:modified_time" content="2019-12-15T22:42:04+00:00"><meta property="article:tag" content="Ubuntu"><meta property="article:tag" content="RaspberryPi"><meta name=twitter:card content="summary"><meta name=twitter:title content="树莓派 4b 无网线安装 Ubuntu 并初始化"><meta name=twitter:description content="树莓派 4b 无网线安装 Ubuntu 并初始化 必需设备：
树莓派 4b SD 卡 HDMI 线 显示器 键盘 电源及数据线 设置镜像 在树莓派官网的连接，找到 Ubuntu，根据指引，找到 Ubuntu 的镜像，即https://ubuntu.com/download/raspberry-pi 下载镜像 点击下载 64 位镜像，随后会开始下载ubuntu-19.10.1-preinstalled-server-arm64+raspi3.img.xz这个文件
但是这个文件下载很慢，也没有国内的镜像，可以使用迅雷下载，或者直接下载上传的镜像 ubuntu-19.10.1-preinstalled-server-arm64+raspi3.img.xz
刻录镜像 格式化 SD卡 刻录镜像前，要先将 SD 卡格式化，在 Mac 上，可以使用官方推荐的SD Card Formatter, 也可以用上传到地址进行下载Mac 版：SDCardFormatterv5_Mac.zip
刻录镜像 刻录镜像有多种方式，不同平台操作不同，可以参考 https://ubuntu.com/download/iot/installation-media
在 Mac 上，可以用官方推荐的软件balenaEtcher，可以从上传的位置下载balenaEtcher-1.5.70.dmg，也可以直接用命令行执行
查找 SD 卡挂载名称 diskutil list /dev/disk0 (internal, physical): #: TYPE NAME SIZE IDENTIFIER 0: GUID_partition_scheme *500.3 GB disk0 1: EFI EFI 314.6 MB disk0s1 2: Apple_APFS Container disk1 500."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.hellowood.dev/posts/"},{"@type":"ListItem","position":2,"name":"树莓派 4b 无网线安装 Ubuntu 并初始化","item":"https://blog.hellowood.dev/posts/%E6%A0%91%E8%8E%93%E6%B4%BE-4b-%E6%97%A0%E7%BD%91%E7%BA%BF%E5%AE%89%E8%A3%85-ubuntu-%E5%B9%B6%E5%88%9D%E5%A7%8B%E5%8C%96/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"树莓派 4b 无网线安装 Ubuntu 并初始化","name":"树莓派 4b 无网线安装 Ubuntu 并初始化","description":"树莓派 4b 无网线安装 Ubuntu 并初始化 必需设备：\n树莓派 4b SD 卡 HDMI 线 显示器 键盘 电源及数据线 设置镜像 在树莓派官网的连接，找到 Ubuntu，根据指引，找到 Ubuntu 的镜像，即https://ubuntu.com/download/raspberry-pi 下载镜像 点击下载 64 位镜像，随后会开始下载ubuntu-19.10.1-preinstalled-server-arm64+raspi3.img.xz这个文件\n但是这个文件下载很慢，也没有国内的镜像，可以使用迅雷下载，或者直接下载上传的镜像 ubuntu-19.10.1-preinstalled-server-arm64+raspi3.img.xz\n刻录镜像 格式化 SD卡 刻录镜像前，要先将 SD 卡格式化，在 Mac 上，可以使用官方推荐的SD Card Formatter, 也可以用上传到地址进行下载Mac 版：SDCardFormatterv5_Mac.zip\n刻录镜像 刻录镜像有多种方式，不同平台操作不同，可以参考 https://ubuntu.com/download/iot/installation-media\n在 Mac 上，可以用官方推荐的软件balenaEtcher，可以从上传的位置下载balenaEtcher-1.5.70.dmg，也可以直接用命令行执行\n查找 SD 卡挂载名称 diskutil list /dev/disk0 (internal, physical): #: TYPE NAME SIZE IDENTIFIER 0: GUID_partition_scheme *500.3 GB disk0 1: EFI EFI 314.6 MB disk0s1 2: Apple_APFS Container disk1 500.","keywords":["Ubuntu","RaspberryPi"],"articleBody":"树莓派 4b 无网线安装 Ubuntu 并初始化 必需设备：\n树莓派 4b SD 卡 HDMI 线 显示器 键盘 电源及数据线 设置镜像 在树莓派官网的连接，找到 Ubuntu，根据指引，找到 Ubuntu 的镜像，即https://ubuntu.com/download/raspberry-pi 下载镜像 点击下载 64 位镜像，随后会开始下载ubuntu-19.10.1-preinstalled-server-arm64+raspi3.img.xz这个文件\n但是这个文件下载很慢，也没有国内的镜像，可以使用迅雷下载，或者直接下载上传的镜像 ubuntu-19.10.1-preinstalled-server-arm64+raspi3.img.xz\n刻录镜像 格式化 SD卡 刻录镜像前，要先将 SD 卡格式化，在 Mac 上，可以使用官方推荐的SD Card Formatter, 也可以用上传到地址进行下载Mac 版：SDCardFormatterv5_Mac.zip\n刻录镜像 刻录镜像有多种方式，不同平台操作不同，可以参考 https://ubuntu.com/download/iot/installation-media\n在 Mac 上，可以用官方推荐的软件balenaEtcher，可以从上传的位置下载balenaEtcher-1.5.70.dmg，也可以直接用命令行执行\n查找 SD 卡挂载名称 diskutil list /dev/disk0 (internal, physical): #: TYPE NAME SIZE IDENTIFIER 0: GUID_partition_scheme *500.3 GB disk0 1: EFI EFI 314.6 MB disk0s1 2: Apple_APFS Container disk1 500.0 GB disk0s2 /dev/disk1 (synthesized): #: TYPE NAME SIZE IDENTIFIER 0: APFS Container Scheme - +500.0 GB disk1 Physical Store disk0s2 1: APFS Volume Macintosh HD - 数据 280.9 GB disk1s1 2: APFS Volume Preboot 82.4 MB disk1s2 3: APFS Volume Recovery 528.5 MB disk1s3 4: APFS Volume VM 8.6 GB disk1s4 5: APFS Volume Macintosh HD 10.8 GB disk1s5 /dev/disk3 #: TYPE NAME SIZE IDENTIFIER 0: FDisk_partition_scheme *32.0 GB disk3 1: DOS_FAT_32 SD 32.0 GB disk3s1 其中的 /dev/disk3就是 SD卡\n取消挂载 diskutil unmountDisk /dev/disk3 Unmount of all volumes on /dev/disk3 was successful 复制镜像到 SD 卡 sudo sh -c 'gunzip -c /Users/xxx/Downloads/ubuntu-19.10.1-preinstalled-server-arm64+raspi3.img.xz | sudo dd of=/dev/disk3 bs=32m' 这个过程可能要十几分钟，取决于 SD 卡的速度，需要耐心等待，直到提示完成\n3719+1 records in 3719+1 records out 3899999744 bytes transferred in 642.512167 secs (6069924 bytes/sec) 启动树莓派 启动 将 SD 卡插入树莓派中，接通电源，连接 HDMI 线到显示器，并插入键盘；等待启动完成后会提示输入用户，默认的用户和密码都是ubuntu，进入后会要求修改密码\n修改 root 用户密码 sudo passwd 根据提示输入密码即可\n设置 WiFi 默认的树莓派会使用网线，如果有可以用的网线，直接插入，更新 WiFi 配置即可，如果不能用，则需要手动配置 WiFi\n查找可用的接口 ip link show 1: lo: mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 2: eth0: mtu 1500 qdisc mq state DOWN mode DEFAULT group default qlen 1000 link/ether dc:a6:32:5f:b4:3e brd ff:ff:ff:ff:ff:ff 3: wlan0: mtu 1500 qdisc fq_codel state UP mode DORMANT group default qlen 1000 link/ether dc:a6:32:5f:b4:3f brd ff:ff:ff:ff:ff:ff 编辑配置文件 cp /etc/netplan/50-cloud-init.yaml /etc/netplan/50-cloud-init.yaml.bk vi /etc/netplan/50-cloud-init.yaml 此时的配置文件：\n# This file is generated from information provided by # the datasource. Changes to it will not persist across an instance. # To disable cloud-init's network configuration capabilities, write a file # /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following: # network: {config: disabled} network: ethernets: eth0: dhcp4: true optional: true version: 2 需要新加 WiFi 的配置\nnetwork: ethernets: eth0: dhcp4: true optional: true wifis: wlan0: optional: true access-points: \"YOUR_NETWORK_SSID\": password: \"YOUR_PASSWORD\" dhcp4: true version: 2 将无线网的名称和密码填写上\n检查配置 检查 sudo netplan --debug try 如果检查结果中没有 error，则说明正常\n生成配置 sudo netplan --debug generate 如果检查结果中没有 error，则说明正常\n应用配置 sudo netplan --debug apply 设置完成后，重启树莓派\nreboot now 待重启完成后即可自动连接上 WiFi\n配置 SSH 获取 IP 获取 IP 可以从路由器的配置界面查看到；也可以使用在树莓派上通过命令找到\n安装 net-tools apt update apt install net-tools 待安装完成后，查找 IP ifconfig eth0: flags=4099 mtu 1500 ether dc:a6:32:5f:b4:3e txqueuelen 1000 (Ethernet) RX packets 0 bytes 0 (0.0 B) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 0 bytes 0 (0.0 B) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 lo: flags=73 mtu 65536 inet 127.0.0.1 netmask 255.0.0.0 inet6 ::1 prefixlen 128 scopeid 0x10 loop txqueuelen 1000 (Local Loopback) RX packets 102 bytes 7390 (7.3 KB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 102 bytes 7390 (7.3 KB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 wlan0: flags=4163 mtu 1500 inet 192.168.199.5 netmask 255.255.255.0 broadcast 192.168.199.255 inet6 fe80::dea6:32ff:fe5f:b43f prefixlen 64 scopeid 0x20 ether dc:a6:32:5f:b4:3f txqueuelen 1000 (Ethernet) RX packets 292 bytes 78773 (78.7 KB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 181 bytes 32959 (32.9 KB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 其中的 192.168.199.5就是树莓派的 IP\n配置 SSH 开启远程登录 默认的 22 端口是关闭的，需要手动打开\nvi /etc/ssh/sshd_config 需要将 #Port 22的注释去掉，然后重启 SSH\n/etc/init.d/ssh restart [ ok ] Restarting ssh (via systemctl): ssh.service. 配置登录的 key 配置key 可以在开启了 ssh 后，通过账号密码，将 key 拷贝到树莓派\nscp ~/.ssh/id_rsa.pub ubuntu@192.168.199.5:/root/.ssh/authorized_keys 或者上传包含自己key 的文件，在树莓派上下载\ncurl -O path/to/my/authorized_keys 参考内容 RaspberryPi Downloads Install Ubuntu Server on a Raspberry Pi 2, 3 or 4 Create installation media for Ubuntu balenaEtcher How to setup the Raspberry Pi 3 onboard WiFi for Ubuntu Server 18.04 with netplan? ","wordCount":"623","inLanguage":"en","datePublished":"2019-12-15T22:42:04Z","dateModified":"2019-12-15T22:42:04Z","author":{"@type":"Person","name":"HelloWood"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.hellowood.dev/posts/%E6%A0%91%E8%8E%93%E6%B4%BE-4b-%E6%97%A0%E7%BD%91%E7%BA%BF%E5%AE%89%E8%A3%85-ubuntu-%E5%B9%B6%E5%88%9D%E5%A7%8B%E5%8C%96/"},"publisher":{"@type":"Organization","name":"HelloWood","logo":{"@type":"ImageObject","url":"https://blog.hellowood.dev/favicon.ico"}}}</script><link rel=icon href=/images/avatar.png sizes=16x16><link rel=apple-touch-icon href=/images/avatar.png><link rel=manifest href=/images/avatar.png><link rel=stylesheet href=https://cdn.staticfile.org/lxgw-wenkai-webfont/1.6.0/style.css><link rel=stylesheet href=/css/main.min.ff1bc260fafbfb440e10194d7d06d57eb5e85eed11d12d06255581262664204e.css integrity="sha256-/xvCYPr7+0QOEBlNfQbVfrXoXu0R0S0GJVWBJiZkIE4=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css><script src=/js/highlight.min.min.c607d6febd16934a82eb61d3a896ed9d869f54373cc63ce95864ed5488fe3128.js></script><script>hljs.highlightAll()</script><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><meta name=google-adsense-account content="ca-pub-3401351766168985"><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","jtbhx98g62")</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3401351766168985" crossorigin=anonymous></script><script defer src=https://analytics.us.umami.is/script.js data-website-id=73ff1c8c-9938-43cf-81af-e77e26b0cca3></script></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-brand data-umami-event=navigation-brand href=/>HOME
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><span></span><span></span><span></span></label><ul class=navigation-list id=navigation-list><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Blog href=/posts>Blog</a></li><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Tags href=/tags>Tags</a></li><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Archive href=/archives>Archive</a></li><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Dashboard href=https://umami.hellowood.dev/share/lab/Blog>Dashboard</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class="navigation-item navigation-social"><a class=navigation-link data-umami-event=navigation-social href=https://github.com/helloworlde><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li class="navigation-item navigation-dark"><button id=mode type=button data-umami-event=toggle-theme aria-label="toggle user light or dark theme">
<span class=toggle-dark><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span>
<span class=toggle-light><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></li></ul></section></nav><div id=content><article class=blog-single><header class=blog-title><h1>树莓派 4b 无网线安装 Ubuntu 并初始化</h1></header><p><small>December 15, 2019&nbsp;· 623 words&nbsp;· 3 min</small><p><div class=blog-toc><nav id=TableOfContents><ul><li><a href=#设置镜像>设置镜像</a><ul><li><a href=#下载镜像>下载镜像</a></li><li><a href=#刻录镜像>刻录镜像</a></li></ul></li><li><a href=#启动树莓派>启动树莓派</a><ul><li><a href=#启动>启动</a></li><li><a href=#设置-wifi>设置 WiFi</a></li></ul></li><li><a href=#配置-ssh>配置 SSH</a><ul><li><a href=#获取-ip>获取 IP</a></li><li><a href=#配置-ssh-1>配置 SSH</a></li><li><a href=#参考内容>参考内容</a></li></ul></li></ul></nav></div><section class=blog-content><h1 id=树莓派-4b-无网线安装-ubuntu-并初始化>树莓派 4b 无网线安装 Ubuntu 并初始化</h1><blockquote><p>必需设备：</p></blockquote><ul><li>树莓派 4b</li><li>SD 卡</li><li>HDMI 线</li><li>显示器</li><li>键盘</li><li>电源及数据线</li></ul><h2 id=设置镜像>设置镜像</h2><p>在树莓派官网的连接，找到 Ubuntu，根据指引，找到 Ubuntu 的镜像，即<a href=https://ubuntu.com/download/raspberry-pi>https://ubuntu.com/download/raspberry-pi</a>
<img alt=raspberrypi-ubuntu.png src=https://img.hellowood.dev/picture/raspberrypi-ubuntu.png></p><h3 id=下载镜像>下载镜像</h3><p>点击下载 64 位镜像，随后会开始下载<a href="http://cdimage.ubuntu.com/releases/19.10.1/release/ubuntu-19.10.1-preinstalled-server-arm64+raspi3.img.xz?_ga=2.165606655.1314896456.1576331584-894154124.1576331584">ubuntu-19.10.1-preinstalled-server-arm64+raspi3.img.xz</a>这个文件</p><p><img alt=raspberrypi-ubuntu-download.png src=https://img.hellowood.dev/picture/raspberrypi-ubuntu-download.png></p><p>但是这个文件下载很慢，也没有国内的镜像，可以使用迅雷下载，或者直接下载上传的镜像 <a href=https://img.hellowood.dev/picture/ubuntu-19.10.1-preinstalled-server-arm64+raspi3.img.xz>ubuntu-19.10.1-preinstalled-server-arm64+raspi3.img.xz</a></p><h3 id=刻录镜像>刻录镜像</h3><h4 id=格式化-sd卡>格式化 SD卡</h4><p>刻录镜像前，要先将 SD 卡格式化，在 Mac 上，可以使用官方推荐的<a href=https://www.sdcard.org/downloads/formatter/>SD Card Formatter</a>, 也可以用上传到地址进行下载Mac 版：<a href=https://img.hellowood.dev/picture/SDCardFormatterv5_Mac.zip>SDCardFormatterv5_Mac.zip</a></p><h4 id=刻录镜像-1>刻录镜像</h4><p>刻录镜像有多种方式，不同平台操作不同，可以参考 <a href=https://ubuntu.com/download/iot/installation-media>https://ubuntu.com/download/iot/installation-media</a></p><p>在 Mac 上，可以用官方推荐的软件<a href=https://www.balena.io/etcher>balenaEtcher</a>，可以从上传的位置下载<a href=https://img.hellowood.dev/picture/balenaEtcher-1.5.70.dmg>balenaEtcher-1.5.70.dmg</a>，也可以直接用命令行执行</p><ul><li>查找 SD 卡挂载名称</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>diskutil list
</span></span></code></pre></div><pre tabindex=0><code>/dev/disk0 (internal, physical):
   #:                       TYPE NAME                    SIZE       IDENTIFIER
   0:      GUID_partition_scheme                        *500.3 GB   disk0
   1:                        EFI EFI                     314.6 MB   disk0s1
   2:                 Apple_APFS Container disk1         500.0 GB   disk0s2

/dev/disk1 (synthesized):
   #:                       TYPE NAME                    SIZE       IDENTIFIER
   0:      APFS Container Scheme -                      +500.0 GB   disk1
                                 Physical Store disk0s2
   1:                APFS Volume Macintosh HD - 数据     280.9 GB   disk1s1
   2:                APFS Volume Preboot                 82.4 MB    disk1s2
   3:                APFS Volume Recovery                528.5 MB   disk1s3
   4:                APFS Volume VM                      8.6 GB     disk1s4
   5:                APFS Volume Macintosh HD            10.8 GB    disk1s5
/dev/disk3
#:                       TYPE NAME                    SIZE       IDENTIFIER
0:     FDisk_partition_scheme                        *32.0 GB    disk3
1:                 DOS_FAT_32 SD                      32.0 GB    disk3s1
</code></pre><p>其中的 <code>/dev/disk3</code>就是 SD卡</p><ul><li>取消挂载</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>diskutil unmountDisk /dev/disk3
</span></span></code></pre></div><pre tabindex=0><code>Unmount of all volumes on /dev/disk3 was successful
</code></pre><ul><li>复制镜像到 SD 卡</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo sh -c <span style=color:#e6db74>&#39;gunzip -c /Users/xxx/Downloads/ubuntu-19.10.1-preinstalled-server-arm64+raspi3.img.xz | sudo dd of=/dev/disk3 bs=32m&#39;</span>
</span></span></code></pre></div><p>这个过程可能要十几分钟，取决于 SD 卡的速度，需要耐心等待，直到提示完成</p><pre tabindex=0><code>3719+1 records in
3719+1 records out
3899999744 bytes transferred in 642.512167 secs (6069924 bytes/sec)
</code></pre><h2 id=启动树莓派>启动树莓派</h2><h3 id=启动>启动</h3><p>将 SD 卡插入树莓派中，接通电源，连接 HDMI 线到显示器，并插入键盘；等待启动完成后会提示输入用户，默认的用户和密码都是<code>ubuntu</code>，进入后会要求修改密码</p><ul><li>修改 root 用户密码</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo passwd
</span></span></code></pre></div><p>根据提示输入密码即可</p><h3 id=设置-wifi>设置 WiFi</h3><p>默认的树莓派会使用网线，如果有可以用的网线，直接插入，更新 WiFi 配置即可，如果不能用，则需要手动配置 WiFi</p><h4 id=查找可用的接口>查找可用的接口</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ip link show 
</span></span></code></pre></div><pre tabindex=0><code>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: eth0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc mq state DOWN mode DEFAULT group default qlen 1000
    link/ether dc:a6:32:5f:b4:3e brd ff:ff:ff:ff:ff:ff
3: wlan0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP mode DORMANT group default qlen 1000
    link/ether dc:a6:32:5f:b4:3f brd ff:ff:ff:ff:ff:ff
</code></pre><h4 id=编辑配置文件>编辑配置文件</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cp /etc/netplan/50-cloud-init.yaml /etc/netplan/50-cloud-init.yaml.bk
</span></span><span style=display:flex><span>vi /etc/netplan/50-cloud-init.yaml
</span></span></code></pre></div><p>此时的配置文件：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># This file is generated from information provided by</span>
</span></span><span style=display:flex><span><span style=color:#75715e># the datasource.  Changes to it will not persist across an instance.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># To disable cloud-init&#39;s network configuration capabilities, write a file</span>
</span></span><span style=display:flex><span><span style=color:#75715e># /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:</span>
</span></span><span style=display:flex><span><span style=color:#75715e># network: {config: disabled}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>network</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>ethernets</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>eth0</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>dhcp4</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>optional</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>version</span>: <span style=color:#ae81ff>2</span>
</span></span></code></pre></div><p>需要新加 WiFi 的配置</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>network</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>ethernets</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>eth0</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>dhcp4</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>optional</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>wifis</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>wlan0</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>optional</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>access-points</span>:
</span></span><span style=display:flex><span>               <span style=color:#e6db74>&#34;YOUR_NETWORK_SSID&#34;</span>:
</span></span><span style=display:flex><span>                    <span style=color:#f92672>password</span>: <span style=color:#e6db74>&#34;YOUR_PASSWORD&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>dhcp4</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>version</span>: <span style=color:#ae81ff>2</span>
</span></span></code></pre></div><p>将无线网的名称和密码填写上</p><h4 id=检查配置>检查配置</h4><ul><li>检查</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo netplan --debug try
</span></span></code></pre></div><p>如果检查结果中没有 error，则说明正常</p><ul><li>生成配置</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo netplan --debug generate
</span></span></code></pre></div><p>如果检查结果中没有 error，则说明正常</p><ul><li>应用配置</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo netplan --debug apply
</span></span></code></pre></div><p>设置完成后，重启树莓派</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>reboot now
</span></span></code></pre></div><p>待重启完成后即可自动连接上 WiFi</p><h2 id=配置-ssh>配置 SSH</h2><h3 id=获取-ip>获取 IP</h3><p>获取 IP 可以从路由器的配置界面查看到；也可以使用在树莓派上通过命令找到</p><ul><li>安装 <code>net-tools</code></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>apt update 
</span></span><span style=display:flex><span>apt install net-tools
</span></span></code></pre></div><ul><li>待安装完成后，查找 IP</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ifconfig 
</span></span></code></pre></div><pre tabindex=0><code>eth0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500
        ether dc:a6:32:5f:b4:3e  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 102  bytes 7390 (7.3 KB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 102  bytes 7390 (7.3 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

wlan0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
        inet 192.168.199.5  netmask 255.255.255.0  broadcast 192.168.199.255
        inet6 fe80::dea6:32ff:fe5f:b43f  prefixlen 64  scopeid 0x20&lt;link&gt;
        ether dc:a6:32:5f:b4:3f  txqueuelen 1000  (Ethernet)
        RX packets 292  bytes 78773 (78.7 KB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 181  bytes 32959 (32.9 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
</code></pre><p>其中的 <code>192.168.199.5</code>就是树莓派的 IP</p><h3 id=配置-ssh-1>配置 SSH</h3><ul><li>开启远程登录</li></ul><p>默认的 22 端口是关闭的，需要手动打开</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vi /etc/ssh/sshd_config
</span></span></code></pre></div><p>需要将 <code>#Port 22</code>的注释去掉，然后重启 SSH</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/etc/init.d/ssh restart
</span></span></code></pre></div><pre tabindex=0><code>[ ok ] Restarting ssh (via systemctl): ssh.service.
</code></pre><ul><li>配置登录的 key</li></ul><p>配置key 可以在开启了 ssh 后，通过账号密码，将 key 拷贝到树莓派</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>scp ~/.ssh/id_rsa.pub ubuntu@192.168.199.5:/root/.ssh/authorized_keys
</span></span></code></pre></div><p>或者上传包含自己key 的文件，在树莓派上下载</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -O path/to/my/authorized_keys
</span></span></code></pre></div><hr><h3 id=参考内容>参考内容</h3><ul><li><a href=https://www.raspberrypi.org/downloads/>RaspberryPi Downloads</a></li><li><a href=https://ubuntu.com/download/raspberry-pi>Install Ubuntu Server on a Raspberry Pi 2, 3 or 4</a></li><li><a href=https://ubuntu.com/download/iot/installation-media>Create installation media for Ubuntu</a></li><li><a href=https://www.balena.io/etcher/>balenaEtcher</a></li><li><a href=https://raspberrypi.stackexchange.com/questions/98598/how-to-setup-the-raspberry-pi-3-onboard-wifi-for-ubuntu-server-18-04-with-netpla>How to setup the Raspberry Pi 3 onboard WiFi for Ubuntu Server 18.04 with netplan?</a></li></ul></section><div class=paginator><a class=prev href=https://blog.hellowood.dev/posts/kubernetes-%E4%B8%AD%E4%BD%BF%E7%94%A8-helm-%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8-prometheus/><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M9.94496 9C9.28897 9.61644 7.63215 10.997 6.04814 11.7966 5.98257 11.8297 5.98456 11.9753 6.05061 12.0063c1.00435.4716 2.8788 1.9201 3.89435 2.9937M6.44444 11.9667C8.86549 12.0608 14 12 16 11" stroke="currentcolor" stroke-linecap="round"/></svg>
<span>Kubernetes 中使用 Helm 部署使用 Prometheus</span></a>
<a class=next href=https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8-github-%E4%BD%9C%E4%B8%BA-helm-%E4%BB%93%E5%BA%93/><span>使用 GitHub 作为 Helm 仓库</span><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M12.055 9C12.711 9.61644 14.3679 10.997 15.9519 11.7966 16.0174 11.8297 16.0154 11.9753 15.9494 12.0063 14.945 12.4779 13.0706 13.9264 12.055 15m3.5006-3.0333C13.1345 12.0608 8 12 6 11" stroke="currentcolor" stroke-linecap="round"/></svg></a></div></article></div><footer class=footer><p>&copy; 2024 <a href=https://blog.hellowood.dev/>HelloWood</a>
Powered by
<a href=https://gohugo.io/ rel=noopener target=_blank data-umami-event=to-hugo>Hugo️️</a>
<a href=https://github.com/guangzhengli/hugo-theme-ladder rel=noopener target=_blank data-umami-event=to-ladder>Ladder</a>
️</p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g data-umami-event=top-link><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M10.5376 22.7916C11.0152 22.7207 22.5795 21.1781 22.0978 10.4211 22.0536 9.43274 21.9303 8.53367 21.7387 7.71865M10.5376 22.7916C16.876 22.3728 20.0969 19.8899 21.5383 16.9142M10.5376 22.7916C9.7707 22.9055 8.97982 22.8964 8.19743 22.7725M21.7387 7.71865C21.4988 6.69828 21.1518 5.80967 20.7188 5.04257m1.0199 2.67608C22.6022 10.1105 23.0542 13.7848 21.5383 16.9142M20.7188 5.04257c-3.5504-6.28886-12.88753-4.410077-16.44303.0C2.88063 6.77451-.0433281 11.1668 1.38159 16.6571c.89322 3.4417 3.7911 5.6365 6.81584 6.1154M20.7188 5.04257c1.3509 1.89783 3.3111 6.34223 1.6353 10.37273M21.5383 16.9142C21.8737 16.4251 22.1428 15.9235 22.3541 15.4153M8.19743 22.7725C12.1971 23.4683 20.6281 22.971 22.3541 15.4153M14 10.945C13.3836 10.289 12.003 8.63215 11.2034 7.04814 11.1703 6.98257 11.0247 6.98456 10.9937 7.05061 10.5221 8.05496 9.07362 9.92941 8 10.945m3.0333-3.50056C10.9392 9.86549 11 15 12 17" stroke="currentcolor" stroke-linecap="round"/></svg>
</a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function n(){t.innerHTML="Copied",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),n();return}const s=document.createRange();s.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(s);try{document.execCommand("copy"),n()}catch{}o.removeRange(s)}),e.parentNode.appendChild(t)})</script></main></body><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".blog-content img"));images.forEach(e=>{mediumZoom(e,{margin:10,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.5)"})})</script><script src=/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin=anonymous defer></script></html>