<!doctype html><html lang=en><head><meta name=viewport content="width=device-width,initial-scale=1"><title>使用 Docker 部署 Clash Premium</title>
<meta charset=utf-8><meta name=description content='Ladder@使用 Docker 部署 Clash Premium Clash Premium 是 Clash 的闭源内核版本，相比 Clash 开源版本，最大的特点是支持规则集和代理服务订阅能力
订阅格式转换 大部分订阅是 base64 编码的节点，无法被 Clash 直接使用，因此需要进行订阅格式转换，具体请参考 Clash 使用 Docker 部署 或使用在线工具直接转换：https://acl4ssr-sub.github.io/
修改配置 基础配置 基础配置部分用于指定 Clash 的端口、代理模式等；使用 TUN 后可以代理 UDP 流量，开启 tracing 可以对 Clash 进行性能监控
config.yaml port: 7890 socks-port: 7891 redir-port: 7892 allow-lan: true mode: rule log-level: info # 控制端口 external-controller: :9090 # 访问密码，建议设置 secret: "123456" # TUN 模式，用于代理 TCP、UDP、ICMP 流量 tun: enable: true stack: system auto-route: true auto-redir: true auto-detect-interface: true # 用于性能分析 profile: tracing: true 配置策略组 代理提供方 proxy-providers 用于为策略组 proxy-groups 提供代理节点；这部分用于取代 Clash 中的 proxies'><meta name=author content="HelloWood"><link rel=canonical href=https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8docker%E9%83%A8%E7%BD%B2clash-premium/><meta name=google-site-verification content="G-3MSGPYTHPZ"><link rel=alternate type=application/rss+xml href=https://blog.hellowood.dev//index.xml title=HelloWood><script async src="https://www.googletagmanager.com/gtag/js?id=G-3MSGPYTHPZ"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3MSGPYTHPZ")}</script><script async defer data-website-id=7a9034de-0ce7-4756-942a-829e6cd22301 src=https://umami.hellowood.dev/script.js></script><script defer data-cf-beacon='{"token": "b2e481d136dc428c8c96c8673e2a04cf"}' src=https://static.cloudflareinsights.com/beacon.min.js></script><meta property="og:url" content="https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8docker%E9%83%A8%E7%BD%B2clash-premium/"><meta property="og:site_name" content="HelloWood"><meta property="og:title" content="使用 Docker 部署 Clash Premium"><meta property="og:description" content='使用 Docker 部署 Clash Premium Clash Premium 是 Clash 的闭源内核版本，相比 Clash 开源版本，最大的特点是支持规则集和代理服务订阅能力
订阅格式转换 大部分订阅是 base64 编码的节点，无法被 Clash 直接使用，因此需要进行订阅格式转换，具体请参考 Clash 使用 Docker 部署 或使用在线工具直接转换：https://acl4ssr-sub.github.io/
修改配置 基础配置 基础配置部分用于指定 Clash 的端口、代理模式等；使用 TUN 后可以代理 UDP 流量，开启 tracing 可以对 Clash 进行性能监控
config.yaml port: 7890 socks-port: 7891 redir-port: 7892 allow-lan: true mode: rule log-level: info # 控制端口 external-controller: :9090 # 访问密码，建议设置 secret: "123456" # TUN 模式，用于代理 TCP、UDP、ICMP 流量 tun: enable: true stack: system auto-route: true auto-redir: true auto-detect-interface: true # 用于性能分析 profile: tracing: true 配置策略组 代理提供方 proxy-providers 用于为策略组 proxy-groups 提供代理节点；这部分用于取代 Clash 中的 proxies'><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-09-09T21:32:33+08:00"><meta property="article:modified_time" content="2023-09-09T21:32:33+08:00"><meta property="article:tag" content="Clash"><meta property="article:tag" content="Docker"><meta property="article:tag" content="HomeLab"><meta name=twitter:card content="summary"><meta name=twitter:title content="使用 Docker 部署 Clash Premium"><meta name=twitter:description content='使用 Docker 部署 Clash Premium Clash Premium 是 Clash 的闭源内核版本，相比 Clash 开源版本，最大的特点是支持规则集和代理服务订阅能力
订阅格式转换 大部分订阅是 base64 编码的节点，无法被 Clash 直接使用，因此需要进行订阅格式转换，具体请参考 Clash 使用 Docker 部署 或使用在线工具直接转换：https://acl4ssr-sub.github.io/
修改配置 基础配置 基础配置部分用于指定 Clash 的端口、代理模式等；使用 TUN 后可以代理 UDP 流量，开启 tracing 可以对 Clash 进行性能监控
config.yaml port: 7890 socks-port: 7891 redir-port: 7892 allow-lan: true mode: rule log-level: info # 控制端口 external-controller: :9090 # 访问密码，建议设置 secret: "123456" # TUN 模式，用于代理 TCP、UDP、ICMP 流量 tun: enable: true stack: system auto-route: true auto-redir: true auto-detect-interface: true # 用于性能分析 profile: tracing: true 配置策略组 代理提供方 proxy-providers 用于为策略组 proxy-groups 提供代理节点；这部分用于取代 Clash 中的 proxies'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.hellowood.dev/posts/"},{"@type":"ListItem","position":2,"name":"使用 Docker 部署 Clash Premium","item":"https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8docker%E9%83%A8%E7%BD%B2clash-premium/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"使用 Docker 部署 Clash Premium","name":"使用 Docker 部署 Clash Premium","description":"使用 Docker 部署 Clash Premium Clash Premium 是 Clash 的闭源内核版本，相比 Clash 开源版本，最大的特点是支持规则集和代理服务订阅能力\n订阅格式转换 大部分订阅是 base64 编码的节点，无法被 Clash 直接使用，因此需要进行订阅格式转换，具体请参考 Clash 使用 Docker 部署 或使用在线工具直接转换：https://acl4ssr-sub.github.io/\n修改配置 基础配置 基础配置部分用于指定 Clash 的端口、代理模式等；使用 TUN 后可以代理 UDP 流量，开启 tracing 可以对 Clash 进行性能监控\nconfig.yaml port: 7890 socks-port: 7891 redir-port: 7892 allow-lan: true mode: rule log-level: info # 控制端口 external-controller: :9090 # 访问密码，建议设置 secret: \u0026#34;123456\u0026#34; # TUN 模式，用于代理 TCP、UDP、ICMP 流量 tun: enable: true stack: system auto-route: true auto-redir: true auto-detect-interface: true # 用于性能分析 profile: tracing: true 配置策略组 代理提供方 proxy-providers 用于为策略组 proxy-groups 提供代理节点；这部分用于取代 Clash 中的 proxies","keywords":["Clash","Docker","HomeLab"],"articleBody":"使用 Docker 部署 Clash Premium Clash Premium 是 Clash 的闭源内核版本，相比 Clash 开源版本，最大的特点是支持规则集和代理服务订阅能力\n订阅格式转换 大部分订阅是 base64 编码的节点，无法被 Clash 直接使用，因此需要进行订阅格式转换，具体请参考 Clash 使用 Docker 部署 或使用在线工具直接转换：https://acl4ssr-sub.github.io/\n修改配置 基础配置 基础配置部分用于指定 Clash 的端口、代理模式等；使用 TUN 后可以代理 UDP 流量，开启 tracing 可以对 Clash 进行性能监控\nconfig.yaml port: 7890 socks-port: 7891 redir-port: 7892 allow-lan: true mode: rule log-level: info # 控制端口 external-controller: :9090 # 访问密码，建议设置 secret: \"123456\" # TUN 模式，用于代理 TCP、UDP、ICMP 流量 tun: enable: true stack: system auto-route: true auto-redir: true auto-detect-interface: true # 用于性能分析 profile: tracing: true 配置策略组 代理提供方 proxy-providers 用于为策略组 proxy-groups 提供代理节点；这部分用于取代 Clash 中的 proxies\n下面的配置中，proxy-providers 有两个提供者，类型都是 HTTP，即通过订阅链接进行拉取，同时指定了定时拉取时间和健康检查，用于检测节点的可用性; proxy-groups 指定了这个策略组的名称为 PROXY，用于为 rule 指定策略组名称；使用proxy-providers 中的 self 和 free 提供的节点作为策略组的节点；详细规则可以参考：Proxy Groups 策略组\nproxy-providers: self: type: http url: \"你的订阅地址\" interval: 3600 path: ./self.yaml health-check: enable: true interval: 600 url: http://www.gstatic.com/generate_204 # 来自 GitHub https://github.com/Pawdroid/Free-servers free: type: http url: \"https://sub.xeton.dev/sub?target=clash\u0026new_name=true\u0026url=https%3A%2F%2Fghproxy.com%2Fhttps%3A%2F%2Fraw.githubusercontent.com%2FPawdroid%2FFree-servers%2Fmain%2Fsub\u0026insert=false\" interval: 3600 path: ./free.yaml health-check: enable: true interval: 600 # lazy: true url: http://www.gstatic.com/generate_204 proxy-groups: - name: \"PROXY\" type: url-test use: - self - free url: 'http://www.gstatic.com/generate_204' interval: 300 配置规则集 规则集用于决定流量是否走 Clash 代理，在 Clash 版本中，必须挨个列出处理规则，导致配置非常臃肿，而且不好维护；在 premium 版本中，可以通过 rule-provider 指定订阅的规则集；以下规则集来自 https://github.com/Loyalsoldier/clash-rules；\nrule-providers 部分通过分组的方式指定了规则的处理方式，便于管理；\nrules 为 rule-providers 中的 rule-set 指定了策略组；如RULE-SET,icloud,DIRECT 为 icloud 这个规则集下面的内容指定了 DIRECT 的处理方式，即直接访问；RULE-SET,google,PROXY 为 google 这个规则集下面的内容指定了名为 PROXY的策略组进行代理\n最后一行 MATCH,DIRECT 表示未匹配到规则的使用 DIRECT 方式，即直接访问\nrule-providers: reject: type: http behavior: domain url: \"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt\" path: ./ruleset/reject.yaml interval: 86400 icloud: type: http behavior: domain url: \"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt\" path: ./ruleset/icloud.yaml interval: 86400 apple: type: http behavior: domain url: \"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt\" path: ./ruleset/apple.yaml interval: 86400 google: type: http behavior: domain url: \"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt\" path: ./ruleset/google.yaml interval: 86400 proxy: type: http behavior: domain url: \"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt\" path: ./ruleset/proxy.yaml interval: 86400 direct: type: http behavior: domain url: \"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt\" path: ./ruleset/direct.yaml interval: 86400 private: type: http behavior: domain url: \"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt\" path: ./ruleset/private.yaml interval: 86400 gfw: type: http behavior: domain url: \"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt\" path: ./ruleset/gfw.yaml interval: 86400 tld-not-cn: type: http behavior: domain url: \"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt\" path: ./ruleset/tld-not-cn.yaml interval: 86400 telegramcidr: type: http behavior: ipcidr url: \"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt\" path: ./ruleset/telegramcidr.yaml interval: 86400 cncidr: type: http behavior: ipcidr url: \"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt\" path: ./ruleset/cncidr.yaml interval: 86400 lancidr: type: http behavior: ipcidr url: \"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt\" path: ./ruleset/lancidr.yaml interval: 86400 applications: type: http behavior: classical url: \"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt\" path: ./ruleset/applications.yaml interval: 86400 rules: - RULE-SET,google,PROXY - RULE-SET,proxy,PROXY - RULE-SET,telegramcidr,PROXY - RULE-SET,applications,DIRECT - RULE-SET,private,DIRECT - RULE-SET,reject,REJECT - RULE-SET,icloud,DIRECT - RULE-SET,apple,DIRECT - RULE-SET,direct,DIRECT - RULE-SET,lancidr,DIRECT - RULE-SET,cncidr,DIRECT - GEOIP,LAN,DIRECT - GEOIP,CN,DIRECT - MATCH,DIRECT 部署 使用 Docker Compose 部署 Clash 和 yacd 面板\ndocker-compose.yaml 需要将上面的配置合并到 config.yaml文件中，放到 data/config.yaml路径下，用于挂载到容器 /root/.config/clash 目录下，后续的拉取到的规则集和配置文件都会写到这个目录下\nversion: \"3\" services: clash: image: dreamacro/clash-premium container_name: clash hostname: clash privileged: true restart: unless-stopped ports: - 7890:7890 - 7891:7891 - 7892:7892 - 9090:9090 volumes: - ./data:/root/.config/clash environment: - TZ=Asia/Shanghai yacd: image: ghcr.io/haishanh/yacd:master container_name: yacd hostname: yacd restart: unless-stopped ports: - 9091:80 environment: - TZ=Asia/Shanghai depends_on: - clash 客户端使用 通过容器方式部署的 Clash 可以以代理的方式使用，在手机/电脑或者应用程序中配置代理即可\n命令行 开启代理\nexport https_proxy=http://192.168.2.2:7890 export http_proxy=http://192.168.2.2:7890 export all_proxy=socks5://192.168.2.2:7891 关闭代理\nunset http_proxy unset https_proxy unset all_proxy 系统 在网络-代理中添加配置，指定 HTTP/HTTPS/SOCKS 代理为配置的代理即可\n","wordCount":"448","inLanguage":"en","datePublished":"2023-09-09T21:32:33+08:00","dateModified":"2023-09-09T21:32:33+08:00","author":{"@type":"Person","name":"HelloWood"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8docker%E9%83%A8%E7%BD%B2clash-premium/"},"publisher":{"@type":"Organization","name":"HelloWood","logo":{"@type":"ImageObject","url":"https://blog.hellowood.dev/favicon.ico"}}}</script><link rel=icon href=/images/avatar.png sizes=16x16><link rel=apple-touch-icon href=/images/avatar.png><link rel=manifest href=/images/avatar.png><link rel=stylesheet href=https://cdn.staticfile.org/lxgw-wenkai-webfont/1.6.0/style.css><link rel=stylesheet href=/css/main.min.7f82854fa0e999ec07c4835d3029de9f484030e254b80d470b3ca48eb934720e.css integrity="sha256-f4KFT6DpmewHxINdMCnen0hAMOJUuA1HCzykjrk0cg4=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css><script src=/js/highlight.min.min.c607d6febd16934a82eb61d3a896ed9d869f54373cc63ce95864ed5488fe3128.js></script><script>hljs.highlightAll()</script><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><meta name=google-adsense-account content="ca-pub-3401351766168985"><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","jtbhx98g62")</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3401351766168985" crossorigin=anonymous></script><script defer src=https://analytics.us.umami.is/script.js data-website-id=73ff1c8c-9938-43cf-81af-e77e26b0cca3></script></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-brand data-umami-event=navigation-brand href=/>HOME
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><span></span><span></span><span></span></label><ul class=navigation-list id=navigation-list><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Blog href=/posts>Blog</a></li><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Tags href=/tags>Tags</a></li><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Archive href=/archives>Archive</a></li><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Dashboard href=https://umami.hellowood.dev/share/lab/Blog>Dashboard</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class="navigation-item navigation-social"><a class=navigation-link data-umami-event=navigation-social href=https://github.com/helloworlde><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li class="navigation-item navigation-dark"><button id=mode type=button data-umami-event=toggle-theme aria-label="toggle user light or dark theme">
<span class=toggle-dark><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span>
<span class=toggle-light><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></li></ul></section></nav><div id=content><article class=blog-single><header class=blog-title><h1>使用 Docker 部署 Clash Premium</h1></header><p><small>September 9, 2023&nbsp;· 448 words&nbsp;· 3 min</small><p><div class=blog-toc><nav id=TableOfContents><ul><li><a href=#订阅格式转换>订阅格式转换</a></li><li><a href=#修改配置>修改配置</a><ul><li><a href=#基础配置>基础配置</a></li><li><a href=#配置策略组>配置策略组</a></li><li><a href=#配置规则集>配置规则集</a></li></ul></li><li><a href=#部署>部署</a></li><li><a href=#客户端使用>客户端使用</a><ul><li><a href=#命令行>命令行</a></li><li><a href=#系统>系统</a></li></ul></li></ul></nav></div><section class=blog-content><h1 id=使用-docker-部署-clash-premium>使用 Docker 部署 Clash Premium</h1><p>Clash Premium 是 Clash 的闭源内核版本，相比 Clash 开源版本，最大的特点是支持规则集和代理服务订阅能力</p><h2 id=订阅格式转换>订阅格式转换</h2><p>大部分订阅是 base64 编码的节点，无法被 Clash 直接使用，因此需要进行订阅格式转换，具体请参考 <a href=https://blog.hellowood.dev/posts/clash-%E4%BD%BF%E7%94%A8-docker-%E9%83%A8%E7%BD%B2/>Clash 使用 Docker 部署</a> 或使用在线工具直接转换：<a href=https://acl4ssr-sub.github.io/>https://acl4ssr-sub.github.io/</a></p><h2 id=修改配置>修改配置</h2><h3 id=基础配置>基础配置</h3><p>基础配置部分用于指定 Clash 的端口、代理模式等；使用 TUN 后可以代理 UDP 流量，开启 tracing 可以对 Clash 进行性能监控</p><ul><li>config.yaml</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>port</span>: <span style=color:#ae81ff>7890</span>
</span></span><span style=display:flex><span><span style=color:#f92672>socks-port</span>: <span style=color:#ae81ff>7891</span>
</span></span><span style=display:flex><span><span style=color:#f92672>redir-port</span>: <span style=color:#ae81ff>7892</span>
</span></span><span style=display:flex><span><span style=color:#f92672>allow-lan</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#f92672>mode</span>: <span style=color:#ae81ff>rule</span>
</span></span><span style=display:flex><span><span style=color:#f92672>log-level</span>: <span style=color:#ae81ff>info</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 控制端口</span>
</span></span><span style=display:flex><span><span style=color:#f92672>external-controller</span>: :<span style=color:#ae81ff>9090</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 访问密码，建议设置</span>
</span></span><span style=display:flex><span><span style=color:#f92672>secret</span>: <span style=color:#e6db74>&#34;123456&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># TUN 模式，用于代理 TCP、UDP、ICMP 流量</span>
</span></span><span style=display:flex><span><span style=color:#f92672>tun</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>enable</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>stack</span>: <span style=color:#ae81ff>system</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>auto-route</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>auto-redir</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>auto-detect-interface</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 用于性能分析</span>
</span></span><span style=display:flex><span><span style=color:#f92672>profile</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>tracing</span>: <span style=color:#66d9ef>true</span>
</span></span></code></pre></div><h3 id=配置策略组>配置策略组</h3><p>代理提供方 <code>proxy-providers</code> 用于为策略组 <code>proxy-groups</code> 提供代理节点；这部分用于取代 Clash 中的 <code>proxies</code></p><p>下面的配置中，<code>proxy-providers</code> 有两个提供者，类型都是 HTTP，即通过订阅链接进行拉取，同时指定了定时拉取时间和健康检查，用于检测节点的可用性;
<code>proxy-groups</code> 指定了这个策略组的名称为 <code>PROXY</code>，用于为 <code>rule</code> 指定策略组名称；使用<code>proxy-providers</code> 中的 self 和 free 提供的节点作为策略组的节点；详细规则可以参考：<a href=https://dreamacro.github.io/clash/zh_CN/configuration/outbound.html#proxy-groups-%E7%AD%96%E7%95%A5%E7%BB%84>Proxy Groups 策略组</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>proxy-providers</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>self</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#34;你的订阅地址&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>3600</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>path</span>: <span style=color:#ae81ff>./self.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>health-check</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>enable</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>600</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>url</span>: <span style=color:#ae81ff>http://www.gstatic.com/generate_204</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 来自 GitHub  https://github.com/Pawdroid/Free-servers    </span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>free</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#34;https://sub.xeton.dev/sub?target=clash&amp;new_name=true&amp;url=https%3A%2F%2Fghproxy.com%2Fhttps%3A%2F%2Fraw.githubusercontent.com%2FPawdroid%2FFree-servers%2Fmain%2Fsub&amp;insert=false&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>3600</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>path</span>: <span style=color:#ae81ff>./free.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>health-check</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>enable</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>600</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># lazy: true</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>url</span>: <span style=color:#ae81ff>http://www.gstatic.com/generate_204</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>proxy-groups</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#34;PROXY&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>url-test</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>use</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>self</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>free</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#39;http://www.gstatic.com/generate_204&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>300</span>
</span></span></code></pre></div><h3 id=配置规则集>配置规则集</h3><p>规则集用于决定流量是否走 Clash 代理，在 Clash 版本中，必须挨个列出处理规则，导致配置非常臃肿，而且不好维护；在 premium 版本中，可以通过 rule-provider 指定订阅的规则集；以下规则集来自 <a href=https://github.com/Loyalsoldier/clash-rules>https://github.com/Loyalsoldier/clash-rules</a>；</p><p><code>rule-providers</code> 部分通过分组的方式指定了规则的处理方式，便于管理；</p><p><code>rules</code> 为 <code>rule-providers</code> 中的 rule-set 指定了策略组；如<code>RULE-SET,icloud,DIRECT</code> 为 icloud 这个规则集下面的内容指定了 DIRECT 的处理方式，即直接访问；<code>RULE-SET,google,PROXY</code> 为 google 这个规则集下面的内容指定了名为 <code>PROXY</code>的策略组进行代理</p><p>最后一行 <code>MATCH,DIRECT</code> 表示未匹配到规则的使用 DIRECT 方式，即直接访问</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>rule-providers</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>reject</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>behavior</span>: <span style=color:#ae81ff>domain</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>path</span>: <span style=color:#ae81ff>./ruleset/reject.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>icloud</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>behavior</span>: <span style=color:#ae81ff>domain</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>path</span>: <span style=color:#ae81ff>./ruleset/icloud.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>apple</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>behavior</span>: <span style=color:#ae81ff>domain</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>path</span>: <span style=color:#ae81ff>./ruleset/apple.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>google</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>behavior</span>: <span style=color:#ae81ff>domain</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>path</span>: <span style=color:#ae81ff>./ruleset/google.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>proxy</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>behavior</span>: <span style=color:#ae81ff>domain</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>path</span>: <span style=color:#ae81ff>./ruleset/proxy.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>direct</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>behavior</span>: <span style=color:#ae81ff>domain</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>path</span>: <span style=color:#ae81ff>./ruleset/direct.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>private</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>behavior</span>: <span style=color:#ae81ff>domain</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>path</span>: <span style=color:#ae81ff>./ruleset/private.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>gfw</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>behavior</span>: <span style=color:#ae81ff>domain</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>path</span>: <span style=color:#ae81ff>./ruleset/gfw.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>tld-not-cn</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>behavior</span>: <span style=color:#ae81ff>domain</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>path</span>: <span style=color:#ae81ff>./ruleset/tld-not-cn.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>telegramcidr</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>behavior</span>: <span style=color:#ae81ff>ipcidr</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>path</span>: <span style=color:#ae81ff>./ruleset/telegramcidr.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>cncidr</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>behavior</span>: <span style=color:#ae81ff>ipcidr</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>path</span>: <span style=color:#ae81ff>./ruleset/cncidr.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>lancidr</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>behavior</span>: <span style=color:#ae81ff>ipcidr</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>path</span>: <span style=color:#ae81ff>./ruleset/lancidr.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>applications</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>behavior</span>: <span style=color:#ae81ff>classical</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>path</span>: <span style=color:#ae81ff>./ruleset/applications.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>86400</span>
</span></span><span style=display:flex><span><span style=color:#f92672>rules</span>:
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>RULE-SET,google,PROXY</span>
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>RULE-SET,proxy,PROXY</span>
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>RULE-SET,telegramcidr,PROXY</span>
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>RULE-SET,applications,DIRECT</span>
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>RULE-SET,private,DIRECT</span>
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>RULE-SET,reject,REJECT</span>
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>RULE-SET,icloud,DIRECT</span>
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>RULE-SET,apple,DIRECT</span>
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>RULE-SET,direct,DIRECT</span>
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>RULE-SET,lancidr,DIRECT</span>
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>RULE-SET,cncidr,DIRECT</span>
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>GEOIP,LAN,DIRECT</span>
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>GEOIP,CN,DIRECT</span>
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>MATCH,DIRECT</span>
</span></span></code></pre></div><h2 id=部署>部署</h2><p>使用 Docker Compose 部署 Clash 和 yacd 面板</p><ul><li>docker-compose.yaml</li></ul><p>需要将上面的配置合并到 <code>config.yaml</code>文件中，放到 <code>data/config.yaml</code>路径下，用于挂载到容器 <code>/root/.config/clash</code> 目录下，后续的拉取到的规则集和配置文件都会写到这个目录下</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;3&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>clash</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>dreamacro/clash-premium</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>clash</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>hostname</span>: <span style=color:#ae81ff>clash</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>privileged</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>unless-stopped</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>7890</span>:<span style=color:#ae81ff>7890</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>7891</span>:<span style=color:#ae81ff>7891</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>7892</span>:<span style=color:#ae81ff>7892</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>9090</span>:<span style=color:#ae81ff>9090</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>./data:/root/.config/clash</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>TZ=Asia/Shanghai</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>yacd</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>ghcr.io/haishanh/yacd:master</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>yacd</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>hostname</span>: <span style=color:#ae81ff>yacd</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>unless-stopped</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>9091</span>:<span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>TZ=Asia/Shanghai</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>depends_on</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>clash</span>
</span></span></code></pre></div><h2 id=客户端使用>客户端使用</h2><p>通过容器方式部署的 Clash 可以以代理的方式使用，在手机/电脑或者应用程序中配置代理即可</p><h3 id=命令行>命令行</h3><p>开启代理</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export https_proxy<span style=color:#f92672>=</span>http://192.168.2.2:7890 
</span></span><span style=display:flex><span>export http_proxy<span style=color:#f92672>=</span>http://192.168.2.2:7890 
</span></span><span style=display:flex><span>export all_proxy<span style=color:#f92672>=</span>socks5://192.168.2.2:7891
</span></span></code></pre></div><p>关闭代理</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>unset http_proxy
</span></span><span style=display:flex><span>unset https_proxy
</span></span><span style=display:flex><span>unset all_proxy
</span></span></code></pre></div><h3 id=系统>系统</h3><p>在网络-代理中添加配置，指定 HTTP/HTTPS/SOCKS 代理为配置的代理即可</p><p><img alt=homelab-clash-proxy-config-macos.png src=https://img.hellowood.dev/picture/homelab-clash-proxy-config-macos.png></p></section><div class=paginator><a class=prev href=https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8wireguard%E8%BF%9E%E6%8E%A5%E5%BC%82%E5%9C%B0%E5%B1%80%E5%9F%9F%E7%BD%91/><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M9.94496 9C9.28897 9.61644 7.63215 10.997 6.04814 11.7966 5.98257 11.8297 5.98456 11.9753 6.05061 12.0063c1.00435.4716 2.8788 1.9201 3.89435 2.9937M6.44444 11.9667C8.86549 12.0608 14 12 16 11" stroke="currentcolor" stroke-linecap="round"/></svg>
<span>使用WireGuard连接异地局域网</span></a>
<a class=next href=https://blog.hellowood.dev/posts/%E5%9C%A8pve%E7%9A%84lxc%E5%AE%B9%E5%99%A8%E4%B8%AD%E7%9B%B4%E9%80%9A%E6%A0%B8%E5%BF%83%E6%98%BE%E5%8D%A1/><span>在PVE的LXC容器中直通核心显卡</span><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M12.055 9C12.711 9.61644 14.3679 10.997 15.9519 11.7966 16.0174 11.8297 16.0154 11.9753 15.9494 12.0063 14.945 12.4779 13.0706 13.9264 12.055 15m3.5006-3.0333C13.1345 12.0608 8 12 6 11" stroke="currentcolor" stroke-linecap="round"/></svg></a></div></article></div><footer class=footer><p>&copy; 2024 <a href=https://blog.hellowood.dev/>HelloWood</a>
Powered by
<a href=https://gohugo.io/ rel=noopener target=_blank data-umami-event=to-hugo>Hugo️️</a>
<a href=https://github.com/guangzhengli/hugo-theme-ladder rel=noopener target=_blank data-umami-event=to-ladder>Ladder</a>
️</p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g data-umami-event=top-link><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M10.5376 22.7916C11.0152 22.7207 22.5795 21.1781 22.0978 10.4211 22.0536 9.43274 21.9303 8.53367 21.7387 7.71865M10.5376 22.7916C16.876 22.3728 20.0969 19.8899 21.5383 16.9142M10.5376 22.7916C9.7707 22.9055 8.97982 22.8964 8.19743 22.7725M21.7387 7.71865C21.4988 6.69828 21.1518 5.80967 20.7188 5.04257m1.0199 2.67608C22.6022 10.1105 23.0542 13.7848 21.5383 16.9142M20.7188 5.04257c-3.5504-6.28886-12.88753-4.410077-16.44303.0C2.88063 6.77451-.0433281 11.1668 1.38159 16.6571c.89322 3.4417 3.7911 5.6365 6.81584 6.1154M20.7188 5.04257c1.3509 1.89783 3.3111 6.34223 1.6353 10.37273M21.5383 16.9142C21.8737 16.4251 22.1428 15.9235 22.3541 15.4153M8.19743 22.7725C12.1971 23.4683 20.6281 22.971 22.3541 15.4153M14 10.945C13.3836 10.289 12.003 8.63215 11.2034 7.04814 11.1703 6.98257 11.0247 6.98456 10.9937 7.05061 10.5221 8.05496 9.07362 9.92941 8 10.945m3.0333-3.50056C10.9392 9.86549 11 15 12 17" stroke="currentcolor" stroke-linecap="round"/></svg>
</a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function n(){t.innerHTML="Copied",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),n();return}const s=document.createRange();s.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(s);try{document.execCommand("copy"),n()}catch{}o.removeRange(s)}),e.parentNode.appendChild(t)})</script></main></body><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".blog-content img"));images.forEach(e=>{mediumZoom(e,{margin:10,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.5)"})})</script><script src=/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin=anonymous defer></script></html>