<!doctype html><html lang=en><head><meta name=viewport content="width=device-width,initial-scale=1"><title>OpenWrt-监控</title>
<meta charset=utf-8><meta name=description content='Ladder@OpenWrt 监控 OpenWrt 默认提供了内存，连接等信息，但是这些信息不够完善，不能全面的反馈 OpenWrt 的状态；可以通过使用第三方的软件来实现监控，常用的有 Netdata 和 Prometheus
通过 Netdata 监控 Netdata 提供了可以在 OpenWrt 直接查看的 UI，可以查看包括 CPU，负载，内存，网络，硬盘，防火墙等常用信息的实时监控
安装 opkg update opkg install netdata 安装完成之后，即可在 OpenWrt 的 19999 端口查看监控数据
通过 Prometheus 抓取数据 Netdata 默认只能查看实时数据，如果想查询历史数据或者只关心特定指标，可以通过 Prometheus 抓取，使用 Grafana 查看；Netdata 支持 Prometheus 格式的数据抓取，路径是/api/v1/allmetrics?format=prometheus_all_hosts；如 http://192.168.2.2:19999/api/v1/allmetrics?format=prometheus_all_hosts
Prometheus 任务配置：需要注意，要添加参数 format=prometheus_all_hosts 才可以抓取到 Prometheus 格式
- job_name: openwrt-netdata honor_timestamps: true scrape_interval: 15s scrape_timeout: 5s metrics_path: /api/v1/allmetrics scheme: http params: format: ["prometheus_all_hosts"] static_configs: - targets: - 192.168.2.2:19999 通过 Grafana 监控 OpenWrt 提供了 Prometheus 数据导出的软件，安装软件后便可以配置 Prometheus 抓取数据'><meta name=author content="HelloWood"><link rel=canonical href=https://blog.hellowood.dev/posts/openwrt-%E7%9B%91%E6%8E%A7/><meta name=google-site-verification content="G-3MSGPYTHPZ"><link rel=alternate type=application/rss+xml href=https://blog.hellowood.dev//index.xml title=HelloWood><script async src="https://www.googletagmanager.com/gtag/js?id=G-3MSGPYTHPZ"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3MSGPYTHPZ")}</script><script async defer data-website-id=7a9034de-0ce7-4756-942a-829e6cd22301 src=https://umami.hellowood.dev/script.js></script><script defer data-cf-beacon='{"token": "b2e481d136dc428c8c96c8673e2a04cf"}' src=https://static.cloudflareinsights.com/beacon.min.js></script><meta property="og:url" content="https://blog.hellowood.dev/posts/openwrt-%E7%9B%91%E6%8E%A7/"><meta property="og:site_name" content="HelloWood"><meta property="og:title" content="OpenWrt-监控"><meta property="og:description" content='OpenWrt 监控 OpenWrt 默认提供了内存，连接等信息，但是这些信息不够完善，不能全面的反馈 OpenWrt 的状态；可以通过使用第三方的软件来实现监控，常用的有 Netdata 和 Prometheus
通过 Netdata 监控 Netdata 提供了可以在 OpenWrt 直接查看的 UI，可以查看包括 CPU，负载，内存，网络，硬盘，防火墙等常用信息的实时监控
安装 opkg update opkg install netdata 安装完成之后，即可在 OpenWrt 的 19999 端口查看监控数据
通过 Prometheus 抓取数据 Netdata 默认只能查看实时数据，如果想查询历史数据或者只关心特定指标，可以通过 Prometheus 抓取，使用 Grafana 查看；Netdata 支持 Prometheus 格式的数据抓取，路径是/api/v1/allmetrics?format=prometheus_all_hosts；如 http://192.168.2.2:19999/api/v1/allmetrics?format=prometheus_all_hosts
Prometheus 任务配置：需要注意，要添加参数 format=prometheus_all_hosts 才可以抓取到 Prometheus 格式
- job_name: openwrt-netdata honor_timestamps: true scrape_interval: 15s scrape_timeout: 5s metrics_path: /api/v1/allmetrics scheme: http params: format: ["prometheus_all_hosts"] static_configs: - targets: - 192.168.2.2:19999 通过 Grafana 监控 OpenWrt 提供了 Prometheus 数据导出的软件，安装软件后便可以配置 Prometheus 抓取数据'><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-09-26T11:32:08+00:00"><meta property="article:modified_time" content="2022-09-26T11:32:08+00:00"><meta property="article:tag" content="Netdata"><meta property="article:tag" content="Prometheus"><meta property="article:tag" content="OpenWrt"><meta property="article:tag" content="HomeLab"><meta name=twitter:card content="summary"><meta name=twitter:title content="OpenWrt-监控"><meta name=twitter:description content='OpenWrt 监控 OpenWrt 默认提供了内存，连接等信息，但是这些信息不够完善，不能全面的反馈 OpenWrt 的状态；可以通过使用第三方的软件来实现监控，常用的有 Netdata 和 Prometheus
通过 Netdata 监控 Netdata 提供了可以在 OpenWrt 直接查看的 UI，可以查看包括 CPU，负载，内存，网络，硬盘，防火墙等常用信息的实时监控
安装 opkg update opkg install netdata 安装完成之后，即可在 OpenWrt 的 19999 端口查看监控数据
通过 Prometheus 抓取数据 Netdata 默认只能查看实时数据，如果想查询历史数据或者只关心特定指标，可以通过 Prometheus 抓取，使用 Grafana 查看；Netdata 支持 Prometheus 格式的数据抓取，路径是/api/v1/allmetrics?format=prometheus_all_hosts；如 http://192.168.2.2:19999/api/v1/allmetrics?format=prometheus_all_hosts
Prometheus 任务配置：需要注意，要添加参数 format=prometheus_all_hosts 才可以抓取到 Prometheus 格式
- job_name: openwrt-netdata honor_timestamps: true scrape_interval: 15s scrape_timeout: 5s metrics_path: /api/v1/allmetrics scheme: http params: format: ["prometheus_all_hosts"] static_configs: - targets: - 192.168.2.2:19999 通过 Grafana 监控 OpenWrt 提供了 Prometheus 数据导出的软件，安装软件后便可以配置 Prometheus 抓取数据'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.hellowood.dev/posts/"},{"@type":"ListItem","position":2,"name":"OpenWrt-监控","item":"https://blog.hellowood.dev/posts/openwrt-%E7%9B%91%E6%8E%A7/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"OpenWrt-监控","name":"OpenWrt-监控","description":"OpenWrt 监控 OpenWrt 默认提供了内存，连接等信息，但是这些信息不够完善，不能全面的反馈 OpenWrt 的状态；可以通过使用第三方的软件来实现监控，常用的有 Netdata 和 Prometheus\n通过 Netdata 监控 Netdata 提供了可以在 OpenWrt 直接查看的 UI，可以查看包括 CPU，负载，内存，网络，硬盘，防火墙等常用信息的实时监控\n安装 opkg update opkg install netdata 安装完成之后，即可在 OpenWrt 的 19999 端口查看监控数据\n通过 Prometheus 抓取数据 Netdata 默认只能查看实时数据，如果想查询历史数据或者只关心特定指标，可以通过 Prometheus 抓取，使用 Grafana 查看；Netdata 支持 Prometheus 格式的数据抓取，路径是/api/v1/allmetrics?format=prometheus_all_hosts；如 http://192.168.2.2:19999/api/v1/allmetrics?format=prometheus_all_hosts\nPrometheus 任务配置：需要注意，要添加参数 format=prometheus_all_hosts 才可以抓取到 Prometheus 格式\n- job_name: openwrt-netdata honor_timestamps: true scrape_interval: 15s scrape_timeout: 5s metrics_path: /api/v1/allmetrics scheme: http params: format: [\u0026#34;prometheus_all_hosts\u0026#34;] static_configs: - targets: - 192.168.2.2:19999 通过 Grafana 监控 OpenWrt 提供了 Prometheus 数据导出的软件，安装软件后便可以配置 Prometheus 抓取数据","keywords":["Netdata","Prometheus","OpenWrt","HomeLab"],"articleBody":"OpenWrt 监控 OpenWrt 默认提供了内存，连接等信息，但是这些信息不够完善，不能全面的反馈 OpenWrt 的状态；可以通过使用第三方的软件来实现监控，常用的有 Netdata 和 Prometheus\n通过 Netdata 监控 Netdata 提供了可以在 OpenWrt 直接查看的 UI，可以查看包括 CPU，负载，内存，网络，硬盘，防火墙等常用信息的实时监控\n安装 opkg update opkg install netdata 安装完成之后，即可在 OpenWrt 的 19999 端口查看监控数据\n通过 Prometheus 抓取数据 Netdata 默认只能查看实时数据，如果想查询历史数据或者只关心特定指标，可以通过 Prometheus 抓取，使用 Grafana 查看；Netdata 支持 Prometheus 格式的数据抓取，路径是/api/v1/allmetrics?format=prometheus_all_hosts；如 http://192.168.2.2:19999/api/v1/allmetrics?format=prometheus_all_hosts\nPrometheus 任务配置：需要注意，要添加参数 format=prometheus_all_hosts 才可以抓取到 Prometheus 格式\n- job_name: openwrt-netdata honor_timestamps: true scrape_interval: 15s scrape_timeout: 5s metrics_path: /api/v1/allmetrics scheme: http params: format: [\"prometheus_all_hosts\"] static_configs: - targets: - 192.168.2.2:19999 通过 Grafana 监控 OpenWrt 提供了 Prometheus 数据导出的软件，安装软件后便可以配置 Prometheus 抓取数据\n安装软件 安装需要的 Prometheus 数据导出软件\nopkg update opkg install prometheus-node-exporter-lua \\ prometheus-node-exporter-lua-nat_traffic \\ prometheus-node-exporter-lua-netstat \\ prometheus-node-exporter-lua-openwrt 如果 OpenWrt 有无线网络，可以安装无线网络数据 的抓取\nopkg install prometheus-node-exporter-lua-wifi \\ prometheus-node-exporter-lua-wifi_stations 修改配置 Prometheus 的配置是 /etc/config/prometheus-node-exporter-lua，使用的接口是 loopback，只支持 OpenWrt 自己访问，通常我们都需要在外部访问，所以需要把接口改为 OpenWrt 对外的接口，即 /etc/config/network 中的 LAN 的 接口，该名称通常为 lan\nconfig prometheus-node-exporter-lua 'main' option listen_interface 'lan' option listen_ipv6 '0' option listen_port '9100' 重新启动 /etc/init.d/prometheus-node-exporter-lua restart 等待重启完成后，访问 :9100/metrics 即可获取到 Prometheus 数据，如http://192.168.2.2:9100/metrics\n配置 Prometheus 任务 - job_name: openwrt-exporter honor_timestamps: true scrape_interval: 15s scrape_timeout: 10s metrics_path: /metrics scheme: http static_configs: - targets: - 192.168.2.2:9100 导入 Grafana 监控 相关的监控面板是 https://grafana.com/grafana/dashboards/11147-openwrt/，导入到 Grafana 即可查看监控数据\n参考文档 How I monitor my OpenWrt router with Grafana Cloud and Prometheus ","wordCount":"177","inLanguage":"en","datePublished":"2022-09-26T11:32:08Z","dateModified":"2022-09-26T11:32:08Z","author":{"@type":"Person","name":"HelloWood"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.hellowood.dev/posts/openwrt-%E7%9B%91%E6%8E%A7/"},"publisher":{"@type":"Organization","name":"HelloWood","logo":{"@type":"ImageObject","url":"https://blog.hellowood.dev/favicon.ico"}}}</script><link rel=icon href=/images/avatar.png sizes=16x16><link rel=apple-touch-icon href=/images/avatar.png><link rel=manifest href=/images/avatar.png><link rel=stylesheet href=https://cdn.staticfile.org/lxgw-wenkai-webfont/1.6.0/style.css><link rel=stylesheet href=/css/main.min.ff1bc260fafbfb440e10194d7d06d57eb5e85eed11d12d06255581262664204e.css integrity="sha256-/xvCYPr7+0QOEBlNfQbVfrXoXu0R0S0GJVWBJiZkIE4=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css><script src=/js/highlight.min.min.c607d6febd16934a82eb61d3a896ed9d869f54373cc63ce95864ed5488fe3128.js></script><script>hljs.highlightAll()</script><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><meta name=google-adsense-account content="ca-pub-3401351766168985"><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","jtbhx98g62")</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3401351766168985" crossorigin=anonymous></script><script defer src=https://analytics.us.umami.is/script.js data-website-id=73ff1c8c-9938-43cf-81af-e77e26b0cca3></script></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-brand data-umami-event=navigation-brand href=/>HOME
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><span></span><span></span><span></span></label><ul class=navigation-list id=navigation-list><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Blog href=/posts>Blog</a></li><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Tags href=/tags>Tags</a></li><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Archive href=/archives>Archive</a></li><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Dashboard href=https://umami.hellowood.dev/share/lab/Blog>Dashboard</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class="navigation-item navigation-social"><a class=navigation-link data-umami-event=navigation-social href=https://github.com/helloworlde><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li class="navigation-item navigation-dark"><button id=mode type=button data-umami-event=toggle-theme aria-label="toggle user light or dark theme">
<span class=toggle-dark><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span>
<span class=toggle-light><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></li></ul></section></nav><div id=content><article class=blog-single><header class=blog-title><h1>OpenWrt-监控</h1></header><p><small>September 26, 2022&nbsp;· 177 words&nbsp;· One minute</small><p><div class=blog-toc><nav id=TableOfContents><ul><li><a href=#通过-netdata-监控>通过 Netdata 监控</a></li><li><a href=#通过-grafana-监控>通过 Grafana 监控</a></li><li><a href=#参考文档>参考文档</a></li></ul></nav></div><section class=blog-content><h1 id=openwrt-监控>OpenWrt 监控</h1><p>OpenWrt 默认提供了内存，连接等信息，但是这些信息不够完善，不能全面的反馈 OpenWrt 的状态；可以通过使用第三方的软件来实现监控，常用的有 <a href=https://openwrt.org/packages/pkgdata/netdata>Netdata</a> 和 <a href=https://openwrt.org/packages/pkgdata/prometheus>Prometheus</a></p><h2 id=通过-netdata-监控>通过 Netdata 监控</h2><p>Netdata 提供了可以在 OpenWrt 直接查看的 UI，可以查看包括 CPU，负载，内存，网络，硬盘，防火墙等常用信息的实时监控</p><ul><li>安装</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>opkg update
</span></span><span style=display:flex><span>opkg install netdata
</span></span></code></pre></div><p>安装完成之后，即可在 OpenWrt 的 19999 端口查看监控数据</p><p><img alt=homelab-openwrt-metrics-netdata.png src=https://img.hellowood.dev/picture/homelab-openwrt-metrics-netdata.png></p><ul><li>通过 Prometheus 抓取数据</li></ul><p>Netdata 默认只能查看实时数据，如果想查询历史数据或者只关心特定指标，可以通过 Prometheus 抓取，使用 Grafana 查看；Netdata 支持 Prometheus 格式的数据抓取，路径是<code>/api/v1/allmetrics?format=prometheus_all_hosts</code>；如 <a href="http://192.168.2.2:19999/api/v1/allmetrics?format=prometheus_all_hosts">http://192.168.2.2:19999/api/v1/allmetrics?format=prometheus_all_hosts</a></p><p>Prometheus 任务配置：需要注意，要添加参数 <code>format=prometheus_all_hosts</code> 才可以抓取到 Prometheus 格式</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#f92672>job_name</span>: <span style=color:#ae81ff>openwrt-netdata</span>
</span></span><span style=display:flex><span><span style=color:#f92672>honor_timestamps</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#f92672>scrape_interval</span>: <span style=color:#ae81ff>15s</span>
</span></span><span style=display:flex><span><span style=color:#f92672>scrape_timeout</span>: <span style=color:#ae81ff>5s</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metrics_path</span>: <span style=color:#ae81ff>/api/v1/allmetrics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>scheme</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span><span style=color:#f92672>params</span>:
</span></span><span style=display:flex><span><span style=color:#f92672>format</span>: [<span style=color:#e6db74>&#34;prometheus_all_hosts&#34;</span>]
</span></span><span style=display:flex><span><span style=color:#f92672>static_configs</span>:
</span></span><span style=display:flex><span>- <span style=color:#f92672>targets</span>:
</span></span><span style=display:flex><span>- <span style=color:#ae81ff>192.168.2.2</span>:<span style=color:#ae81ff>19999</span>
</span></span></code></pre></div><h2 id=通过-grafana-监控>通过 Grafana 监控</h2><p>OpenWrt 提供了 Prometheus 数据导出的软件，安装软件后便可以配置 Prometheus 抓取数据</p><ul><li>安装软件</li></ul><p>安装需要的 Prometheus 数据导出软件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>opkg update
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>opkg install prometheus-node-exporter-lua <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>prometheus-node-exporter-lua-nat_traffic <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>prometheus-node-exporter-lua-netstat <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>prometheus-node-exporter-lua-openwrt
</span></span></code></pre></div><p>如果 OpenWrt 有无线网络，可以安装无线网络数据 的抓取</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>opkg install prometheus-node-exporter-lua-wifi <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>prometheus-node-exporter-lua-wifi_stations
</span></span></code></pre></div><ul><li>修改配置</li></ul><p>Prometheus 的配置是 <code>/etc/config/prometheus-node-exporter-lua</code>，使用的接口是 <code>loopback</code>，只支持 OpenWrt 自己访问，通常我们都需要在外部访问，所以需要把接口改为 OpenWrt 对外的接口，即 <code>/etc/config/network</code> 中的 LAN 的 接口，该名称通常为 <code>lan</code></p><pre tabindex=0><code>config prometheus-node-exporter-lua &#39;main&#39;
option listen_interface &#39;lan&#39;
option listen_ipv6 &#39;0&#39;
option listen_port &#39;9100&#39;
</code></pre><ul><li>重新启动</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/etc/init.d/prometheus-node-exporter-lua restart
</span></span></code></pre></div><p>等待重启完成后，访问 <code>:9100/metrics</code> 即可获取到 Prometheus 数据，如<a href=http://192.168.2.2:9100/metrics>http://192.168.2.2:9100/metrics</a></p><ul><li>配置 Prometheus 任务</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#f92672>job_name</span>: <span style=color:#ae81ff>openwrt-exporter</span>
</span></span><span style=display:flex><span><span style=color:#f92672>honor_timestamps</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#f92672>scrape_interval</span>: <span style=color:#ae81ff>15s</span>
</span></span><span style=display:flex><span><span style=color:#f92672>scrape_timeout</span>: <span style=color:#ae81ff>10s</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metrics_path</span>: <span style=color:#ae81ff>/metrics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>scheme</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span><span style=color:#f92672>static_configs</span>:
</span></span><span style=display:flex><span>- <span style=color:#f92672>targets</span>:
</span></span><span style=display:flex><span>- <span style=color:#ae81ff>192.168.2.2</span>:<span style=color:#ae81ff>9100</span>
</span></span></code></pre></div><ul><li>导入 Grafana 监控</li></ul><p>相关的监控面板是 <a href=https://grafana.com/grafana/dashboards/11147-openwrt/>https://grafana.com/grafana/dashboards/11147-openwrt/</a>，导入到 Grafana 即可查看监控数据</p><p><img alt=homelab-openwrt-metrics-grafana.png src=https://img.hellowood.dev/picture/homelab-openwrt-metrics-grafana.png></p><h2 id=参考文档>参考文档</h2><ul><li><a href=https://grafana.com/blog/2021/02/09/how-i-monitor-my-openwrt-router-with-grafana-cloud-and-prometheus/>How I monitor my OpenWrt router with Grafana Cloud and Prometheus</a></li></ul></section><div class=paginator><a class=prev href=https://blog.hellowood.dev/posts/openwrt-%E4%BD%BF%E7%94%A8-smartdns/><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M9.94496 9C9.28897 9.61644 7.63215 10.997 6.04814 11.7966 5.98257 11.8297 5.98456 11.9753 6.05061 12.0063c1.00435.4716 2.8788 1.9201 3.89435 2.9937M6.44444 11.9667C8.86549 12.0608 14 12 16 11" stroke="currentcolor" stroke-linecap="round"/></svg>
<span>OpenWrt 使用 SmartDNS</span></a>
<a class=next href=https://blog.hellowood.dev/posts/esxi-%E6%8C%82%E8%BD%BD%E7%89%A9%E7%90%86%E7%A3%81%E7%9B%98%E5%88%B0%E8%99%9A%E6%8B%9F%E6%9C%BA/><span>Esxi 挂载物理磁盘到虚拟机</span><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M12.055 9C12.711 9.61644 14.3679 10.997 15.9519 11.7966 16.0174 11.8297 16.0154 11.9753 15.9494 12.0063 14.945 12.4779 13.0706 13.9264 12.055 15m3.5006-3.0333C13.1345 12.0608 8 12 6 11" stroke="currentcolor" stroke-linecap="round"/></svg></a></div></article></div><footer class=footer><p>&copy; 2024 <a href=https://blog.hellowood.dev/>HelloWood</a>
Powered by
<a href=https://gohugo.io/ rel=noopener target=_blank data-umami-event=to-hugo>Hugo️️</a>
<a href=https://github.com/guangzhengli/hugo-theme-ladder rel=noopener target=_blank data-umami-event=to-ladder>Ladder</a>
️</p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g data-umami-event=top-link><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M10.5376 22.7916C11.0152 22.7207 22.5795 21.1781 22.0978 10.4211 22.0536 9.43274 21.9303 8.53367 21.7387 7.71865M10.5376 22.7916C16.876 22.3728 20.0969 19.8899 21.5383 16.9142M10.5376 22.7916C9.7707 22.9055 8.97982 22.8964 8.19743 22.7725M21.7387 7.71865C21.4988 6.69828 21.1518 5.80967 20.7188 5.04257m1.0199 2.67608C22.6022 10.1105 23.0542 13.7848 21.5383 16.9142M20.7188 5.04257c-3.5504-6.28886-12.88753-4.410077-16.44303.0C2.88063 6.77451-.0433281 11.1668 1.38159 16.6571c.89322 3.4417 3.7911 5.6365 6.81584 6.1154M20.7188 5.04257c1.3509 1.89783 3.3111 6.34223 1.6353 10.37273M21.5383 16.9142C21.8737 16.4251 22.1428 15.9235 22.3541 15.4153M8.19743 22.7725C12.1971 23.4683 20.6281 22.971 22.3541 15.4153M14 10.945C13.3836 10.289 12.003 8.63215 11.2034 7.04814 11.1703 6.98257 11.0247 6.98456 10.9937 7.05061 10.5221 8.05496 9.07362 9.92941 8 10.945m3.0333-3.50056C10.9392 9.86549 11 15 12 17" stroke="currentcolor" stroke-linecap="round"/></svg>
</a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function n(){t.innerHTML="Copied",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),n();return}const s=document.createRange();s.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(s);try{document.execCommand("copy"),n()}catch{}o.removeRange(s)}),e.parentNode.appendChild(t)})</script></main></body><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".blog-content img"));images.forEach(e=>{mediumZoom(e,{margin:10,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.5)"})})</script><script src=/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin=anonymous defer></script></html>