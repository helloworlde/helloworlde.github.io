<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D}</style><title>使用培正 PZEM 004T 和 HomeAssistant 监测家庭用电情况</title>
<meta name=description content="培正 PZEM-004T 是一个电能监控模块，能够监测家庭用电的电压，电流，频率，实时功率，耗电量等信息；支持通过 UART 协议进行读取；因此可以使用 ESP8266 或者 ESP32 等模块，将用电信息添加到 HomeAssistant 中
硬件 硬件 价格 数量 备注 peacefair PZEM-004T …"><meta name=keywords content='blog,hugo,HomeAssistant,HomeLab'><meta property="og:url" content="https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8%E5%9F%B9%E6%AD%A3-pzem-004t-%E5%92%8C-homeassistant-%E7%9B%91%E6%B5%8B%E5%AE%B6%E5%BA%AD%E7%94%A8%E7%94%B5%E6%83%85%E5%86%B5/"><meta property="og:type" content="website"><meta property="og:title" content="使用培正 PZEM 004T 和 HomeAssistant 监测家庭用电情况"><meta property="og:description" content="培正 PZEM-004T 是一个电能监控模块，能够监测家庭用电的电压，电流，频率，实时功率，耗电量等信息；支持通过 UART 协议进行读取；因此可以使用 ESP8266 或者 ESP32 等模块，将用电信息添加到 HomeAssistant 中
硬件 硬件 价格 数量 备注 peacefair PZEM-004T …"><meta property="og:image" content="https://blog.hellowood.dev/images/avatar.webp"><meta property="og:image:secure_url" content="https://blog.hellowood.dev/images/avatar.webp"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="使用培正 PZEM 004T 和 HomeAssistant 监测家庭用电情况"><meta name=twitter:description content="培正 PZEM-004T 是一个电能监控模块，能够监测家庭用电的电压，电流，频率，实时功率，耗电量等信息；支持通过 UART 协议进行读取；因此可以使用 ESP8266 或者 ESP32 等模块，将用电信息添加到 HomeAssistant 中
硬件 硬件 价格 数量 备注 peacefair PZEM-004T …"><meta property="twitter:domain" content="https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8%E5%9F%B9%E6%AD%A3-pzem-004t-%E5%92%8C-homeassistant-%E7%9B%91%E6%B5%8B%E5%AE%B6%E5%BA%AD%E7%94%A8%E7%94%B5%E6%83%85%E5%86%B5/"><meta property="twitter:url" content="https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8%E5%9F%B9%E6%AD%A3-pzem-004t-%E5%92%8C-homeassistant-%E7%9B%91%E6%B5%8B%E5%AE%B6%E5%BA%AD%E7%94%A8%E7%94%B5%E6%83%85%E5%86%B5/"><meta name=twitter:image content="https://blog.hellowood.dev/images/avatar.webp"><link rel=canonical href=https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8%E5%9F%B9%E6%AD%A3-pzem-004t-%E5%92%8C-homeassistant-%E7%9B%91%E6%B5%8B%E5%AE%B6%E5%BA%AD%E7%94%A8%E7%94%B5%E6%83%85%E5%86%B5/><link rel=stylesheet type=text/css href=/css/normalize.min.css media=print><link rel=stylesheet type=text/css href=/css/main.min.css><link id=dark-theme rel=stylesheet href=/css/dark.min.css><script src=/js/bundle.min.9a920d7dabdbad8363b6a0a94e29a9dfebdb7ee64cfcb193a0145e512ef2bdab.js integrity="sha256-mpINfavbrYNjtqCpTimp3+vbfuZM/LGToBReUS7yvas="></script><script defer src=https://umami.hellowood.dev/script.js data-website-id=7a9034de-0ce7-4756-942a-829e6cd22301></script><script defer src=https://cloud.umami.is/script.js data-website-id=73ff1c8c-9938-43cf-81af-e77e26b0cca3></script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "b2e481d136dc428c8c96c8673e2a04cf"}'></script><meta name=google-adsense-account content="ca-pub-3401351766168985"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3401351766168985" crossorigin=anonymous></script><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","jtbhx98g62")</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-3MSGPYTHPZ"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3MSGPYTHPZ")</script></head><body><script>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=https://blog.hellowood.dev/><img src=/images/avatar.webp alt=avatar></a></div><div class=nav-title><a class=nav-brand href=https://blog.hellowood.dev/>HelloWood</a></div><div class=nav-links><div class=nav-link><a href=https://blog.hellowood.dev/><span data-feather=home></span> Home</a></div><div class=nav-link><a href=https://blog.hellowood.dev/posts/><span data-feather=book></span> Posts</a></div><div class=nav-link><a href=https://blog.hellowood.dev/tags/><span data-feather=tag></span> Tags</a></div><div class=nav-link><a href=https://github.com/helloworlde><span data-feather=github></span></a></div><div class=nav-link><a href=https://umami.hellowood.dev/share/lab/Blog><span data-feather=pie-chart></span></a></div><div class=nav-link><a href=https://blog.hellowood.dev/index.xml><span data-feather=rss></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target"></span>
<a><span class=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span class="sr-only hamburger-menu-toggle-screen-reader-target">menu</span>
<a><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=https://blog.hellowood.dev/><span data-feather=home></span> Home</a></li><li class=nav-item><a href=https://blog.hellowood.dev/posts/><span data-feather=book></span> Posts</a></li><li class=nav-item><a href=https://blog.hellowood.dev/tags/><span data-feather=tag></span> Tags</a></li><li class=nav-item><a href=https://github.com/helloworlde><span data-feather=github></span></a></li><li class=nav-item><a href=https://umami.hellowood.dev/share/lab/Blog><span data-feather=pie-chart></span></a></li><li class=nav-item><a href=https://blog.hellowood.dev/index.xml><span data-feather=rss></span></a></li><li class="nav-item dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a><span class=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>使用培正 PZEM 004T 和 HomeAssistant 监测家庭用电情况</h1><small role=doc-subtitle></small><p class=post-date>2023-02-02</p><ul class=post-tags><li class=post-tag><a href=https://blog.hellowood.dev/tags/homeassistant>HomeAssistant</a></li><li class=post-tag><a href=https://blog.hellowood.dev/tags/homelab>HomeLab</a></li></ul></div><div class=post-content><p>培正 PZEM-004T 是一个电能监控模块，能够监测家庭用电的电压，电流，频率，实时功率，耗电量等信息；支持通过 UART 协议进行读取；因此可以使用 ESP8266 或者 ESP32 等模块，将用电信息添加到 HomeAssistant 中</p><p><img src=https://img.hellowood.dev/picture/homelab-homeassistant-power-monitor-pannel.png alt=homelab-homeassistant-power-monitor-pannel.png></p><h2 id=硬件>硬件</h2><table><thead><tr><th style=text-align:left>硬件</th><th style=text-align:left>价格</th><th style=text-align:left>数量</th><th style=text-align:left>备注</th></tr></thead><tbody><tr><td style=text-align:left>peacefair PZEM-004T 100A 主机+开合式CT</td><td style=text-align:left>42</td><td style=text-align:left>1</td><td style=text-align:left>电表，建议使用开合式CT，不需要改动电路</td></tr><tr><td style=text-align:left>220V 转 5V1A 供电模块</td><td style=text-align:left>8</td><td style=text-align:left>1</td><td style=text-align:left>用于为培正电表和 3v 模块供电</td></tr><tr><td style=text-align:left>5V 转 3.3V 供电模块</td><td style=text-align:left>3.5</td><td style=text-align:left>1</td><td style=text-align:left>用于为 ESP-01S 模块供电</td></tr><tr><td style=text-align:left>40P杜邦线母对母</td><td style=text-align:left>2.6</td><td style=text-align:left>1</td><td style=text-align:left>用于连接所有的模块</td></tr><tr><td style=text-align:left>40P杜邦线母对公</td><td style=text-align:left>2.6</td><td style=text-align:left>1</td><td style=text-align:left>用于连接所有的模块</td></tr></tbody></table><p>##1. ESP-01S 刷入 esphome 固件</p><h3 id=运行-esphome-容器>运行 esphome 容器</h3><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run -d <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span> --name<span style=color:#c7bf54>=</span><span style=color:#63c381>&#34;esphome&#34;</span> <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span> -p 6052:6052 <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span> -e <span style=color:#dcaeea>TZ</span><span style=color:#c7bf54>=</span>Asia/Shanghai <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span> --hostname<span style=color:#c7bf54>=</span><span style=color:#63c381>&#34;esphome&#34;</span> <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span> -v ~/esphome/config:/config <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span> --privileged <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span> esphome/esphome
</span></span></code></pre></div><h3 id=刷入固件>刷入固件</h3><p>启动后访问 <a href=http://localhost:6052/>http://localhost:6052/</a>，选择添加设备，完整配置文件如下：</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#e06c75>substitutions</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>name</span>: <span style=color:#63c381>&#34;power-monitor&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>friendly_name</span>: <span style=color:#63c381>&#34;Power Monitor&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e06c75>esphome</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>name</span>: <span style=color:#98c379>${name}</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>project</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>name</span>: <span style=color:#63c381>&#34;power.monitor&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>version</span>: <span style=color:#63c381>&#34;1.0.0&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e06c75>esp8266</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>board</span>: <span style=color:#98c379>esp01_1m</span> <span style=color:#8a93a5;font-style:italic># ESP-01/01S</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e06c75>logger</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>baud_rate</span>: <span style=color:#d19a66>0</span> <span style=color:#8a93a5;font-style:italic># 和 UART 冲突，关闭日志</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic># 启用 Home Assistant API</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>api</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic># 手动升级密码</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>ota</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>password</span>: <span style=color:#63c381>&#34;12345678&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e06c75>wifi</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>ssid</span>: !<span style=color:#98c379>secret wifi_ssid</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>password</span>: !<span style=color:#98c379>secret wifi_password</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8a93a5;font-style:italic># WiFi 连接失败时启用 AP</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>ap</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>ssid</span>: <span style=color:#98c379>${name}</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>password</span>: <span style=color:#63c381>&#34;12345678&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e06c75>captive_portal</span>:
</span></span><span style=display:flex><span><span style=color:#e06c75>web_server</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>port</span>: <span style=color:#d19a66>80</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e06c75>status_led</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>pin</span>: <span style=color:#98c379>GPIO2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic># ESP 01/01S 的引脚为 GPIO1 和 GPIO3</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>uart</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>rx_pin</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>number</span>: <span style=color:#98c379>GPIO3</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>tx_pin</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>number</span>: <span style=color:#98c379>GPIO1</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>baud_rate</span>: <span style=color:#d19a66>9600</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>id</span>: <span style=color:#98c379>mod_uart</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e06c75>modbus</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>send_wait_time</span>: <span style=color:#98c379>50ms</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>uart_id</span>: <span style=color:#98c379>mod_uart</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>id</span>: <span style=color:#98c379>mod_bus</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e06c75>text_sensor</span>:
</span></span><span style=display:flex><span>  - <span style=color:#e06c75>platform</span>: <span style=color:#98c379>version</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>name</span>: <span style=color:#63c381>&#34;${friendly_name} Version&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>hide_timestamp</span>: <span style=color:#b756ff;font-weight:700>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e06c75>sensor</span>:
</span></span><span style=display:flex><span>  - <span style=color:#e06c75>platform</span>: <span style=color:#98c379>pzemac</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>current</span>: <span style=color:#8a93a5;font-style:italic># 电流</span>
</span></span><span style=display:flex><span>      <span style=color:#e06c75>name</span>: <span style=color:#63c381>&#34;${friendly_name} Current&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>voltage</span>: <span style=color:#8a93a5;font-style:italic># 电压</span>
</span></span><span style=display:flex><span>      <span style=color:#e06c75>name</span>: <span style=color:#63c381>&#34;${friendly_name} Voltage&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>energy</span>: <span style=color:#8a93a5;font-style:italic># 总电量</span>
</span></span><span style=display:flex><span>      <span style=color:#e06c75>name</span>: <span style=color:#63c381>&#34;${friendly_name} Energy&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#8a93a5;font-style:italic># 转换成 kWh</span>
</span></span><span style=display:flex><span>      <span style=color:#e06c75>filters</span>:
</span></span><span style=display:flex><span>        - <span style=color:#e06c75>multiply</span>: <span style=color:#d19a66>0.001</span>
</span></span><span style=display:flex><span>      <span style=color:#e06c75>unit_of_measurement</span>: <span style=color:#63c381>&#34;kWh&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#8a93a5;font-style:italic># 保留小数点后三位</span>
</span></span><span style=display:flex><span>      <span style=color:#e06c75>accuracy_decimals</span>: <span style=color:#d19a66>3</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>power</span>: <span style=color:#8a93a5;font-style:italic># 当前功率</span>
</span></span><span style=display:flex><span>      <span style=color:#e06c75>name</span>: <span style=color:#63c381>&#34;${friendly_name} Power&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#e06c75>filters</span>:
</span></span><span style=display:flex><span>        - <span style=color:#e06c75>multiply</span>: <span style=color:#d19a66>1</span>
</span></span><span style=display:flex><span>      <span style=color:#e06c75>unit_of_measurement</span>: <span style=color:#63c381>&#34;Wh&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#e06c75>accuracy_decimals</span>: <span style=color:#d19a66>1</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>frequency</span>: <span style=color:#8a93a5;font-style:italic># 频率</span>
</span></span><span style=display:flex><span>      <span style=color:#e06c75>name</span>: <span style=color:#63c381>&#34;${friendly_name} Frequency&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>power_factor</span>: <span style=color:#8a93a5;font-style:italic># 功率因子</span>
</span></span><span style=display:flex><span>      <span style=color:#e06c75>name</span>: <span style=color:#63c381>&#34;${friendly_name} Power Factor&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>update_interval</span>: <span style=color:#98c379>15s</span> <span style=color:#8a93a5;font-style:italic># 15s 同步一次，太短可能会导致 ESP 不断重启</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8a93a5;font-style:italic># 启动时间</span>
</span></span><span style=display:flex><span>  - <span style=color:#e06c75>platform</span>: <span style=color:#98c379>uptime</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>name</span>: <span style=color:#63c381>&#34;${friendly_name} Uptime&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>id</span>: <span style=color:#98c379>uptime_sensor</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>update_interval</span>: <span style=color:#98c379>1s</span>
</span></span></code></pre></div><p>将 ESP-01S 连接到电脑，然后刷入即可</p><h2 id=2-连接培正电表>2. 连接培正电表</h2><p>接线方式如图：</p><p><img src=https://img.hellowood.dev/picture/homelab-homeassitant-module-connect-graph.svg alt=homelab-homeassitant-module-connect-graph.svg></p><p>连接好之后将互感线圈挂到入户线或需要测量的电线上，然后通电启动；待启动成功后访问 <a href=http://power-monitor.local/>http://power-monitor.local/</a>(和 esphome 配置中的 <code>substitutions.name</code>一致) 即可看到相关的数据</p><p><img src=https://img.hellowood.dev/picture/homelab-homeassistant-power-monitor-homepage.png alt=homelab-homeassistant-power-monitor-homepage.png></p><h2 id=3-配置-home-assistant>3. 配置 Home Assistant</h2><p>在 Home Assistant 添加 ESPHome 组件，将 power-monitor 添加到实体中</p><p><img src=https://img.hellowood.dev/picture/homelab-homeassistant-power-monitor-entity.png alt=homelab-homeassistant-power-monitor-entity.png></p><h3 id=配置能源面板>配置能源面板</h3><p>进入 HomeAssistant-配置-仪表盘-能源，添加用电数据，实体选择 <code>Power Monitor Energy</code></p><p><img src=https://img.hellowood.dev/picture/homelab-homeassistant-power-monitor-energy2.png alt=homelab-homeassistant-power-monitor-energy2.png></p><p>添加后提示 <code>Unexpected device class</code> 和 <code>Last reset missing</code> 错误</p><p><img src=https://img.hellowood.dev/picture/homelab-homeassistant-power-monitor-energy-error.png alt=homelab-homeassistant-power-monitor-energy-error.png></p><p>因为 ESPHome 传感器没有提供 Home Assistant 需要的重置时间和传感器类型，当配置为能源时，会提示 <code>Last reset missing</code> 和 <code>Unexpected device class</code> 错误；需要在配置文件 <code>configuration.yaml</code> 中为其指定类型和重置时间</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#e06c75>homeassistant</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>customize_glob</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>sensor.power_monitor_power</span>:
</span></span><span style=display:flex><span>      <span style=color:#e06c75>last_reset</span>: <span style=color:#63c381>&#34;1970-01-01T00:00:00+00:00&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#e06c75>device_class</span>: <span style=color:#98c379>energy</span>
</span></span><span style=display:flex><span>      <span style=color:#e06c75>state_class</span>: <span style=color:#98c379>measurement</span>
</span></span></code></pre></div><p>重启后即可看到用电信息：</p><p><img src=https://img.hellowood.dev/picture/homelab-homeassistant-power-monitor-power-dashboard.png alt=homelab-homeassistant-power-monitor-power-dashboard.png></p></div><div class=prev-next></div><svg id="btt-button" class="arrow-logo" height="1em" viewBox="0 0 384 512" onclick="scrollToTop()" title="Go to top"><path d="M177 159.7l136 136c9.4 9.4 9.4 24.6.0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9.0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9.0L7 329.7c-9.4-9.4-9.4-24.6.0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"/></svg>
<script>let backToTopButton=document.getElementById("btt-button");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?backToTopButton.style.display="block":backToTopButton.style.display="none"}function scrollToTop(){window.scrollTo(0,0)}</script><div id=comments><script src=https://utteranc.es/client.js repo=helloworlde/helloworlde.github.io issue-term=title theme=github-light crossorigin=anonymous async></script></div></div></main><footer class=footer><span>&copy; 2024 hellowood.dev</span>
<span>Made with &#10084;&#65039; using <a target=_blank href=https://github.com/526avijitgupta/gokarna>Gokarna</a></span></footer></body></html>