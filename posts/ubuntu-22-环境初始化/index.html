<!doctype html><html lang=en><head><meta name=viewport content="width=device-width,initial-scale=1"><title>Ubuntu 22 环境初始化</title>
<meta charset=utf-8><meta name=description content="Ladder@Ubuntu 22 环境初始化 在搭建 HomeLab 测试使用过程中，可能会经常创建新的 Ubuntu 虚拟机，或初始化树莓派，记录一些常用的初始化配置
修改主机名 将主机名改为 homelab
hostnamectl hostname homelab 引入 SSH 公钥 从本地导入 在本地执行，将公钥复制到要登录的机器上
ssh-copy-id -i ~/.ssh/id_rsa.pub ubuntu@192.168.2.5 修改 APT 源 将默认的 APT 源替换为清华的源
修改镜像源 mv /etc/apt/sources.list /etc/apt/sources.list.backup sudo bash -c &#34;cat << EOF > /etc/apt/sources.list && apt update deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse deb https://mirrors."><meta name=author content="HelloWood"><link rel=canonical href=https://blog.hellowood.dev/posts/ubuntu-22-%E7%8E%AF%E5%A2%83%E5%88%9D%E5%A7%8B%E5%8C%96/><meta name=google-site-verification content="G-3MSGPYTHPZ"><link rel=alternate type=application/rss+xml href=https://blog.hellowood.dev/index.xml title=HelloWood><script async src="https://www.googletagmanager.com/gtag/js?id=G-3MSGPYTHPZ"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3MSGPYTHPZ",{anonymize_ip:!1})}</script><script async defer data-website-id=7a9034de-0ce7-4756-942a-829e6cd22301 src=https://umami.hellowood.dev/script.js></script><script defer data-cf-beacon='{"token": "b2e481d136dc428c8c96c8673e2a04cf"}' src=https://static.cloudflareinsights.com/beacon.min.js></script><meta property="og:title" content="Ubuntu 22 环境初始化"><meta property="og:description" content="Ubuntu 22 环境初始化 在搭建 HomeLab 测试使用过程中，可能会经常创建新的 Ubuntu 虚拟机，或初始化树莓派，记录一些常用的初始化配置
修改主机名 将主机名改为 homelab
hostnamectl hostname homelab 引入 SSH 公钥 从本地导入 在本地执行，将公钥复制到要登录的机器上
ssh-copy-id -i ~/.ssh/id_rsa.pub ubuntu@192.168.2.5 修改 APT 源 将默认的 APT 源替换为清华的源
修改镜像源 mv /etc/apt/sources.list /etc/apt/sources.list.backup sudo bash -c &#34;cat << EOF > /etc/apt/sources.list && apt update deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse deb https://mirrors."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.hellowood.dev/posts/ubuntu-22-%E7%8E%AF%E5%A2%83%E5%88%9D%E5%A7%8B%E5%8C%96/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-07T18:03:00+08:00"><meta property="article:modified_time" content="2024-01-07T18:03:00+08:00"><meta property="og:see_also" content="https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8-ubuntu-%E6%90%AD%E5%BB%BA-nfs-%E6%9C%8D%E5%8A%A1%E5%99%A8/"><meta property="og:see_also" content="https://blog.hellowood.dev/posts/proxmox-ve-%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84-lxc-%E5%AE%B9%E5%99%A8-ct-%E6%A8%A1%E6%9D%BF/"><meta property="og:see_also" content="https://blog.hellowood.dev/posts/%E5%9C%A8%E9%BB%91%E7%BE%A4%E6%99%96%E4%BD%BF%E7%94%A8-docker-%E9%83%A8%E7%BD%B2-proxmox-backup-server/"><meta property="og:see_also" content="https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8%E9%98%BF%E5%B0%94%E5%8D%A1%E7%89%B9%E7%8C%AB%E6%A3%92%E6%9B%BF%E6%8D%A2%E5%8C%97%E4%BA%AC%E7%A7%BB%E5%8A%A8-gpon-%E5%85%89%E7%8C%AB/"><meta property="og:see_also" content="https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8cloudflare-tunnels%E9%80%9A%E8%BF%87web-ssh%E8%AE%BF%E9%97%AE%E6%9C%8D%E5%8A%A1%E5%99%A8/"><meta property="og:see_also" content="https://blog.hellowood.dev/posts/linux%E7%8E%AF%E5%A2%83%E4%B8%8B%E9%85%8D%E7%BD%AE%E4%B8%8D%E9%97%B4%E6%96%AD%E7%94%B5%E6%BA%90ups/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Ubuntu 22 环境初始化"><meta name=twitter:description content="Ubuntu 22 环境初始化 在搭建 HomeLab 测试使用过程中，可能会经常创建新的 Ubuntu 虚拟机，或初始化树莓派，记录一些常用的初始化配置
修改主机名 将主机名改为 homelab
hostnamectl hostname homelab 引入 SSH 公钥 从本地导入 在本地执行，将公钥复制到要登录的机器上
ssh-copy-id -i ~/.ssh/id_rsa.pub ubuntu@192.168.2.5 修改 APT 源 将默认的 APT 源替换为清华的源
修改镜像源 mv /etc/apt/sources.list /etc/apt/sources.list.backup sudo bash -c &#34;cat << EOF > /etc/apt/sources.list && apt update deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse deb https://mirrors."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://blog.hellowood.dev/posts/"},{"@type":"ListItem","position":3,"name":"Ubuntu 22 环境初始化","item":"https://blog.hellowood.dev/posts/ubuntu-22-%E7%8E%AF%E5%A2%83%E5%88%9D%E5%A7%8B%E5%8C%96/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Ubuntu 22 环境初始化","name":"Ubuntu 22 环境初始化","description":"Ubuntu 22 环境初始化 在搭建 HomeLab 测试使用过程中，可能会经常创建新的 Ubuntu 虚拟机，或初始化树莓派，记录一些常用的初始化配置\n修改主机名 将主机名改为 homelab\nhostnamectl hostname homelab 引入 SSH 公钥 从本地导入 在本地执行，将公钥复制到要登录的机器上\nssh-copy-id -i ~/.ssh/id_rsa.pub ubuntu@192.168.2.5 修改 APT 源 将默认的 APT 源替换为清华的源\n修改镜像源 mv /etc/apt/sources.list /etc/apt/sources.list.backup sudo bash -c \u0026#34;cat \u0026lt;\u0026lt; EOF \u0026gt; /etc/apt/sources.list \u0026amp;\u0026amp; apt update deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse deb https://mirrors.","keywords":["Ubuntu","HomeLab"],"articleBody":"Ubuntu 22 环境初始化 在搭建 HomeLab 测试使用过程中，可能会经常创建新的 Ubuntu 虚拟机，或初始化树莓派，记录一些常用的初始化配置\n修改主机名 将主机名改为 homelab\nhostnamectl hostname homelab 引入 SSH 公钥 从本地导入 在本地执行，将公钥复制到要登录的机器上\nssh-copy-id -i ~/.ssh/id_rsa.pub ubuntu@192.168.2.5 修改 APT 源 将默认的 APT 源替换为清华的源\n修改镜像源 mv /etc/apt/sources.list /etc/apt/sources.list.backup sudo bash -c \"cat \u003c\u003c EOF \u003e /etc/apt/sources.list \u0026\u0026 apt update deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse EOF\" 然后使用 update 验证\napt-get update 安装常用软件 apt install -y --fix-missing curl vim git jq unzip net-tools zsh git-lfs 修改时区 使用 timedatectl 修改 /etc/timezone 文件配置，将时区改为UTC+8\nsudo timedatectl set-timezone Asia/Shanghai 安装 zsh 安装 zsh 和 git sudo apt install -y zsh git 添加 on-my-zsh sudo sh -c \"$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\" 添加 autosuggestions 插件 git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions 修改 ~/.zshrc，启用 autosuggestions 插件，将 plugins=(git)替换为以下内容 plugins=( git zsh-autosuggestions ) 使配置生效 source ~/.zshrc 安装 Docker docker curl -fsSL https://get.docker.com -o get-docker.sh sudo sh get-docker.sh docker-compose sudo apt install docker-compose -y 配置 docker mkdir -p ~/.docker \u0026\u0026 touch ~/.docker/config.json cat \u003c ~/.docker/config.json { \"auths\": { \"registry.xxx.com\": { \"auth\": \"xxx\" } }, \"psFormat\": \"table {{.ID}}\\\\t{{.Names}}\\\\t{{.Status}}\\\\t{{.Ports}}\" } EOF 安装 loki 日志插件 docker plugin install grafana/loki-docker-driver --alias loki --grant-all-permissions vim 配置修改 cat \u003c /etc/vim/vimrc.local \"修复中文乱码\" :set encoding=utf-8 \"语法高亮\" syntax on \"自动对齐\" set autoindent \"检测文件类型\" filetype on EOT 安装中包 apt install language-pack-zh-hant language-pack-zh-hans -y 配置 ssh touch /etc/ssh/sshd_config.d/homelab.conf cat \u003c /etc/ssh/sshd_config.d/homelab.conf PermitRootLogin prohibit-password PasswordAuthentication no PubkeyAuthentication yes EOF 重启 SSH 服务 systemctl restart ssh.service ","wordCount":"271","inLanguage":"en","datePublished":"2024-01-07T18:03:00+08:00","dateModified":"2024-01-07T18:03:00+08:00","author":{"@type":"Person","name":"HelloWood"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.hellowood.dev/posts/ubuntu-22-%E7%8E%AF%E5%A2%83%E5%88%9D%E5%A7%8B%E5%8C%96/"},"publisher":{"@type":"Organization","name":"HelloWood","logo":{"@type":"ImageObject","url":"https://blog.hellowood.dev/favicon.ico"}}}</script><link rel=icon href=/images/avatar.png sizes=16x16><link rel=apple-touch-icon href=/images/avatar.png><link rel=manifest href=/images/avatar.png><link rel=stylesheet href=https://cdn.staticfile.org/lxgw-wenkai-webfont/1.6.0/style.css><link rel=stylesheet href=/css/main.min.ff1bc260fafbfb440e10194d7d06d57eb5e85eed11d12d06255581262664204e.css integrity="sha256-/xvCYPr7+0QOEBlNfQbVfrXoXu0R0S0GJVWBJiZkIE4=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css><script src=/js/highlight.min.min.af9899d47b21c333d192dccc82e0aa6650046e1a76ff4eaf89be703b64d94684.js></script><script>hljs.highlightAll()</script><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","jtbhx98g62")</script></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-brand data-umami-event=navigation-brand href=/>HOME
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><span></span><span></span><span></span></label><ul class=navigation-list id=navigation-list><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Blog href=/posts>Blog</a></li><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Tags href=/tags>Tags</a></li><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Archive href=/archives>Archive</a></li><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Dashboard href=https://umami.hellowood.dev/share/lab/Blog>Dashboard</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class="navigation-item navigation-social"><a class=navigation-link data-umami-event=navigation-social href=https://github.com/helloworlde><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li class="navigation-item navigation-dark"><button id=mode type=button data-umami-event=toggle-theme aria-label="toggle user light or dark theme">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span>
<span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></li></ul></section></nav><div id=content><article class=blog-single><header class=blog-title><h1>Ubuntu 22 环境初始化</h1></header><p><small>January 7, 2024&nbsp;· 271 words&nbsp;· 2 min</small><p><div class=blog-toc><nav id=TableOfContents><ul><li><a href=#修改主机名>修改主机名</a></li><li><a href=#引入-ssh-公钥>引入 SSH 公钥</a></li><li><a href=#修改-apt-源>修改 APT 源</a></li><li><a href=#安装常用软件>安装常用软件</a></li><li><a href=#修改时区>修改时区</a></li><li><a href=#安装-zsh>安装 zsh</a></li><li><a href=#安装-docker>安装 Docker</a></li><li><a href=#vim-配置修改>vim 配置修改</a></li><li><a href=#安装中包>安装中包</a></li><li><a href=#配置--ssh>配置 ssh</a></li></ul></nav></div><section class=blog-content><h1 id=ubuntu-22-环境初始化>Ubuntu 22 环境初始化</h1><p>在搭建 HomeLab 测试使用过程中，可能会经常创建新的 Ubuntu 虚拟机，或初始化树莓派，记录一些常用的初始化配置</p><h2 id=修改主机名>修改主机名</h2><p>将主机名改为 <code>homelab</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>hostnamectl hostname homelab
</span></span></code></pre></div><h2 id=引入-ssh-公钥>引入 SSH 公钥</h2><ul><li>从本地导入</li></ul><p>在本地执行，将公钥复制到要登录的机器上</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ssh-copy-id -i ~/.ssh/id_rsa.pub ubuntu@192.168.2.5
</span></span></code></pre></div><h2 id=修改-apt-源>修改 APT 源</h2><p>将默认的 APT 源替换为<a href=https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/>清华</a>的源</p><ul><li>修改镜像源</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mv /etc/apt/sources.list /etc/apt/sources.list.backup
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo bash -c <span style=color:#e6db74>&#34;cat &lt;&lt; EOF &gt; /etc/apt/sources.list &amp;&amp; apt update 
</span></span></span><span style=display:flex><span><span style=color:#e6db74>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse
</span></span></span><span style=display:flex><span><span style=color:#e6db74># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse
</span></span></span><span style=display:flex><span><span style=color:#e6db74>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse
</span></span></span><span style=display:flex><span><span style=color:#e6db74># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse
</span></span></span><span style=display:flex><span><span style=color:#e6db74>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse
</span></span></span><span style=display:flex><span><span style=color:#e6db74># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse
</span></span></span><span style=display:flex><span><span style=color:#e6db74>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse
</span></span></span><span style=display:flex><span><span style=color:#e6db74># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF&#34;</span>
</span></span></code></pre></div><p>然后使用 update 验证</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>apt-get update
</span></span></code></pre></div><h2 id=安装常用软件>安装常用软件</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>apt install -y --fix-missing curl vim git jq unzip net-tools zsh git-lfs
</span></span></code></pre></div><h2 id=修改时区>修改时区</h2><p>使用 <code>timedatectl</code> 修改 <code>/etc/timezone</code> 文件配置，将时区改为UTC+8</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo timedatectl set-timezone Asia/Shanghai
</span></span></code></pre></div><h2 id=安装-zsh>安装 zsh</h2><ol><li>安装 zsh 和 git</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install -y zsh git
</span></span></code></pre></div><ol start=2><li>添加 on-my-zsh</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo sh -c <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><ol start=3><li>添加 autosuggestions 插件</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/zsh-users/zsh-autosuggestions <span style=color:#e6db74>${</span>ZSH_CUSTOM<span style=color:#66d9ef>:-</span>~/.oh-my-zsh/custom<span style=color:#e6db74>}</span>/plugins/zsh-autosuggestions
</span></span></code></pre></div><ol start=4><li>修改 <code>~/.zshrc</code>，启用 autosuggestions 插件，将 <code>plugins=(git)</code>替换为以下内容</li></ol><pre tabindex=0><code>plugins=(
git
zsh-autosuggestions
)
</code></pre><ol start=5><li>使配置生效</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>source ~/.zshrc
</span></span></code></pre></div><h2 id=安装-docker>安装 Docker</h2><ul><li>docker</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -fsSL https://get.docker.com -o get-docker.sh
</span></span><span style=display:flex><span>sudo sh get-docker.sh
</span></span></code></pre></div><ul><li>docker-compose</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install docker-compose -y
</span></span></code></pre></div><ul><li>配置 docker</li></ul><pre tabindex=0><code>mkdir -p ~/.docker &amp;&amp; touch ~/.docker/config.json

cat &lt;&lt;EOF &gt; ~/.docker/config.json
{
	&#34;auths&#34;: {
		&#34;registry.xxx.com&#34;: {
			&#34;auth&#34;: &#34;xxx&#34;
		}
	},
	&#34;psFormat&#34;: &#34;table {{.ID}}\\t{{.Names}}\\t{{.Status}}\\t{{.Ports}}&#34;
}
EOF
</code></pre><ul><li>安装 loki 日志插件</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker plugin install grafana/loki-docker-driver --alias loki --grant-all-permissions
</span></span></code></pre></div><h2 id=vim-配置修改>vim 配置修改</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOT &gt; /etc/vim/vimrc.local
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;修复中文乱码&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>:set encoding=utf-8
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;语法高亮&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>syntax on
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;自动对齐&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>set autoindent
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;检测文件类型&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>filetype on
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOT</span>
</span></span></code></pre></div><h2 id=安装中包>安装中包</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>apt install language-pack-zh-hant language-pack-zh-hans -y
</span></span></code></pre></div><h2 id=配置--ssh>配置 ssh</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>touch /etc/ssh/sshd_config.d/homelab.conf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF &gt; /etc/ssh/sshd_config.d/homelab.conf
</span></span></span><span style=display:flex><span><span style=color:#e6db74>PermitRootLogin prohibit-password
</span></span></span><span style=display:flex><span><span style=color:#e6db74>PasswordAuthentication no
</span></span></span><span style=display:flex><span><span style=color:#e6db74>PubkeyAuthentication yes
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><ul><li>重启 SSH 服务</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span> systemctl restart ssh.service
</span></span></code></pre></div></section><div class=paginator><a class=next href=https://blog.hellowood.dev/posts/proxmox-ve-%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84-lxc-%E5%AE%B9%E5%99%A8-ct-%E6%A8%A1%E6%9D%BF/><span>Proxmox VE 创建自定义的 LXC 容器 CT 模板</span><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M12.055 9C12.711 9.61644 14.3679 10.997 15.9519 11.7966 16.0174 11.8297 16.0154 11.9753 15.9494 12.0063 14.945 12.4779 13.0706 13.9264 12.055 15m3.5006-3.0333C13.1345 12.0608 8 12 6 11" stroke="currentcolor" stroke-linecap="round"/></svg></a></div><div class=related-resources><h3>Related Resources</h3><nav><ul><li><a href=/posts/%E4%BD%BF%E7%94%A8-ubuntu-%E6%90%AD%E5%BB%BA-nfs-%E6%9C%8D%E5%8A%A1%E5%99%A8/>使用 Ubuntu 搭建 NFS 服务器</a></li></ul></nav><h3>Related Resources</h3><nav><ul><li><a href=/posts/proxmox-ve-%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84-lxc-%E5%AE%B9%E5%99%A8-ct-%E6%A8%A1%E6%9D%BF/>Proxmox VE 创建自定义的 LXC 容器 CT 模板</a></li><li><a href=/posts/%E5%9C%A8%E9%BB%91%E7%BE%A4%E6%99%96%E4%BD%BF%E7%94%A8-docker-%E9%83%A8%E7%BD%B2-proxmox-backup-server/>在黑群晖使用 Docker 部署 Proxmox Backup Server</a></li><li><a href=/posts/%E4%BD%BF%E7%94%A8%E9%98%BF%E5%B0%94%E5%8D%A1%E7%89%B9%E7%8C%AB%E6%A3%92%E6%9B%BF%E6%8D%A2%E5%8C%97%E4%BA%AC%E7%A7%BB%E5%8A%A8-gpon-%E5%85%89%E7%8C%AB/>使用阿尔卡特猫棒替换北京移动 GPON 光猫</a></li><li><a href=/posts/%E4%BD%BF%E7%94%A8cloudflare-tunnels%E9%80%9A%E8%BF%87web-ssh%E8%AE%BF%E9%97%AE%E6%9C%8D%E5%8A%A1%E5%99%A8/>使用 Cloudflare Tunnels 通过 Web SSH 访问服务器</a></li><li><a href=/posts/linux%E7%8E%AF%E5%A2%83%E4%B8%8B%E9%85%8D%E7%BD%AE%E4%B8%8D%E9%97%B4%E6%96%AD%E7%94%B5%E6%BA%90ups/>Linux 环境下配置不间断电源 UPS</a></li><li><a href=/posts/%E4%BD%BF%E7%94%A8-ubuntu-%E6%90%AD%E5%BB%BA-nfs-%E6%9C%8D%E5%8A%A1%E5%99%A8/>使用 Ubuntu 搭建 NFS 服务器</a></li></ul></nav></div></article></div><footer class=footer><p>&copy; 2024 <a href=https://blog.hellowood.dev>HelloWood</a>
Powered by
<a href=https://gohugo.io/ rel=noopener target=_blank data-umami-event=to-hugo>Hugo️️</a>
<a href=https://github.com/guangzhengli/hugo-theme-ladder rel=noopener target=_blank data-umami-event=to-ladder>Ladder</a>
️</p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g data-umami-event=top-link><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.5376 22.7916C11.0152 22.7207 22.5795 21.1781 22.0978 10.4211 22.0536 9.43274 21.9303 8.53367 21.7387 7.71865M10.5376 22.7916C16.876 22.3728 20.0969 19.8899 21.5383 16.9142M10.5376 22.7916C9.7707 22.9055 8.97982 22.8964 8.19743 22.7725M21.7387 7.71865C21.4988 6.69828 21.1518 5.80967 20.7188 5.04257m1.0199 2.67608C22.6022 10.1105 23.0542 13.7848 21.5383 16.9142M20.7188 5.04257c-3.5504-6.28886-12.88753-4.410077-16.44303.0C2.88063 6.77451-.0433281 11.1668 1.38159 16.6571c.89322 3.4417 3.7911 5.6365 6.81584 6.1154M20.7188 5.04257c1.3509 1.89783 3.3111 6.34223 1.6353 10.37273M21.5383 16.9142C21.8737 16.4251 22.1428 15.9235 22.3541 15.4153M8.19743 22.7725C12.1971 23.4683 20.6281 22.971 22.3541 15.4153M14 10.945C13.3836 10.289 12.003 8.63215 11.2034 7.04814 11.1703 6.98257 11.0247 6.98456 10.9937 7.05061 10.5221 8.05496 9.07362 9.92941 8 10.945m3.0333-3.50056C10.9392 9.86549 11 15 12 17" stroke="currentcolor" stroke-linecap="round"/></svg>
</a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function n(){t.innerHTML="Copied",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),n();return}const s=document.createRange();s.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(s);try{document.execCommand("copy"),n()}catch{}o.removeRange(s)}),e.parentNode.appendChild(t)})</script></main></body><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".blog-content img"));images.forEach(e=>{mediumZoom(e,{margin:10,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.5)"})})</script><script src=/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin=anonymous defer></script></html>