<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D}</style><title>使用 Docker 在 Linux 服务器搭建 Hysteria2 作为代理</title>
<meta name=description content="Hysteria 是一个代理工具，支持 SOCKS5、HTTP 代理、TCP/UDP 转发、Linux TProxy、TUN 等代理方式；基于魔改的 QUIC 协议和抢占式塞控制算法，Hysteria 在不稳定和容易丢包的网络环境中也能比 Trojan 有相对较好的延迟表现，这对于代理来说是非常重要的
Hysteria …"><meta name=keywords content='blog,hugo,Hysteria2,HomeLab,Network'><meta property="og:url" content="https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8-docker-%E5%9C%A8-linux-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA-hysteria2-%E4%BD%9C%E4%B8%BA%E4%BB%A3%E7%90%86/"><meta property="og:type" content="website"><meta property="og:title" content="使用 Docker 在 Linux 服务器搭建 Hysteria2 作为代理"><meta property="og:description" content="Hysteria 是一个代理工具，支持 SOCKS5、HTTP 代理、TCP/UDP 转发、Linux TProxy、TUN 等代理方式；基于魔改的 QUIC 协议和抢占式塞控制算法，Hysteria 在不稳定和容易丢包的网络环境中也能比 Trojan 有相对较好的延迟表现，这对于代理来说是非常重要的
Hysteria …"><meta property="og:image" content="https://blog.hellowood.dev/images/avatar.webp"><meta property="og:image:secure_url" content="https://blog.hellowood.dev/images/avatar.webp"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="使用 Docker 在 Linux 服务器搭建 Hysteria2 作为代理"><meta name=twitter:description content="Hysteria 是一个代理工具，支持 SOCKS5、HTTP 代理、TCP/UDP 转发、Linux TProxy、TUN 等代理方式；基于魔改的 QUIC 协议和抢占式塞控制算法，Hysteria 在不稳定和容易丢包的网络环境中也能比 Trojan 有相对较好的延迟表现，这对于代理来说是非常重要的
Hysteria …"><meta property="twitter:domain" content="https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8-docker-%E5%9C%A8-linux-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA-hysteria2-%E4%BD%9C%E4%B8%BA%E4%BB%A3%E7%90%86/"><meta property="twitter:url" content="https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8-docker-%E5%9C%A8-linux-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA-hysteria2-%E4%BD%9C%E4%B8%BA%E4%BB%A3%E7%90%86/"><meta name=twitter:image content="https://blog.hellowood.dev/images/avatar.webp"><link rel=canonical href=https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8-docker-%E5%9C%A8-linux-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA-hysteria2-%E4%BD%9C%E4%B8%BA%E4%BB%A3%E7%90%86/><link rel=stylesheet type=text/css href=/css/normalize.min.css media=print><link rel=stylesheet type=text/css href=/css/main.min.css><link id=dark-theme rel=stylesheet href=/css/dark.min.css><script src=/js/bundle.min.3eb19cb61dde9e37b9522867f3e024aeb68e26ab8e03252e46e365abcb19acf7.js integrity="sha256-PrGcth3enje5Uihn8+AkrraOJquOAyUuRuNlq8sZrPc="></script><link rel=stylesheet type=text/css href=/css/custom.css><script defer src=https://umami.hellowood.dev/script.js data-website-id=7a9034de-0ce7-4756-942a-829e6cd22301></script><script defer src=https://cloud.umami.is/script.js data-website-id=73ff1c8c-9938-43cf-81af-e77e26b0cca3></script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "b2e481d136dc428c8c96c8673e2a04cf"}'></script><meta name=google-adsense-account content="ca-pub-3401351766168985"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3401351766168985" crossorigin=anonymous></script><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","jtbhx98g62")</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-3MSGPYTHPZ"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3MSGPYTHPZ")</script></head><body><script>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=https://blog.hellowood.dev/><img src=/images/avatar.webp alt=avatar></a></div><div class=nav-title><a class=nav-brand href=https://blog.hellowood.dev/>HelloWood</a></div><div class=nav-links><div class=nav-link><a href=https://blog.hellowood.dev/ aria-label><span data-feather=home></span> Home</a></div><div class=nav-link><a href=https://blog.hellowood.dev/posts/ aria-label><span data-feather=book></span> Posts</a></div><div class=nav-link><a href=https://blog.hellowood.dev/tags/ aria-label><span data-feather=tag></span> Tags</a></div><div class=nav-link><a href=https://github.com/helloworlde aria-label=github><span data-feather=github></span></a></div><div class=nav-link><a href=https://umami.hellowood.dev/share/lab/Blog aria-label=dashboard><span data-feather=pie-chart></span></a></div><div class=nav-link><a href=https://blog.hellowood.dev/index.xml aria-label=rss><span data-feather=rss></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a aria-hidden=true role=switch><span class=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span class="sr-only hamburger-menu-toggle-screen-reader-target">menu</span>
<a aria-checked=false aria-labelledby=hamburger-menu-toggle id=hamburger-menu-toggle-target role=switch><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=https://blog.hellowood.dev/><span data-feather=home></span> Home</a></li><li class=nav-item><a href=https://blog.hellowood.dev/posts/><span data-feather=book></span> Posts</a></li><li class=nav-item><a href=https://blog.hellowood.dev/tags/><span data-feather=tag></span> Tags</a></li><li class=nav-item><a href=https://github.com/helloworlde><span data-feather=github></span></a></li><li class=nav-item><a href=https://umami.hellowood.dev/share/lab/Blog><span data-feather=pie-chart></span></a></li><li class=nav-item><a href=https://blog.hellowood.dev/index.xml><span data-feather=rss></span></a></li><li class="nav-item dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a role=switch><span class=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>使用 Docker 在 Linux 服务器搭建 Hysteria2 作为代理</h1><small role=doc-subtitle></small><p class=post-date>2024-12-29</p><ul class=post-tags><li class=post-tag><a href=https://blog.hellowood.dev/tags/hysteria2>Hysteria2</a></li><li class=post-tag><a href=https://blog.hellowood.dev/tags/homelab>HomeLab</a></li><li class=post-tag><a href=https://blog.hellowood.dev/tags/network>Network</a></li></ul></div><div class=post-content><p><a href=https://v2.hysteria.network/zh/>Hysteria</a> 是一个代理工具，支持 SOCKS5、HTTP 代理、TCP/UDP 转发、Linux TProxy、TUN 等代理方式；基于魔改的 QUIC 协议和抢占式塞控制算法，Hysteria 在不稳定和容易丢包的网络环境中也能比 <a href=https://trojan-gfw.github.io/trojan/protocol>Trojan</a> 有相对较好的延迟表现，这对于代理来说是非常重要的</p><p>Hysteria 由服务端和客户端组成，服务端支持 Docker、二进制等方式部署，客户端可以是 ClashX、ShellCrash 等支持 Hysteria 协议的软件，或者 Hysteria 自己的客户端</p><p>基于 Docker 容器搭建服务端，并使用运行在路由器中的 ShellCrash 作为客户端</p><h2 id=服务端>服务端</h2><p>因为 Hysteria 需要伪装成 HTTP/3 流量，需要一个公网 IP 和域名(如果没有域名也可以在 ZeroSSL 申请 IP 的 TLS 证书)</p><h3 id=获取-ssl-证书>获取 SSL 证书</h3><p>证书可以使用 Let&rsquo;s Encrypt，ZeroSSL 等免费获取，参考 <a href=https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8-lets-encrypt-%E7%94%B3%E8%AF%B7-https-%E8%AF%81%E4%B9%A6/>使用 Let’s Encrypt 申请 HTTPS 证书</a></p><h3 id=部署服务端>部署服务端</h3><h4 id=服务端配置文件>服务端配置文件</h4><ul><li><code>config/hysteria.yaml</code></li></ul><p>服务端配置文件位于 <code>config/</code> 路径下，关于配置细节可以参考 <a href=https://v2.hysteria.network/zh/docs/advanced/Full-Server-Config/>完整服务端配置</a></p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#e06c75>listen</span>: :<span style=color:#d19a66>443</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic># 伪装为 bing</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>masquerade</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>listenHTTP</span>: :<span style=color:#d19a66>80</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>listenHTTPS</span>: :<span style=color:#d19a66>9443</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>forceHTTPS</span>: <span style=color:#b756ff;font-weight:700>true</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>type</span>: <span style=color:#98c379>proxy</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>proxy</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>url</span>: <span style=color:#98c379>https://bing.com</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>rewriteHost</span>: <span style=color:#b756ff;font-weight:700>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic># 用于流量分析</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>trafficStats</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>listen</span>: :<span style=color:#d19a66>9999</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>secret</span>: <span style=color:#d19a66>123456</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e06c75>disableUDP</span>: <span style=color:#b756ff;font-weight:700>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e06c75>log</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>level</span>: <span style=color:#98c379>debug</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e06c75>speedTest</span>: <span style=color:#b756ff;font-weight:700>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic># 带宽</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>bandwidth</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>up</span>: <span style=color:#d19a66>100</span> <span style=color:#98c379>mbps</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>down</span>: <span style=color:#d19a66>50</span> <span style=color:#98c379>mbps</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic># DNS</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>resolver</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>type</span>: <span style=color:#98c379>tcp</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>tcp</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>addr</span>: <span style=color:#d19a66>8.8.8.8</span>:<span style=color:#d19a66>53</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>timeout</span>: <span style=color:#98c379>4s</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>udp</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>addr</span>: <span style=color:#d19a66>8.8.4.4</span>:<span style=color:#d19a66>53</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>timeout</span>: <span style=color:#98c379>4s</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>tls</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>addr</span>: <span style=color:#d19a66>1.1.1.1</span>:<span style=color:#d19a66>853</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>timeout</span>: <span style=color:#98c379>10s</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>sni</span>: <span style=color:#98c379>cloudflare-dns.com</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>insecure</span>: <span style=color:#b756ff;font-weight:700>false</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>https</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>addr</span>: <span style=color:#d19a66>1.1.1.1</span>:<span style=color:#d19a66>443</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>timeout</span>: <span style=color:#98c379>10s</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>sni</span>: <span style=color:#98c379>cloudflare-dns.com</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>insecure</span>: <span style=color:#b756ff;font-weight:700>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e06c75>tls</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>cert</span>: <span style=color:#98c379>/cert/hy.example.com.crt</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>key</span>: <span style=color:#98c379>/cert/hy.example.com.key</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e06c75>auth</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>type</span>: <span style=color:#98c379>userpass</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>userpass</span>:
</span></span><span style=display:flex><span>    - <span style=color:#e06c75>admin</span>: <span style=color:#d19a66>123456</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic># 协议嗅探</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>sniff</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>enable</span>: <span style=color:#b756ff;font-weight:700>true</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>timeout</span>: <span style=color:#98c379>2s</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>rewriteDomain</span>: <span style=color:#b756ff;font-weight:700>false</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>tcpPorts</span>: <span style=color:#d19a66>80</span>,<span style=color:#d19a66>9443</span>,<span style=color:#d19a66>8000-9000</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>udpPorts</span>: <span style=color:#98c379>all</span>
</span></span></code></pre></div><h4 id=部署>部署</h4><ul><li>docker-compose.yaml</li></ul><p>申请后的证书放在 <code>cert/</code>路径下，挂载到容器中</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#e06c75>services</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>hysteria</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>image</span>: <span style=color:#98c379>tobyxdd/hysteria</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>container_name</span>: <span style=color:#98c379>hysteria</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>hostname</span>: <span style=color:#98c379>hysteria</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>restart</span>: <span style=color:#98c379>unless-stopped</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>network_mode</span>: <span style=color:#98c379>host</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>environment</span>:
</span></span><span style=display:flex><span>      - <span style=color:#98c379>TZ=Asia/Shanghai</span>
</span></span><span style=display:flex><span>      - <span style=color:#98c379>HYSTERIA_BBR_DEBUG=1</span>
</span></span><span style=display:flex><span>      - <span style=color:#98c379>HYSTERIA_LOG_LEVEL=debug</span>
</span></span><span style=display:flex><span>      - <span style=color:#98c379>HYSTERIA_BRUTAL_DEBUG=1</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>volumes</span>:
</span></span><span style=display:flex><span>      - <span style=color:#98c379>./cert:/cert</span>
</span></span><span style=display:flex><span>      - <span style=color:#98c379>./config/hysteria.yaml:/etc/hysteria.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>command</span>: [<span style=color:#63c381>&#34;server&#34;</span>, <span style=color:#63c381>&#34;-c&#34;</span>, <span style=color:#63c381>&#34;/etc/hysteria.yaml&#34;</span>]
</span></span></code></pre></div><p>使用 <code>docker compose up -d</code> 启动后便会监听 443 端口，添加 DNS 解析后访问 hy.example.com 域名会自动重定向到 bing.com</p><h2 id=客户端>客户端</h2><p>客户端使用 ShellCrash，安装使用参考 <a href=https://github.com/juewuy/ShellCrash>ShellCrash</a></p><h3 id=hysteria-节点配置>Hysteria 节点配置</h3><p>hysteria 的配置文件放在了 GitHub Gist 中，通过 proxy-providers 提供给 Clash，配置内容如下：</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#e06c75>proxies</span>:
</span></span><span style=display:flex><span>  - <span style=color:#e06c75>name</span>: <span style=color:#63c381>&#34;hy-node&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>type</span>: <span style=color:#98c379>hysteria2</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>server</span>: <span style=color:#98c379>hy.example.com</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>password</span>: <span style=color:#63c381>&#34;admin:123456&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>port</span>: <span style=color:#d19a66>443</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>ports</span>: <span style=color:#d19a66>443</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>up</span>: <span style=color:#63c381>&#34;50 mbps&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>down</span>: <span style=color:#63c381>&#34;100 mbps&#34;</span>
</span></span></code></pre></div><h3 id=shellcrash-配置文件>ShellCrash 配置文件</h3><ul><li>config.yaml</li></ul><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#e06c75>port</span>: <span style=color:#d19a66>7890</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>socks-port</span>: <span style=color:#d19a66>7891</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>redir-port</span>: <span style=color:#d19a66>7892</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>allow-lan</span>: <span style=color:#b756ff;font-weight:700>true</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>mode</span>: <span style=color:#98c379>rule</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>log-level</span>: <span style=color:#98c379>info</span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic># 控制端口</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>external-controller</span>: :<span style=color:#d19a66>9090</span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic># 访问密码，建议设置</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>secret</span>: <span style=color:#63c381>&#34;123456&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic># TUN 模式，用于代理 TCP、UDP、ICMP 流量</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>tun</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>enable</span>: <span style=color:#b756ff;font-weight:700>true</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>stack</span>: <span style=color:#98c379>system</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>auto-route</span>: <span style=color:#b756ff;font-weight:700>true</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>auto-redir</span>: <span style=color:#b756ff;font-weight:700>true</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>auto-detect-interface</span>: <span style=color:#b756ff;font-weight:700>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e06c75>proxy-providers</span>:
</span></span><span style=display:flex><span>  <span style=color:#8a93a5;font-style:italic># 配置文件地址，参考 https://wiki.metacubex.one/config/proxy-providers/</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>hysteria</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>type</span>: <span style=color:#98c379>http</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>url</span>: <span style=color:#63c381>&#34;https://gist.githubusercontent.com/xx/raw/hysteria.yaml&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>path</span>: <span style=color:#98c379>./hysteria.yaml</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e06c75>proxy-groups</span>:
</span></span><span style=display:flex><span>  - <span style=color:#e06c75>name</span>: <span style=color:#63c381>&#34;PROXY&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>type</span>: <span style=color:#98c379>url-test</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>use</span>:
</span></span><span style=display:flex><span>      - <span style=color:#98c379>hysteria</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>url</span>: <span style=color:#63c381>&#34;http://www.gstatic.com/generate_204&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>interval</span>: <span style=color:#d19a66>180</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e06c75>rule-providers</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>reject</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>type</span>: <span style=color:#98c379>http</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>behavior</span>: <span style=color:#98c379>domain</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>url</span>: <span style=color:#63c381>&#34;https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>path</span>: <span style=color:#98c379>./ruleset/reject.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>interval</span>: <span style=color:#d19a66>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>icloud</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>type</span>: <span style=color:#98c379>http</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>behavior</span>: <span style=color:#98c379>domain</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>url</span>: <span style=color:#63c381>&#34;https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>path</span>: <span style=color:#98c379>./ruleset/icloud.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>interval</span>: <span style=color:#d19a66>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>apple</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>type</span>: <span style=color:#98c379>http</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>behavior</span>: <span style=color:#98c379>domain</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>url</span>: <span style=color:#63c381>&#34;https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>path</span>: <span style=color:#98c379>./ruleset/apple.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>interval</span>: <span style=color:#d19a66>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>google</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>type</span>: <span style=color:#98c379>http</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>behavior</span>: <span style=color:#98c379>domain</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>url</span>: <span style=color:#63c381>&#34;https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>path</span>: <span style=color:#98c379>./ruleset/google.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>interval</span>: <span style=color:#d19a66>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>proxy</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>type</span>: <span style=color:#98c379>http</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>behavior</span>: <span style=color:#98c379>domain</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>url</span>: <span style=color:#63c381>&#34;https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>path</span>: <span style=color:#98c379>./ruleset/proxy.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>interval</span>: <span style=color:#d19a66>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>direct</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>type</span>: <span style=color:#98c379>http</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>behavior</span>: <span style=color:#98c379>domain</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>url</span>: <span style=color:#63c381>&#34;https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>path</span>: <span style=color:#98c379>./ruleset/direct.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>interval</span>: <span style=color:#d19a66>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>private</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>type</span>: <span style=color:#98c379>http</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>behavior</span>: <span style=color:#98c379>domain</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>url</span>: <span style=color:#63c381>&#34;https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>path</span>: <span style=color:#98c379>./ruleset/private.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>interval</span>: <span style=color:#d19a66>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>gfw</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>type</span>: <span style=color:#98c379>http</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>behavior</span>: <span style=color:#98c379>domain</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>url</span>: <span style=color:#63c381>&#34;https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>path</span>: <span style=color:#98c379>./ruleset/gfw.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>interval</span>: <span style=color:#d19a66>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>tld-not-cn</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>type</span>: <span style=color:#98c379>http</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>behavior</span>: <span style=color:#98c379>domain</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>url</span>: <span style=color:#63c381>&#34;https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>path</span>: <span style=color:#98c379>./ruleset/tld-not-cn.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>interval</span>: <span style=color:#d19a66>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>telegramcidr</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>type</span>: <span style=color:#98c379>http</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>behavior</span>: <span style=color:#98c379>ipcidr</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>url</span>: <span style=color:#63c381>&#34;https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>path</span>: <span style=color:#98c379>./ruleset/telegramcidr.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>interval</span>: <span style=color:#d19a66>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>cncidr</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>type</span>: <span style=color:#98c379>http</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>behavior</span>: <span style=color:#98c379>ipcidr</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>url</span>: <span style=color:#63c381>&#34;https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>path</span>: <span style=color:#98c379>./ruleset/cncidr.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>interval</span>: <span style=color:#d19a66>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>lancidr</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>type</span>: <span style=color:#98c379>http</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>behavior</span>: <span style=color:#98c379>ipcidr</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>url</span>: <span style=color:#63c381>&#34;https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>path</span>: <span style=color:#98c379>./ruleset/lancidr.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>interval</span>: <span style=color:#d19a66>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>applications</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>type</span>: <span style=color:#98c379>http</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>behavior</span>: <span style=color:#98c379>classical</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>url</span>: <span style=color:#63c381>&#34;https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>path</span>: <span style=color:#98c379>./ruleset/applications.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>interval</span>: <span style=color:#d19a66>86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e06c75>rules</span>:
</span></span><span style=display:flex><span>  - <span style=color:#98c379>RULE-SET,google,PROXY</span>
</span></span><span style=display:flex><span>  - <span style=color:#98c379>RULE-SET,proxy,PROXY</span>
</span></span><span style=display:flex><span>  - <span style=color:#98c379>RULE-SET,telegramcidr,PROXY</span>
</span></span><span style=display:flex><span>  - <span style=color:#98c379>RULE-SET,applications,DIRECT</span>
</span></span><span style=display:flex><span>  - <span style=color:#98c379>RULE-SET,private,DIRECT</span>
</span></span><span style=display:flex><span>  - <span style=color:#98c379>RULE-SET,reject,REJECT</span>
</span></span><span style=display:flex><span>  - <span style=color:#98c379>RULE-SET,icloud,DIRECT</span>
</span></span><span style=display:flex><span>  - <span style=color:#98c379>RULE-SET,apple,DIRECT</span>
</span></span><span style=display:flex><span>  - <span style=color:#98c379>RULE-SET,direct,DIRECT</span>
</span></span><span style=display:flex><span>  - <span style=color:#98c379>RULE-SET,lancidr,DIRECT</span>
</span></span><span style=display:flex><span>  - <span style=color:#98c379>RULE-SET,cncidr,DIRECT</span>
</span></span><span style=display:flex><span>  - <span style=color:#98c379>GEOIP,LAN,DIRECT</span>
</span></span><span style=display:flex><span>  - <span style=color:#98c379>GEOIP,CN,DIRECT</span>
</span></span><span style=display:flex><span>  - <span style=color:#98c379>MATCH,DIRECT</span>
</span></span></code></pre></div><p>启动 ShellCrash，即可在代理中看到节点信息，协议类型是 Hysteria2</p><p><img src=https://img.hellowood.dev/picture/homelab-proxy-server-hysteria2.png alt=homelab-proxy-server-hysteria2.png></p></div><div class=prev-next></div><svg id="btt-button" class="arrow-logo" height="1em" viewBox="0 0 384 512" onclick="scrollToTop()" title="Go to top"><path d="M177 159.7l136 136c9.4 9.4 9.4 24.6.0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9.0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9.0L7 329.7c-9.4-9.4-9.4-24.6.0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"/></svg>
<script>let backToTopButton=document.getElementById("btt-button");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?backToTopButton.style.display="block":backToTopButton.style.display="none"}function scrollToTop(){window.scrollTo(0,0)}</script><div id=comments><script src=https://utteranc.es/client.js repo=helloworlde/helloworlde.github.io issue-term=title theme=github-light crossorigin=anonymous async></script></div></div></main><footer class=footer><span>&copy; 2024 hellowood.dev</span>
<span>Made with &#10084;&#65039; using <a target=_blank href=https://github.com/gokarna-theme/gokarna-hugo>Gokarna</a></span></footer></body></html>