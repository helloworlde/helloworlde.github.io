<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D}</style><title>Clash ä½¿ç”¨ Docker éƒ¨ç½²</title>
<meta name=description content="ä½¿ç”¨ Clash Premium ç‰ˆæœ¬è¯·å‚è€ƒ ä½¿ç”¨ Docker éƒ¨ç½² Clash Premium
åœ¨ä¸€äº›åœºæ™¯ä¸‹æ— æ³•ä½¿ç”¨ Clash å®¢æˆ·ç«¯è¿›è¡Œä»£ç†ï¼Œä¹Ÿæ— æ³•ä½¿ç”¨è½¯è·¯ç”±ï¼Œè¿™æ—¶å€™å¯ä»¥ç”±ä¸€å°æœåŠ¡å™¨è¿è¡Œ Clashï¼Œä½œä¸ºå…¶ä»–å®¢æˆ·ç«¯çš„ä»£ç†ï¼›åŒæ—¶ Clash æ”¯æŒä»¥ Docker å®¹å™¨çš„æ–¹å¼è¿è¡Œï¼Œæ–¹ä¾¿éƒ¨ç½²å’Œè¿ç»´
è®¢é˜…æ ¼å¼è½¬æ¢ æœºåœº â€¦"><meta name=keywords content='blog,hugo,Clash,Docker,HomeLab'><meta property="og:url" content="https://blog.hellowood.dev/posts/clash-%E4%BD%BF%E7%94%A8-docker-%E9%83%A8%E7%BD%B2/"><meta property="og:type" content="website"><meta property="og:title" content="Clash ä½¿ç”¨ Docker éƒ¨ç½²"><meta property="og:description" content="ä½¿ç”¨ Clash Premium ç‰ˆæœ¬è¯·å‚è€ƒ ä½¿ç”¨ Docker éƒ¨ç½² Clash Premium
åœ¨ä¸€äº›åœºæ™¯ä¸‹æ— æ³•ä½¿ç”¨ Clash å®¢æˆ·ç«¯è¿›è¡Œä»£ç†ï¼Œä¹Ÿæ— æ³•ä½¿ç”¨è½¯è·¯ç”±ï¼Œè¿™æ—¶å€™å¯ä»¥ç”±ä¸€å°æœåŠ¡å™¨è¿è¡Œ Clashï¼Œä½œä¸ºå…¶ä»–å®¢æˆ·ç«¯çš„ä»£ç†ï¼›åŒæ—¶ Clash æ”¯æŒä»¥ Docker å®¹å™¨çš„æ–¹å¼è¿è¡Œï¼Œæ–¹ä¾¿éƒ¨ç½²å’Œè¿ç»´
è®¢é˜…æ ¼å¼è½¬æ¢ æœºåœº â€¦"><meta property="og:image" content="https://blog.hellowood.dev/images/avatar.webp"><meta property="og:image:secure_url" content="https://blog.hellowood.dev/images/avatar.webp"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Clash ä½¿ç”¨ Docker éƒ¨ç½²"><meta name=twitter:description content="ä½¿ç”¨ Clash Premium ç‰ˆæœ¬è¯·å‚è€ƒ ä½¿ç”¨ Docker éƒ¨ç½² Clash Premium
åœ¨ä¸€äº›åœºæ™¯ä¸‹æ— æ³•ä½¿ç”¨ Clash å®¢æˆ·ç«¯è¿›è¡Œä»£ç†ï¼Œä¹Ÿæ— æ³•ä½¿ç”¨è½¯è·¯ç”±ï¼Œè¿™æ—¶å€™å¯ä»¥ç”±ä¸€å°æœåŠ¡å™¨è¿è¡Œ Clashï¼Œä½œä¸ºå…¶ä»–å®¢æˆ·ç«¯çš„ä»£ç†ï¼›åŒæ—¶ Clash æ”¯æŒä»¥ Docker å®¹å™¨çš„æ–¹å¼è¿è¡Œï¼Œæ–¹ä¾¿éƒ¨ç½²å’Œè¿ç»´
è®¢é˜…æ ¼å¼è½¬æ¢ æœºåœº â€¦"><meta property="twitter:domain" content="https://blog.hellowood.dev/posts/clash-%E4%BD%BF%E7%94%A8-docker-%E9%83%A8%E7%BD%B2/"><meta property="twitter:url" content="https://blog.hellowood.dev/posts/clash-%E4%BD%BF%E7%94%A8-docker-%E9%83%A8%E7%BD%B2/"><meta name=twitter:image content="https://blog.hellowood.dev/images/avatar.webp"><link rel=canonical href=https://blog.hellowood.dev/posts/clash-%E4%BD%BF%E7%94%A8-docker-%E9%83%A8%E7%BD%B2/><link rel=stylesheet type=text/css href=/css/normalize.min.css media=print><link rel=stylesheet type=text/css href=/css/main.min.css><link id=dark-theme rel=stylesheet href=/css/dark.min.css><script src=/js/bundle.min.9a920d7dabdbad8363b6a0a94e29a9dfebdb7ee64cfcb193a0145e512ef2bdab.js integrity="sha256-mpINfavbrYNjtqCpTimp3+vbfuZM/LGToBReUS7yvas="></script><script defer src=https://umami.hellowood.dev/script.js data-website-id=7a9034de-0ce7-4756-942a-829e6cd22301></script><script defer src=https://cloud.umami.is/script.js data-website-id=73ff1c8c-9938-43cf-81af-e77e26b0cca3></script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "b2e481d136dc428c8c96c8673e2a04cf"}'></script><meta name=google-adsense-account content="ca-pub-3401351766168985"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3401351766168985" crossorigin=anonymous></script><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","jtbhx98g62")</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-3MSGPYTHPZ"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3MSGPYTHPZ")</script></head><body><script>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=https://blog.hellowood.dev/><img src=/images/avatar.webp alt=avatar></a></div><div class=nav-title><a class=nav-brand href=https://blog.hellowood.dev/>HelloWood</a></div><div class=nav-links><div class=nav-link><a href=https://blog.hellowood.dev/><span data-feather=home></span> Home</a></div><div class=nav-link><a href=https://blog.hellowood.dev/posts/><span data-feather=book></span> Posts</a></div><div class=nav-link><a href=https://blog.hellowood.dev/tags/><span data-feather=tag></span> Tags</a></div><div class=nav-link><a href=https://github.com/helloworlde><span data-feather=github></span></a></div><div class=nav-link><a href=https://umami.hellowood.dev/share/lab/Blog><span data-feather=pie-chart></span></a></div><div class=nav-link><a href=https://blog.hellowood.dev/index.xml><span data-feather=rss></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target"></span>
<a><span class=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span class="sr-only hamburger-menu-toggle-screen-reader-target">menu</span>
<a><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=https://blog.hellowood.dev/><span data-feather=home></span> Home</a></li><li class=nav-item><a href=https://blog.hellowood.dev/posts/><span data-feather=book></span> Posts</a></li><li class=nav-item><a href=https://blog.hellowood.dev/tags/><span data-feather=tag></span> Tags</a></li><li class=nav-item><a href=https://github.com/helloworlde><span data-feather=github></span></a></li><li class=nav-item><a href=https://umami.hellowood.dev/share/lab/Blog><span data-feather=pie-chart></span></a></li><li class=nav-item><a href=https://blog.hellowood.dev/index.xml><span data-feather=rss></span></a></li><li class="nav-item dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a><span class=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>Clash ä½¿ç”¨ Docker éƒ¨ç½²</h1><small role=doc-subtitle></small><p class=post-date>2022-10-10</p><ul class=post-tags><li class=post-tag><a href=https://blog.hellowood.dev/tags/clash>Clash</a></li><li class=post-tag><a href=https://blog.hellowood.dev/tags/docker>Docker</a></li><li class=post-tag><a href=https://blog.hellowood.dev/tags/homelab>HomeLab</a></li></ul></div><div class=post-content><p>ä½¿ç”¨ Clash Premium ç‰ˆæœ¬è¯·å‚è€ƒ <a href=https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8docker%E9%83%A8%E7%BD%B2clash-premium/>ä½¿ç”¨ Docker éƒ¨ç½² Clash Premium</a></p><p>åœ¨ä¸€äº›åœºæ™¯ä¸‹æ— æ³•ä½¿ç”¨ Clash å®¢æˆ·ç«¯è¿›è¡Œä»£ç†ï¼Œä¹Ÿæ— æ³•ä½¿ç”¨è½¯è·¯ç”±ï¼Œè¿™æ—¶å€™å¯ä»¥ç”±ä¸€å°æœåŠ¡å™¨è¿è¡Œ Clashï¼Œä½œä¸ºå…¶ä»–å®¢æˆ·ç«¯çš„ä»£ç†ï¼›åŒæ—¶ Clash æ”¯æŒä»¥ Docker å®¹å™¨çš„æ–¹å¼è¿è¡Œï¼Œæ–¹ä¾¿éƒ¨ç½²å’Œè¿ç»´</p><h2 id=è®¢é˜…æ ¼å¼è½¬æ¢>è®¢é˜…æ ¼å¼è½¬æ¢</h2><p>æœºåœºæä¾›çš„è®¢é˜…å¯èƒ½æ— æ³•è¢« Clash ç›´æ¥ä½¿ç”¨ï¼Œæˆ–è€…åˆ†æµé…ç½®ä¸åˆç†ï¼Œéœ€è¦è½¬æ¢æ ¼å¼ï¼›å¯ä»¥ä½¿ç”¨åœ¨çº¿çš„è®¢é˜…è½¬æ¢å·¥å…·ï¼Œå¦‚ <a href=https://acl4ssr-sub.github.io/>https://acl4ssr-sub.github.io/</a>ç­‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¼€æºçš„æœåŠ¡è‡ªè¡Œæ­å»ºï¼›</p><p>ä¸ºäº†å®‰å…¨å’Œéšç§ï¼Œå¯ä»¥åŸºäº <a href=https://github.com/CareyWang/sub-web>https://github.com/CareyWang/sub-web</a> å’Œ <a href=https://github.com/tindy2013/subconverter>https://github.com/tindy2013/subconverter</a> æœåŠ¡æ­å»ºï¼Œåˆ†åˆ«æ˜¯å‰ç«¯å’Œåç«¯æœåŠ¡</p><ul><li>docker-compose.yaml</li></ul><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#e06c75>version</span>: <span style=color:#63c381>&#34;3&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e06c75>services</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>subweb</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>image</span>: <span style=color:#98c379>careywong/subweb</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>container_name</span>: <span style=color:#98c379>subweb</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>hostname</span>: <span style=color:#98c379>subweb</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>restart</span>: <span style=color:#98c379>unless-stopped</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#d19a66>18080</span>:<span style=color:#d19a66>80</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>environment</span>:
</span></span><span style=display:flex><span>      - <span style=color:#98c379>TZ=Asia/Shanghai</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>subconverter</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>image</span>: <span style=color:#98c379>tindy2013/subconverter</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>container_name</span>: <span style=color:#98c379>subconverter</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>hostname</span>: <span style=color:#98c379>subconverter</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>restart</span>: <span style=color:#98c379>unless-stopped</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#d19a66>25500</span>:<span style=color:#d19a66>25500</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>environment</span>:
</span></span><span style=display:flex><span>      - <span style=color:#98c379>TZ=Asia/Shanghai</span>
</span></span></code></pre></div><p>éƒ¨ç½²å®Œæˆåï¼Œé€‰æ‹©è¿›é˜¶æ¨¡å¼ï¼Œå¡«å†™åç«¯åœ°å€ä¸º subconverter å®¹å™¨çš„åœ°å€ï¼›é€‰æ‹©è¿œç¨‹é…ç½®ï¼ˆæ¨è Ytoo/NyanCATï¼Œé…ç½®æ›´å…¨é¢ï¼‰ï¼Œç„¶åå¡«å…¥è®¢é˜…é“¾æ¥ç”Ÿæˆå³å¯å¾—åˆ°æ–°çš„è®¢é˜…é“¾æ¥</p><p><img src=https://img.hellowood.dev/picture/homelab-clash-proxy-config-convert-to-clash.png alt=homelab-clash-proxy-config-convert-to-clash.png></p><ul><li>è‡ªå®šä¹‰é…ç½®</li></ul><p>å¦‚æœæœ‰è‡ªå®šä¹‰é…ç½®ï¼Œå¯ä»¥æŒ‡å®šè¿œç¨‹é…ç½®ï¼Œå‚è€ƒ<a href=https://github.com/tindy2013/subconverter/blob/master/README-cn.md#%E5%A4%96%E9%83%A8%E9%85%8D%E7%BD%AE>å¤–éƒ¨é…ç½®</a>ï¼ŒæŒ‡å®š <code>clash_rule_base</code> é…ç½®æ¨¡æ¿ï¼›ä¸è¿‡è¯¥æ–¹å¼æ¯”è¾ƒéº»çƒ¦ï¼Œè‡ªå·±ä½¿ç”¨å¯ä»¥ç›´æ¥é€šè¿‡æ›´æ”¹ subconverter é»˜è®¤é…ç½®çš„æ–¹å¼å®ç°ï¼›</p><p>subconverter é»˜è®¤çš„é…ç½®æ˜¯ <code>/base/pref.toml</code>æ–‡ä»¶ï¼Œå…¶ä¸­æŒ‡å®šäº† clash çš„é…ç½®æ–‡ä»¶æ¨¡æ¿ä¸º <code>clash_rule_base = "base/all_base.tpl"</code>ï¼Œæ‰€ä»¥ä¿®æ”¹ <code>base/all_base.tpl</code> æ–‡ä»¶å³å¯</p><p>ä¸ºäº†ç›‘æ§ Clash Premiumï¼Œéœ€è¦å¼€å¯ tracingï¼Œæ‰€ä»¥å‘é…ç½®æ–‡ä»¶ <code>base/all_base.tpl</code> ä¸­ç›´æ¥åŠ å…¥ç›¸å…³é…ç½®ï¼š</p><pre tabindex=0><code>{% if request.target == &#34;clash&#34; or request.target == &#34;clashr&#34; %}
# ä»¥ä¸‹æ˜¯æ–°å¢å†…å®¹
profile:
  tracing: true

# ...
{% endif %}
</code></pre><p>éšåï¼Œå°†è¯¥é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°å®¿ä¸»æœºä¸Šï¼Œé€šè¿‡æŒ‚è½½æ–‡ä»¶çš„æ–¹å¼æ·»åŠ åˆ° subconverter å®¹å™¨ï¼Œé¿å…å®¹å™¨é‡å¯åä¸¢å¤±</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#e06c75>services</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>subconverter</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>image</span>: <span style=color:#98c379>tindy2013/subconverter</span>
</span></span><span style=display:flex><span>    <span style=color:#8a93a5;font-style:italic># ...</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>volumes</span>:
</span></span><span style=display:flex><span>      - <span style=color:#98c379>./config/all_base.tpl://base/base/all_base.tpl</span>
</span></span></code></pre></div><h2 id=é…ç½®æ–‡ä»¶>é…ç½®æ–‡ä»¶</h2><p>åœ¨è®¢é˜…æ ¼å¼è½¬æ¢å®Œæˆåï¼Œå°±å¯ä»¥é€šè¿‡ç”Ÿæˆçš„è®¢é˜…é“¾æ¥è·å–é…ç½®ï¼Œè¿™ä¸ªé…ç½®å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›å¦‚æœä¸æ»¡è¶³éœ€æ±‚å¯ä»¥åŸºäºè¯¥é…ç½®æ‰‹åŠ¨ä¿®æ”¹ï¼Œé…ç½®å†…å®¹æ ¼å¼å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8a93a5;font-style:italic># å¼€å¯ç›‘æ§</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>profile</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>tracing</span>: <span style=color:#b756ff;font-weight:700>true</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>port</span>: <span style=color:#d19a66>7890</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>socks-port</span>: <span style=color:#d19a66>7891</span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>#è½¬å‘ç«¯å£ä¸€å®šè¦é…ç½®</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>redir-port</span>: <span style=color:#d19a66>7892</span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>#å…è®¸æ¥ç®¡å±€åŸŸç½‘æµé‡</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>allow-lan</span>: <span style=color:#b756ff;font-weight:700>true</span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>#é»˜è®¤ä»£ç†æ¨¡å¼</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>mode</span>: <span style=color:#98c379>Rule</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>log-level</span>: <span style=color:#98c379>debug</span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>#æ¥å£æ§åˆ¶ç«¯å£æ˜¯9090</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>external-controller</span>: :<span style=color:#d19a66>9090</span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>#å¦‚æœæœåŠ¡å™¨å¯¹å…¬ç½‘å¼€æ”¾å¯ä»¥è®¾ç½®å¯†ç </span>
</span></span><span style=display:flex><span><span style=color:#e06c75>secret</span>: <span style=color:#63c381>&#34;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>#é…ç½®ç”±clashæ¥ç®¡çš„dnsè§£æ</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>dns</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>enable</span>: <span style=color:#b756ff;font-weight:700>true</span>
</span></span><span style=display:flex><span>  <span style=color:#8a93a5;font-style:italic>#ä¸»è¦ç›‘å¬å®šå‘è½¬å‘æ¥çš„æ•°æ®ï¼Œåç»­ä¼šåœ¨è·¯ç”±è¡¨é‡Œé…ç½®è½¬å‘ç«¯å£ä¸º1053</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>listen</span>: <span style=color:#d19a66>0.0.0.0</span>:<span style=color:#d19a66>1053</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>enhanced-mode</span>: <span style=color:#98c379>fake-ip</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>nameserver</span>:
</span></span><span style=display:flex><span>    - <span style=color:#63c381>&#34;114.114.114.114&#34;</span>
</span></span><span style=display:flex><span>    - <span style=color:#63c381>&#34;223.5.5.5&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>fallback</span>:
</span></span><span style=display:flex><span>    - <span style=color:#63c381>&#34;tls://1.1.1.1:853&#34;</span>
</span></span><span style=display:flex><span>    - <span style=color:#63c381>&#34;tcp://1.1.1.1:53&#34;</span>
</span></span><span style=display:flex><span>    - <span style=color:#63c381>&#34;tcp://208.67.222.222:443&#34;</span>
</span></span><span style=display:flex><span>    - <span style=color:#63c381>&#34;tls://dns.google&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic># ä»£ç†èŠ‚ç‚¹</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>proxies</span>:
</span></span><span style=display:flex><span>  - {
</span></span><span style=display:flex><span>      <span style=color:#e06c75>name</span>: <span style=color:#98c379>node1,</span>
</span></span><span style=display:flex><span>      <span style=color:#e06c75>server</span>: <span style=color:#d19a66>0.0.0.0</span>,
</span></span><span style=display:flex><span>      <span style=color:#e06c75>port</span>: <span style=color:#d19a66>5601</span>,
</span></span><span style=display:flex><span>      <span style=color:#e06c75>type</span>: <span style=color:#98c379>ss,</span>
</span></span><span style=display:flex><span>      <span style=color:#e06c75>cipher</span>: <span style=color:#98c379>aes-256-gcm,</span>
</span></span><span style=display:flex><span>      <span style=color:#e06c75>password</span>: <span style=color:#d19a66>1234</span>,
</span></span><span style=display:flex><span>      <span style=color:#e06c75>udp</span>: <span style=color:#b756ff;font-weight:700>true</span>,
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic># ä»£ç†ç»„</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>proxy-groups</span>:
</span></span><span style=display:flex><span>  - {
</span></span><span style=display:flex><span>      <span style=color:#e06c75>name</span>: <span style=color:#63c381>&#34;ğŸš€ èŠ‚ç‚¹é€‰æ‹©&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e06c75>type</span>: <span style=color:#98c379>select,</span>
</span></span><span style=display:flex><span>      <span style=color:#e06c75>proxies</span>: [<span style=color:#63c381>&#34;â™»ï¸ è‡ªåŠ¨é€‰æ‹©&#34;</span>, <span style=color:#63c381>&#34;ğŸš€ æ‰‹åŠ¨åˆ‡æ¢&#34;</span>, <span style=color:#98c379>DIRECT],</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic># åˆ†æµè§„åˆ™</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>rules</span>:
</span></span><span style=display:flex><span>  - <span style=color:#63c381>&#34;DOMAIN-SUFFIX,local,ğŸ¯ å…¨çƒç›´è¿&#34;</span>
</span></span><span style=display:flex><span>  - <span style=color:#63c381>&#34;DOMAIN-SUFFIX,localhost,ğŸ¯ å…¨çƒç›´è¿&#34;</span>
</span></span><span style=display:flex><span>  - <span style=color:#63c381>&#34;IP-CIDR,10.0.0.0/8,ğŸ¯ å…¨çƒç›´è¿,no-resolve&#34;</span>
</span></span></code></pre></div><h2 id=éƒ¨ç½²>éƒ¨ç½²</h2><p>Clash æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜¯ clashï¼Œä¸€ä¸ªæ˜¯ clash-premiumï¼ŒåŒºåˆ«åœ¨äº premium æ˜¯éå¼€æºçš„ï¼Œæ”¯æŒæ•°æ®ç»Ÿè®¡ï¼Œæ”¯æŒ fake-ip æ¨¡å¼ï¼ˆèƒ½å¤Ÿå‡å°‘ä¸€æ¬¡ DNS æŸ¥è¯¢ï¼‰ï¼Œæ”¯æŒè®¢é˜…</p><p>yacd æ˜¯ä¸€ä¸ªå¼€æºçš„ Clash æ§åˆ¶é¢æ¿ï¼ŒåŠŸèƒ½è¾ƒä¸°å¯Œ</p><ul><li>Docker å‘½ä»¤è¿è¡Œ</li></ul><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run --name clash <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>	 -d <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>	 -v config.yaml:/root/.config/clash/config.yaml <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>	 -p 7890:7890 <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>	 -p 7891:7891 <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>	 -p 9090:9090 <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>	 dreamacro/clash-premium
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>docker run --name yacd <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>	-d  <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>	-p 80:80 <span style=color:#d26464;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#d26464;font-weight:700></span>	ghcr.io/haishanh/yacd:master
</span></span></code></pre></div><p><img src=https://img.hellowood.dev/picture/homelab-clash-proxy-yacd-ui.png alt=homelab-clash-proxy-yacd-ui.png></p><ul><li>docker-compose æ–¹å¼è¿è¡Œ</li></ul><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#e06c75>version</span>: <span style=color:#63c381>&#34;3&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e06c75>services</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>clash</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>image</span>: <span style=color:#98c379>dreamacro/clash-premium</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>container_name</span>: <span style=color:#98c379>clash</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>hostname</span>: <span style=color:#98c379>clash</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>restart</span>: <span style=color:#98c379>unless-stopped</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#d19a66>7890</span>:<span style=color:#d19a66>7890</span>
</span></span><span style=display:flex><span>      - <span style=color:#d19a66>7891</span>:<span style=color:#d19a66>7891</span>
</span></span><span style=display:flex><span>      - <span style=color:#d19a66>9090</span>:<span style=color:#d19a66>9090</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>volumes</span>:
</span></span><span style=display:flex><span>      - <span style=color:#98c379>./config.yaml:/root/.config/clash/config.yaml</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>environment</span>:
</span></span><span style=display:flex><span>      - <span style=color:#98c379>TZ=Asia/Shanghai</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>yacd</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>image</span>: <span style=color:#98c379>ghcr.io/haishanh/yacd:master</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>container_name</span>: <span style=color:#98c379>yacd</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>hostname</span>: <span style=color:#98c379>yacd</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>restart</span>: <span style=color:#98c379>unless-stopped</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#d19a66>80</span>:<span style=color:#d19a66>80</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>environment</span>:
</span></span><span style=display:flex><span>      - <span style=color:#98c379>TZ=Asia/Shanghai</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>depends_on</span>:
</span></span><span style=display:flex><span>      - <span style=color:#98c379>clash</span>
</span></span></code></pre></div><h2 id=å®¢æˆ·ç«¯ä½¿ç”¨>å®¢æˆ·ç«¯ä½¿ç”¨</h2><p>é€šè¿‡å®¹å™¨æ–¹å¼éƒ¨ç½²çš„ Clash å¯ä»¥ä»¥ä»£ç†çš„æ–¹å¼ä½¿ç”¨ï¼Œåœ¨æ‰‹æœº/ç”µè„‘æˆ–è€…åº”ç”¨ç¨‹åºä¸­é…ç½®ä»£ç†å³å¯</p><h3 id=å‘½ä»¤è¡Œ>å‘½ä»¤è¡Œ</h3><p>å¼€å¯ä»£ç†</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ef8383>export</span> <span style=color:#dcaeea>https_proxy</span><span style=color:#c7bf54>=</span>http://192.168.2.2:7890
</span></span><span style=display:flex><span><span style=color:#ef8383>export</span> <span style=color:#dcaeea>http_proxy</span><span style=color:#c7bf54>=</span>http://192.168.2.2:7890
</span></span><span style=display:flex><span><span style=color:#ef8383>export</span> <span style=color:#dcaeea>all_proxy</span><span style=color:#c7bf54>=</span>socks5://192.168.2.2:7891
</span></span></code></pre></div><p>å…³é—­ä»£ç†</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ef8383>unset</span> http_proxy
</span></span><span style=display:flex><span><span style=color:#ef8383>unset</span> https_proxy
</span></span><span style=display:flex><span><span style=color:#ef8383>unset</span> all_proxy
</span></span></code></pre></div><h3 id=ç³»ç»Ÿ>ç³»ç»Ÿ</h3><p>åœ¨ç½‘ç»œ-ä»£ç†ä¸­æ·»åŠ é…ç½®ï¼ŒæŒ‡å®š HTTP/HTTPS/SOCKS ä»£ç†ä¸ºé…ç½®çš„ä»£ç†å³å¯</p><p><img src=https://img.hellowood.dev/picture/homelab-clash-proxy-config-macos.png alt=homelab-clash-proxy-config-macos.png></p></div><div class=prev-next></div><svg id="btt-button" class="arrow-logo" height="1em" viewBox="0 0 384 512" onclick="scrollToTop()" title="Go to top"><path d="M177 159.7l136 136c9.4 9.4 9.4 24.6.0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9.0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9.0L7 329.7c-9.4-9.4-9.4-24.6.0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"/></svg>
<script>let backToTopButton=document.getElementById("btt-button");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?backToTopButton.style.display="block":backToTopButton.style.display="none"}function scrollToTop(){window.scrollTo(0,0)}</script><div id=comments><script src=https://utteranc.es/client.js repo=helloworlde/helloworlde.github.io issue-term=title theme=github-light crossorigin=anonymous async></script></div></div></main><footer class=footer><span>&copy; 2024 hellowood.dev</span>
<span>Made with &#10084;&#65039; using <a target=_blank href=https://github.com/526avijitgupta/gokarna>Gokarna</a></span></footer></body></html>