<!doctype html><html lang=en><head><meta name=viewport content="width=device-width,initial-scale=1"><title>树莓派 4b 使用 CSI 摄像头</title>
<meta charset=utf-8><meta name=description content="Ladder@树莓派 4b 使用 CSI 摄像头 树莓派 4b 支持通过 USB 或者摄像头 CSI 接口连接摄像头，因此可以使用树莓派 4b 作为监控
基于安装了 Ubuntu Server 22.04 LTS 的树莓派 4b 进行测试
带有红外补光灯的摄像头功率大概5-7w左右，因此使用树莓派 4b 连接时需要有 5V3A 的电源，否则当开启摄像头后树莓派会不断重启
接入摄像头 连接摄像头 如图所示，通过排线连接摄像头和树莓派（图片来自 Getting started with the Camera Module）
开启摄像头 开启摄像头需要先安装 raspi-config 软件
apt-get install -y raspi-config 然后运行 raspi-config，选择用户 pi 进行配置；
接着选择第三个接口配置
然后选择第一个，配置摄像头，选择开启即可；开启完成后，需要关闭树莓派，连接摄像头并重新开机
检查摄像头信息 检查连接状态 重启后检查设备连接状态：
vcgencmd get_camera supported=1 detected=1, libcamera interfaces=0 返回信息提示检查到了一个摄像头并且支持该摄像头
查看摄像头信息 查看摄像头信息需要使用 v4l-utils
apt-get install -y v4l-utils 通过 v4l-utils 列出设备"><meta name=author content="HelloWood"><link rel=canonical href=https://blog.hellowood.dev/posts/%E6%A0%91%E8%8E%93%E6%B4%BE-4b-%E4%BD%BF%E7%94%A8-csi-%E6%91%84%E5%83%8F%E5%A4%B4/><meta name=google-site-verification content="G-3MSGPYTHPZ"><link rel=alternate type=application/rss+xml href=https://blog.hellowood.dev//index.xml title=HelloWood><script async src="https://www.googletagmanager.com/gtag/js?id=G-3MSGPYTHPZ"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3MSGPYTHPZ",{anonymize_ip:!1})}</script><script async defer data-website-id=7a9034de-0ce7-4756-942a-829e6cd22301 src=https://umami.hellowood.dev/script.js></script><script defer data-cf-beacon='{"token": "b2e481d136dc428c8c96c8673e2a04cf"}' src=https://static.cloudflareinsights.com/beacon.min.js></script><meta property="og:title" content="树莓派 4b 使用 CSI 摄像头"><meta property="og:description" content="树莓派 4b 使用 CSI 摄像头 树莓派 4b 支持通过 USB 或者摄像头 CSI 接口连接摄像头，因此可以使用树莓派 4b 作为监控
基于安装了 Ubuntu Server 22.04 LTS 的树莓派 4b 进行测试
带有红外补光灯的摄像头功率大概5-7w左右，因此使用树莓派 4b 连接时需要有 5V3A 的电源，否则当开启摄像头后树莓派会不断重启
接入摄像头 连接摄像头 如图所示，通过排线连接摄像头和树莓派（图片来自 Getting started with the Camera Module）
开启摄像头 开启摄像头需要先安装 raspi-config 软件
apt-get install -y raspi-config 然后运行 raspi-config，选择用户 pi 进行配置；
接着选择第三个接口配置
然后选择第一个，配置摄像头，选择开启即可；开启完成后，需要关闭树莓派，连接摄像头并重新开机
检查摄像头信息 检查连接状态 重启后检查设备连接状态：
vcgencmd get_camera supported=1 detected=1, libcamera interfaces=0 返回信息提示检查到了一个摄像头并且支持该摄像头
查看摄像头信息 查看摄像头信息需要使用 v4l-utils
apt-get install -y v4l-utils 通过 v4l-utils 列出设备"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.hellowood.dev/posts/%E6%A0%91%E8%8E%93%E6%B4%BE-4b-%E4%BD%BF%E7%94%A8-csi-%E6%91%84%E5%83%8F%E5%A4%B4/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-03-11T21:38:25+08:00"><meta property="article:modified_time" content="2023-03-11T21:38:25+08:00"><meta property="og:see_also" content="https://blog.hellowood.dev/posts/%E6%A0%91%E8%8E%93%E6%B4%BE-4b-%E4%BD%BF%E7%94%A8%E6%91%84%E5%83%8F%E5%A4%B4%E6%8E%A8%E9%80%81%E6%B5%81%E5%88%B0-rtmp-%E6%9C%8D%E5%8A%A1%E5%99%A8/"><meta name=twitter:card content="summary"><meta name=twitter:title content="树莓派 4b 使用 CSI 摄像头"><meta name=twitter:description content="树莓派 4b 使用 CSI 摄像头 树莓派 4b 支持通过 USB 或者摄像头 CSI 接口连接摄像头，因此可以使用树莓派 4b 作为监控
基于安装了 Ubuntu Server 22.04 LTS 的树莓派 4b 进行测试
带有红外补光灯的摄像头功率大概5-7w左右，因此使用树莓派 4b 连接时需要有 5V3A 的电源，否则当开启摄像头后树莓派会不断重启
接入摄像头 连接摄像头 如图所示，通过排线连接摄像头和树莓派（图片来自 Getting started with the Camera Module）
开启摄像头 开启摄像头需要先安装 raspi-config 软件
apt-get install -y raspi-config 然后运行 raspi-config，选择用户 pi 进行配置；
接着选择第三个接口配置
然后选择第一个，配置摄像头，选择开启即可；开启完成后，需要关闭树莓派，连接摄像头并重新开机
检查摄像头信息 检查连接状态 重启后检查设备连接状态：
vcgencmd get_camera supported=1 detected=1, libcamera interfaces=0 返回信息提示检查到了一个摄像头并且支持该摄像头
查看摄像头信息 查看摄像头信息需要使用 v4l-utils
apt-get install -y v4l-utils 通过 v4l-utils 列出设备"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.hellowood.dev/posts/"},{"@type":"ListItem","position":2,"name":"树莓派 4b 使用 CSI 摄像头","item":"https://blog.hellowood.dev/posts/%E6%A0%91%E8%8E%93%E6%B4%BE-4b-%E4%BD%BF%E7%94%A8-csi-%E6%91%84%E5%83%8F%E5%A4%B4/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"树莓派 4b 使用 CSI 摄像头","name":"树莓派 4b 使用 CSI 摄像头","description":"树莓派 4b 使用 CSI 摄像头 树莓派 4b 支持通过 USB 或者摄像头 CSI 接口连接摄像头，因此可以使用树莓派 4b 作为监控\n基于安装了 Ubuntu Server 22.04 LTS 的树莓派 4b 进行测试\n带有红外补光灯的摄像头功率大概5-7w左右，因此使用树莓派 4b 连接时需要有 5V3A 的电源，否则当开启摄像头后树莓派会不断重启\n接入摄像头 连接摄像头 如图所示，通过排线连接摄像头和树莓派（图片来自 Getting started with the Camera Module）\n开启摄像头 开启摄像头需要先安装 raspi-config 软件\napt-get install -y raspi-config 然后运行 raspi-config，选择用户 pi 进行配置；\n接着选择第三个接口配置\n然后选择第一个，配置摄像头，选择开启即可；开启完成后，需要关闭树莓派，连接摄像头并重新开机\n检查摄像头信息 检查连接状态 重启后检查设备连接状态：\nvcgencmd get_camera supported=1 detected=1, libcamera interfaces=0 返回信息提示检查到了一个摄像头并且支持该摄像头\n查看摄像头信息 查看摄像头信息需要使用 v4l-utils\napt-get install -y v4l-utils 通过 v4l-utils 列出设备","keywords":["RaspberryPi","HomeLab"],"articleBody":"树莓派 4b 使用 CSI 摄像头 树莓派 4b 支持通过 USB 或者摄像头 CSI 接口连接摄像头，因此可以使用树莓派 4b 作为监控\n基于安装了 Ubuntu Server 22.04 LTS 的树莓派 4b 进行测试\n带有红外补光灯的摄像头功率大概5-7w左右，因此使用树莓派 4b 连接时需要有 5V3A 的电源，否则当开启摄像头后树莓派会不断重启\n接入摄像头 连接摄像头 如图所示，通过排线连接摄像头和树莓派（图片来自 Getting started with the Camera Module）\n开启摄像头 开启摄像头需要先安装 raspi-config 软件\napt-get install -y raspi-config 然后运行 raspi-config，选择用户 pi 进行配置；\n接着选择第三个接口配置\n然后选择第一个，配置摄像头，选择开启即可；开启完成后，需要关闭树莓派，连接摄像头并重新开机\n检查摄像头信息 检查连接状态 重启后检查设备连接状态：\nvcgencmd get_camera supported=1 detected=1, libcamera interfaces=0 返回信息提示检查到了一个摄像头并且支持该摄像头\n查看摄像头信息 查看摄像头信息需要使用 v4l-utils\napt-get install -y v4l-utils 通过 v4l-utils 列出设备\nv4l2-ctl --list-devices bcm2835-codec-decode (platform:bcm2835-codec): /dev/video10 /dev/video11 /dev/video12 /dev/video18 /dev/video31 /dev/media1 bcm2835-isp (platform:bcm2835-isp): /dev/video13 /dev/video14 /dev/video15 /dev/video16 /dev/video20 /dev/video21 /dev/video22 /dev/video23 /dev/media0 /dev/media2 mmal service 16.1 (platform:bcm2835-v4l2-0): /dev/video0 其中的 /dev/video0 就是通过排线连接的摄像头\n使用摄像头 因为 raspstill 在 Ubuntu 下并不能直接安装，通过源码编译又需要很多的依赖，并且因为树莓派的性能限制，会比较复杂；因此通过 ffmpeg 来测试\n安装 ffmpeg apt-get install -y ffmpeg 检查 如果树莓派有连接显示器，可以通过 ffplay 进行查看；如果没有连接，则可以通过 ffmpeg 拍照查看\n拍照 ffmpeg -i /dev/video0 -frames:v 1 -f image2 output.jpg 拍照之后可以通过 ftp 或者 scp 等方式将文件复制到本地；也可以直接通过 python 启动一个 HTTP 服务：python3 -m http.server，然后访问 8000 端口下载文件\n录制视频 录制10s的视频，并输出为 mp4 格式\nffmpeg -f v4l2 -r 30 -s 640x480 -i /dev/video0 -c:v libx264 -preset ultrafast -tune zerolatency -t 10 output.mp4 查看视频 这里需要有显示器连接，否则无法预览\nffplay /dev/video0 参考文档 Getting started with the Camera Module ","wordCount":"175","inLanguage":"en","datePublished":"2023-03-11T21:38:25+08:00","dateModified":"2023-03-11T21:38:25+08:00","author":{"@type":"Person","name":"HelloWood"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.hellowood.dev/posts/%E6%A0%91%E8%8E%93%E6%B4%BE-4b-%E4%BD%BF%E7%94%A8-csi-%E6%91%84%E5%83%8F%E5%A4%B4/"},"publisher":{"@type":"Organization","name":"HelloWood","logo":{"@type":"ImageObject","url":"https://blog.hellowood.dev/favicon.ico"}}}</script><link rel=icon href=/images/avatar.png sizes=16x16><link rel=apple-touch-icon href=/images/avatar.png><link rel=manifest href=/images/avatar.png><link rel=stylesheet href=https://cdn.staticfile.org/lxgw-wenkai-webfont/1.6.0/style.css><link rel=stylesheet href=/css/main.min.ff1bc260fafbfb440e10194d7d06d57eb5e85eed11d12d06255581262664204e.css integrity="sha256-/xvCYPr7+0QOEBlNfQbVfrXoXu0R0S0GJVWBJiZkIE4=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css><script src=/js/highlight.min.min.c607d6febd16934a82eb61d3a896ed9d869f54373cc63ce95864ed5488fe3128.js></script><script>hljs.highlightAll()</script><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><meta name=google-adsense-account content="ca-pub-3401351766168985"><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","jtbhx98g62")</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3401351766168985" crossorigin=anonymous></script></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-brand data-umami-event=navigation-brand href=/>HOME
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><span></span><span></span><span></span></label><ul class=navigation-list id=navigation-list><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Blog href=/posts>Blog</a></li><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Tags href=/tags>Tags</a></li><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Archive href=/archives>Archive</a></li><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Dashboard href=https://umami.hellowood.dev/share/lab/Blog>Dashboard</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class="navigation-item navigation-social"><a class=navigation-link data-umami-event=navigation-social href=https://github.com/helloworlde><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li class="navigation-item navigation-dark"><button id=mode type=button data-umami-event=toggle-theme aria-label="toggle user light or dark theme">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span>
<span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></li></ul></section></nav><div id=content><article class=blog-single><header class=blog-title><h1>树莓派 4b 使用 CSI 摄像头</h1></header><p><small>March 11, 2023&nbsp;· 175 words&nbsp;· One minute</small><p><div class=blog-toc><nav id=TableOfContents><ul><li><a href=#接入摄像头>接入摄像头</a><ul><li><a href=#连接摄像头>连接摄像头</a></li><li><a href=#开启摄像头>开启摄像头</a></li><li><a href=#检查摄像头信息>检查摄像头信息</a></li></ul></li><li><a href=#使用摄像头>使用摄像头</a><ul><li><a href=#安装-ffmpeg>安装 ffmpeg</a></li><li><a href=#检查>检查</a></li></ul></li><li><a href=#参考文档>参考文档</a></li></ul></nav></div><section class=blog-content><h1 id=树莓派-4b-使用-csi-摄像头>树莓派 4b 使用 CSI 摄像头</h1><p>树莓派 4b 支持通过 USB 或者摄像头 CSI 接口连接摄像头，因此可以使用树莓派 4b 作为监控</p><p>基于安装了 Ubuntu Server 22.04 LTS 的树莓派 4b 进行测试</p><p>带有红外补光灯的摄像头功率大概5-7w左右，因此使用树莓派 4b 连接时需要有 5V3A 的电源，否则当开启摄像头后树莓派会不断重启</p><h2 id=接入摄像头>接入摄像头</h2><h3 id=连接摄像头>连接摄像头</h3><p>如图所示，通过排线连接摄像头和树莓派（图片来自 <a href=https://projects.raspberrypi.org/en/projects/getting-started-with-picamera>Getting started with the Camera Module</a>）</p><p><img alt=raspberrypi-4b-camara-setup-connect.jpeg src=https://img.hellowood.dev/picture/raspberrypi-4b-camara-setup-connect.jpeg></p><h3 id=开启摄像头>开启摄像头</h3><p>开启摄像头需要先安装 <code>raspi-config</code> 软件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>apt-get install -y raspi-config
</span></span></code></pre></div><p>然后运行 <code>raspi-config</code>，选择用户 <code>pi</code> 进行配置；</p><p><img alt=raspberrypi-4b-camara-setup-enable-user-pi-0.png src=https://img.hellowood.dev/picture/raspberrypi-4b-camara-setup-enable-user-pi-0.png></p><p>接着选择第三个接口配置</p><p><img alt=raspberrypi-4b-camara-setup-enable-interface-1.png src=https://img.hellowood.dev/picture/raspberrypi-4b-camara-setup-enable-interface-1.png></p><p>然后选择第一个，配置摄像头，选择开启即可；开启完成后，需要关闭树莓派，连接摄像头并重新开机</p><p><img alt=raspberrypi-4b-camara-setup-enable-camare-2.png src=https://img.hellowood.dev/picture/raspberrypi-4b-camara-setup-enable-camare-2.png></p><h3 id=检查摄像头信息>检查摄像头信息</h3><ul><li>检查连接状态</li></ul><p>重启后检查设备连接状态：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vcgencmd get_camera
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>supported<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> detected<span style=color:#f92672>=</span>1, libcamera interfaces<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span></code></pre></div><p>返回信息提示检查到了一个摄像头并且支持该摄像头</p><ul><li>查看摄像头信息</li></ul><p>查看摄像头信息需要使用 <code>v4l-utils</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>apt-get install -y v4l-utils
</span></span></code></pre></div><p>通过 <code>v4l-utils</code> 列出设备</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>v4l2-ctl --list-devices
</span></span><span style=display:flex><span>bcm2835-codec-decode <span style=color:#f92672>(</span>platform:bcm2835-codec<span style=color:#f92672>)</span>:
</span></span><span style=display:flex><span>        /dev/video10
</span></span><span style=display:flex><span>        /dev/video11
</span></span><span style=display:flex><span>        /dev/video12
</span></span><span style=display:flex><span>        /dev/video18
</span></span><span style=display:flex><span>        /dev/video31
</span></span><span style=display:flex><span>        /dev/media1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>bcm2835-isp <span style=color:#f92672>(</span>platform:bcm2835-isp<span style=color:#f92672>)</span>:
</span></span><span style=display:flex><span>        /dev/video13
</span></span><span style=display:flex><span>        /dev/video14
</span></span><span style=display:flex><span>        /dev/video15
</span></span><span style=display:flex><span>        /dev/video16
</span></span><span style=display:flex><span>        /dev/video20
</span></span><span style=display:flex><span>        /dev/video21
</span></span><span style=display:flex><span>        /dev/video22
</span></span><span style=display:flex><span>        /dev/video23
</span></span><span style=display:flex><span>        /dev/media0
</span></span><span style=display:flex><span>        /dev/media2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mmal service 16.1 <span style=color:#f92672>(</span>platform:bcm2835-v4l2-0<span style=color:#f92672>)</span>:
</span></span><span style=display:flex><span>        /dev/video0
</span></span></code></pre></div><p>其中的 <code>/dev/video0</code> 就是通过排线连接的摄像头</p><h2 id=使用摄像头>使用摄像头</h2><p>因为 <code>raspstill</code> 在 Ubuntu 下并不能直接安装，通过源码编译又需要很多的依赖，并且因为树莓派的性能限制，会比较复杂；因此通过 ffmpeg 来测试</p><h3 id=安装-ffmpeg>安装 ffmpeg</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>apt-get install -y ffmpeg
</span></span></code></pre></div><h3 id=检查>检查</h3><p>如果树莓派有连接显示器，可以通过 <code>ffplay</code> 进行查看；如果没有连接，则可以通过 <code>ffmpeg</code> 拍照查看</p><ul><li>拍照</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ffmpeg -i /dev/video0 -frames:v <span style=color:#ae81ff>1</span> -f image2 output.jpg
</span></span></code></pre></div><p>拍照之后可以通过 ftp 或者 scp 等方式将文件复制到本地；也可以直接通过 python 启动一个 HTTP 服务：<code>python3 -m http.server</code>，然后访问 8000 端口下载文件</p><ul><li>录制视频</li></ul><p>录制10s的视频，并输出为 mp4 格式</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ffmpeg -f v4l2 -r <span style=color:#ae81ff>30</span> -s 640x480 -i /dev/video0 -c:v libx264 -preset ultrafast -tune zerolatency -t <span style=color:#ae81ff>10</span> output.mp4
</span></span></code></pre></div><ul><li>查看视频</li></ul><p>这里需要有显示器连接，否则无法预览</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ffplay /dev/video0
</span></span></code></pre></div><h2 id=参考文档>参考文档</h2><ul><li><a href=https://projects.raspberrypi.org/en/projects/getting-started-with-picamera/0>Getting started with the Camera Module</a></li></ul></section><div class=paginator><a class=prev href=https://blog.hellowood.dev/posts/openwrt-%E5%9C%A8-pve-%E4%B8%AD%E4%BB%A5%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85/><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M9.94496 9C9.28897 9.61644 7.63215 10.997 6.04814 11.7966 5.98257 11.8297 5.98456 11.9753 6.05061 12.0063c1.00435.4716 2.8788 1.9201 3.89435 2.9937M6.44444 11.9667C8.86549 12.0608 14 12 16 11" stroke="currentcolor" stroke-linecap="round"/></svg>
<span>OpenWrt 在 PVE 中以虚拟机方式安装</span></a>
<a class=next href=https://blog.hellowood.dev/posts/%E6%A0%91%E8%8E%93%E6%B4%BE-4b-%E4%BD%BF%E7%94%A8%E6%91%84%E5%83%8F%E5%A4%B4%E6%8E%A8%E9%80%81%E6%B5%81%E5%88%B0-rtmp-%E6%9C%8D%E5%8A%A1%E5%99%A8/><span>树莓派 4b 使用摄像头推送流到 RTMP 服务器</span><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M12.055 9C12.711 9.61644 14.3679 10.997 15.9519 11.7966 16.0174 11.8297 16.0154 11.9753 15.9494 12.0063 14.945 12.4779 13.0706 13.9264 12.055 15m3.5006-3.0333C13.1345 12.0608 8 12 6 11" stroke="currentcolor" stroke-linecap="round"/></svg></a></div><div class=related-resources><h3>Related Resources</h3><nav><ul><li><a href=/posts/%E6%A0%91%E8%8E%93%E6%B4%BE-4b-%E4%BD%BF%E7%94%A8%E6%91%84%E5%83%8F%E5%A4%B4%E6%8E%A8%E9%80%81%E6%B5%81%E5%88%B0-rtmp-%E6%9C%8D%E5%8A%A1%E5%99%A8/>树莓派 4b 使用摄像头推送流到 RTMP 服务器</a></li></ul></nav></div></article></div><footer class=footer><p>&copy; 2024 <a href=https://blog.hellowood.dev/>HelloWood</a>
Powered by
<a href=https://gohugo.io/ rel=noopener target=_blank data-umami-event=to-hugo>Hugo️️</a>
<a href=https://github.com/guangzhengli/hugo-theme-ladder rel=noopener target=_blank data-umami-event=to-ladder>Ladder</a>
️</p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g data-umami-event=top-link><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.5376 22.7916C11.0152 22.7207 22.5795 21.1781 22.0978 10.4211 22.0536 9.43274 21.9303 8.53367 21.7387 7.71865M10.5376 22.7916C16.876 22.3728 20.0969 19.8899 21.5383 16.9142M10.5376 22.7916C9.7707 22.9055 8.97982 22.8964 8.19743 22.7725M21.7387 7.71865C21.4988 6.69828 21.1518 5.80967 20.7188 5.04257m1.0199 2.67608C22.6022 10.1105 23.0542 13.7848 21.5383 16.9142M20.7188 5.04257c-3.5504-6.28886-12.88753-4.410077-16.44303.0C2.88063 6.77451-.0433281 11.1668 1.38159 16.6571c.89322 3.4417 3.7911 5.6365 6.81584 6.1154M20.7188 5.04257c1.3509 1.89783 3.3111 6.34223 1.6353 10.37273M21.5383 16.9142C21.8737 16.4251 22.1428 15.9235 22.3541 15.4153M8.19743 22.7725C12.1971 23.4683 20.6281 22.971 22.3541 15.4153M14 10.945C13.3836 10.289 12.003 8.63215 11.2034 7.04814 11.1703 6.98257 11.0247 6.98456 10.9937 7.05061 10.5221 8.05496 9.07362 9.92941 8 10.945m3.0333-3.50056C10.9392 9.86549 11 15 12 17" stroke="currentcolor" stroke-linecap="round"/></svg>
</a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function n(){t.innerHTML="Copied",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),n();return}const s=document.createRange();s.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(s);try{document.execCommand("copy"),n()}catch{}o.removeRange(s)}),e.parentNode.appendChild(t)})</script></main></body><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".blog-content img"));images.forEach(e=>{mediumZoom(e,{margin:10,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.5)"})})</script><script src=/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin=anonymous defer></script></html>