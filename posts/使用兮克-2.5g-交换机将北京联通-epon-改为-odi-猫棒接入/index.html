<!doctype html><html lang=en><head><meta name=viewport content="width=device-width,initial-scale=1"><title>使用兮克 2.5G 交换机将北京联通 EPON 改为 ODI 猫棒接入</title>
<meta charset=utf-8><meta name=description content="Ladder@使用兮克 2.5G 交换机将北京联通 EPON 改为 ODI 猫棒接入 最近入手了兮克2.5G交换机（兮克SKS1200-8GPY1XF），有 8 个 2.5G 电口和 1 个 10G SFP+ 光口；支持多种组网模式，其中一种是支持使用猫棒接入，由路由器拨号后再回接到交换机，这样就可以替换掉光猫了 (注意：兮克 SKS1200-8GPY1XF 不支持 VLAN 隔离，将网线接到路由器再回接会形成环路，导致网络频繁抖动；建议使用最新的支持 VLAN 隔离的版本)
替换光猫有以下原因：
千兆及以上宽带突破不到千兆限制：运营商的千兆光猫一般只能跑到 950M左右，而 EPON 支持 1.25G 下行，GPON 支持 2.5G 下行 减少光猫空间占用：光猫体积较大，替换成猫棒可以减少空间占用，对于将网络设备放在弱电箱的用户比较合适 瞎折腾：纯粹为了体验和折腾 名词解释 猫棒 猫棒(Pon Stick) 就是 SFP 封装的猫，分为 GPON、EPON 等，接口是 SFP，可插到有 SFP 口的交换机、路由器或者网卡上来代替光猫，具有光猫完整的功能；优点是体积小，网速比普通光猫高；缺点是性能羸弱，发热量大，不够稳定
光模块 光模块工作在OSI模型的物理层，是光纤通信系统中的核心器件之一。它主要由光电子器件（光发射器、光接收器）、功能电路和光接口等部分组成，主要作用就是实现光纤通信中的光电转换和电光转换功能；光模块是一个光电转换器，而猫棒是有 CPU、内存、系统的光猫，两者都使用 SFP 接口
SFP/SFP+ SFP（Small Form-Factor Pluggable）和SFP+（Enhanced Small Form-Factor Pluggable）是两种不同的光模块类型，主要区别是它们支持的传输速率不同；SFP 模块支持最高传输速率为1.25 Gbps，而 SFP+ 模块支持最高传输速率为10 Gbps。此外，SFP+ 可以向下兼容 SFP 插槽，因此可以将 SFP+ 插入 SFP 插槽中，但反之则不行"><meta name=author content="HelloWood"><link rel=canonical href=https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8%E5%85%AE%E5%85%8B-2.5g-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B0%86%E5%8C%97%E4%BA%AC%E8%81%94%E9%80%9A-epon-%E6%94%B9%E4%B8%BA-odi-%E7%8C%AB%E6%A3%92%E6%8E%A5%E5%85%A5/><meta name=google-site-verification content="G-3MSGPYTHPZ"><link rel=alternate type=application/rss+xml href=https://blog.hellowood.dev/index.xml title=HelloWood><script async src="https://www.googletagmanager.com/gtag/js?id=G-3MSGPYTHPZ"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3MSGPYTHPZ",{anonymize_ip:!1})}</script><script async defer data-website-id=7a9034de-0ce7-4756-942a-829e6cd22301 src=https://umami.hellowood.dev/script.js></script><script defer data-cf-beacon='{"token": "b2e481d136dc428c8c96c8673e2a04cf"}' src=https://static.cloudflareinsights.com/beacon.min.js></script><meta property="og:title" content="使用兮克 2.5G 交换机将北京联通 EPON 改为 ODI 猫棒接入"><meta property="og:description" content="使用兮克 2.5G 交换机将北京联通 EPON 改为 ODI 猫棒接入 最近入手了兮克2.5G交换机（兮克SKS1200-8GPY1XF），有 8 个 2.5G 电口和 1 个 10G SFP+ 光口；支持多种组网模式，其中一种是支持使用猫棒接入，由路由器拨号后再回接到交换机，这样就可以替换掉光猫了 (注意：兮克 SKS1200-8GPY1XF 不支持 VLAN 隔离，将网线接到路由器再回接会形成环路，导致网络频繁抖动；建议使用最新的支持 VLAN 隔离的版本)
替换光猫有以下原因：
千兆及以上宽带突破不到千兆限制：运营商的千兆光猫一般只能跑到 950M左右，而 EPON 支持 1.25G 下行，GPON 支持 2.5G 下行 减少光猫空间占用：光猫体积较大，替换成猫棒可以减少空间占用，对于将网络设备放在弱电箱的用户比较合适 瞎折腾：纯粹为了体验和折腾 名词解释 猫棒 猫棒(Pon Stick) 就是 SFP 封装的猫，分为 GPON、EPON 等，接口是 SFP，可插到有 SFP 口的交换机、路由器或者网卡上来代替光猫，具有光猫完整的功能；优点是体积小，网速比普通光猫高；缺点是性能羸弱，发热量大，不够稳定
光模块 光模块工作在OSI模型的物理层，是光纤通信系统中的核心器件之一。它主要由光电子器件（光发射器、光接收器）、功能电路和光接口等部分组成，主要作用就是实现光纤通信中的光电转换和电光转换功能；光模块是一个光电转换器，而猫棒是有 CPU、内存、系统的光猫，两者都使用 SFP 接口
SFP/SFP+ SFP（Small Form-Factor Pluggable）和SFP+（Enhanced Small Form-Factor Pluggable）是两种不同的光模块类型，主要区别是它们支持的传输速率不同；SFP 模块支持最高传输速率为1.25 Gbps，而 SFP+ 模块支持最高传输速率为10 Gbps。此外，SFP+ 可以向下兼容 SFP 插槽，因此可以将 SFP+ 插入 SFP 插槽中，但反之则不行"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8%E5%85%AE%E5%85%8B-2.5g-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B0%86%E5%8C%97%E4%BA%AC%E8%81%94%E9%80%9A-epon-%E6%94%B9%E4%B8%BA-odi-%E7%8C%AB%E6%A3%92%E6%8E%A5%E5%85%A5/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-06-19T08:54:44+08:00"><meta property="article:modified_time" content="2023-06-19T08:54:44+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="使用兮克 2.5G 交换机将北京联通 EPON 改为 ODI 猫棒接入"><meta name=twitter:description content="使用兮克 2.5G 交换机将北京联通 EPON 改为 ODI 猫棒接入 最近入手了兮克2.5G交换机（兮克SKS1200-8GPY1XF），有 8 个 2.5G 电口和 1 个 10G SFP+ 光口；支持多种组网模式，其中一种是支持使用猫棒接入，由路由器拨号后再回接到交换机，这样就可以替换掉光猫了 (注意：兮克 SKS1200-8GPY1XF 不支持 VLAN 隔离，将网线接到路由器再回接会形成环路，导致网络频繁抖动；建议使用最新的支持 VLAN 隔离的版本)
替换光猫有以下原因：
千兆及以上宽带突破不到千兆限制：运营商的千兆光猫一般只能跑到 950M左右，而 EPON 支持 1.25G 下行，GPON 支持 2.5G 下行 减少光猫空间占用：光猫体积较大，替换成猫棒可以减少空间占用，对于将网络设备放在弱电箱的用户比较合适 瞎折腾：纯粹为了体验和折腾 名词解释 猫棒 猫棒(Pon Stick) 就是 SFP 封装的猫，分为 GPON、EPON 等，接口是 SFP，可插到有 SFP 口的交换机、路由器或者网卡上来代替光猫，具有光猫完整的功能；优点是体积小，网速比普通光猫高；缺点是性能羸弱，发热量大，不够稳定
光模块 光模块工作在OSI模型的物理层，是光纤通信系统中的核心器件之一。它主要由光电子器件（光发射器、光接收器）、功能电路和光接口等部分组成，主要作用就是实现光纤通信中的光电转换和电光转换功能；光模块是一个光电转换器，而猫棒是有 CPU、内存、系统的光猫，两者都使用 SFP 接口
SFP/SFP+ SFP（Small Form-Factor Pluggable）和SFP+（Enhanced Small Form-Factor Pluggable）是两种不同的光模块类型，主要区别是它们支持的传输速率不同；SFP 模块支持最高传输速率为1.25 Gbps，而 SFP+ 模块支持最高传输速率为10 Gbps。此外，SFP+ 可以向下兼容 SFP 插槽，因此可以将 SFP+ 插入 SFP 插槽中，但反之则不行"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://blog.hellowood.dev/posts/"},{"@type":"ListItem","position":3,"name":"使用兮克 2.5G 交换机将北京联通 EPON 改为 ODI 猫棒接入","item":"https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8%E5%85%AE%E5%85%8B-2.5g-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B0%86%E5%8C%97%E4%BA%AC%E8%81%94%E9%80%9A-epon-%E6%94%B9%E4%B8%BA-odi-%E7%8C%AB%E6%A3%92%E6%8E%A5%E5%85%A5/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"使用兮克 2.5G 交换机将北京联通 EPON 改为 ODI 猫棒接入","name":"使用兮克 2.5G 交换机将北京联通 EPON 改为 ODI 猫棒接入","description":"使用兮克 2.5G 交换机将北京联通 EPON 改为 ODI 猫棒接入 最近入手了兮克2.5G交换机（兮克SKS1200-8GPY1XF），有 8 个 2.5G 电口和 1 个 10G SFP+ 光口；支持多种组网模式，其中一种是支持使用猫棒接入，由路由器拨号后再回接到交换机，这样就可以替换掉光猫了 (注意：兮克 SKS1200-8GPY1XF 不支持 VLAN 隔离，将网线接到路由器再回接会形成环路，导致网络频繁抖动；建议使用最新的支持 VLAN 隔离的版本)\n替换光猫有以下原因：\n千兆及以上宽带突破不到千兆限制：运营商的千兆光猫一般只能跑到 950M左右，而 EPON 支持 1.25G 下行，GPON 支持 2.5G 下行 减少光猫空间占用：光猫体积较大，替换成猫棒可以减少空间占用，对于将网络设备放在弱电箱的用户比较合适 瞎折腾：纯粹为了体验和折腾 名词解释 猫棒 猫棒(Pon Stick) 就是 SFP 封装的猫，分为 GPON、EPON 等，接口是 SFP，可插到有 SFP 口的交换机、路由器或者网卡上来代替光猫，具有光猫完整的功能；优点是体积小，网速比普通光猫高；缺点是性能羸弱，发热量大，不够稳定\n光模块 光模块工作在OSI模型的物理层，是光纤通信系统中的核心器件之一。它主要由光电子器件（光发射器、光接收器）、功能电路和光接口等部分组成，主要作用就是实现光纤通信中的光电转换和电光转换功能；光模块是一个光电转换器，而猫棒是有 CPU、内存、系统的光猫，两者都使用 SFP 接口\nSFP/SFP+ SFP（Small Form-Factor Pluggable）和SFP+（Enhanced Small Form-Factor Pluggable）是两种不同的光模块类型，主要区别是它们支持的传输速率不同；SFP 模块支持最高传输速率为1.25 Gbps，而 SFP+ 模块支持最高传输速率为10 Gbps。此外，SFP+ 可以向下兼容 SFP 插槽，因此可以将 SFP+ 插入 SFP 插槽中，但反之则不行","keywords":["HomeLab","Network"],"articleBody":"使用兮克 2.5G 交换机将北京联通 EPON 改为 ODI 猫棒接入 最近入手了兮克2.5G交换机（兮克SKS1200-8GPY1XF），有 8 个 2.5G 电口和 1 个 10G SFP+ 光口；支持多种组网模式，其中一种是支持使用猫棒接入，由路由器拨号后再回接到交换机，这样就可以替换掉光猫了 (注意：兮克 SKS1200-8GPY1XF 不支持 VLAN 隔离，将网线接到路由器再回接会形成环路，导致网络频繁抖动；建议使用最新的支持 VLAN 隔离的版本)\n替换光猫有以下原因：\n千兆及以上宽带突破不到千兆限制：运营商的千兆光猫一般只能跑到 950M左右，而 EPON 支持 1.25G 下行，GPON 支持 2.5G 下行 减少光猫空间占用：光猫体积较大，替换成猫棒可以减少空间占用，对于将网络设备放在弱电箱的用户比较合适 瞎折腾：纯粹为了体验和折腾 名词解释 猫棒 猫棒(Pon Stick) 就是 SFP 封装的猫，分为 GPON、EPON 等，接口是 SFP，可插到有 SFP 口的交换机、路由器或者网卡上来代替光猫，具有光猫完整的功能；优点是体积小，网速比普通光猫高；缺点是性能羸弱，发热量大，不够稳定\n光模块 光模块工作在OSI模型的物理层，是光纤通信系统中的核心器件之一。它主要由光电子器件（光发射器、光接收器）、功能电路和光接口等部分组成，主要作用就是实现光纤通信中的光电转换和电光转换功能；光模块是一个光电转换器，而猫棒是有 CPU、内存、系统的光猫，两者都使用 SFP 接口\nSFP/SFP+ SFP（Small Form-Factor Pluggable）和SFP+（Enhanced Small Form-Factor Pluggable）是两种不同的光模块类型，主要区别是它们支持的传输速率不同；SFP 模块支持最高传输速率为1.25 Gbps，而 SFP+ 模块支持最高传输速率为10 Gbps。此外，SFP+ 可以向下兼容 SFP 插槽，因此可以将 SFP+ 插入 SFP 插槽中，但反之则不行\nUPC/APC/SC： UPC（Ultra Physical Contact）、APC（Angled Physical Contact）和SC（Subscriber Connector）都是光纤接口的类型；通常 APC 是绿色的接头，用于机房等场景；SC 是蓝色的接头，一般家用光纤都是 SC 接口\nEPON/GPON： GPON（Gigabit Passive Optical Network）和EPON（Ethernet Passive Optical Network）都是基于Passive Optical Network （PON）技术的光纤接入网络。\nGPON 是 ITU-T 标准化的 PON 技术，最高传输速率可达2.5 Gbps 下行 和1.25 Gbps 上行。它通常用于大型服务提供商、运营商或企业级网络中，提供高速宽带 Internet、IPTV、VoIP等服务。\nEPON 则是 IEEE 802.3 标准的 PON 技术，使用以太网技术在单根光纤上传输数据，最高传输速率可达 1.25 Gbps。由于采用了市场上广泛应用的以太网协议，EPON 在一些小型企业、住宅小区等应用场合得到了广泛应用。\n硬件设备 宽带：北京联通，EPON（非10G） 光猫：烽火 HG2543C1 （EPON/4+1+WiFi(2.4G)） 猫棒：ODI DFP-34X-2C2，支持 EPON 和 GPON 两种模式 路由器：红米 AX6000，一个千兆 WAN口，三个千兆 LAN 口 交换机：兮克 SKS1200-8GPY1XF， 8 个 2.5G 电口和 1 个 10G SFP+ 光口 获取光猫认证信息 改接之前要确认光猫已经修改为桥接模式，可以自行登陆光猫超级账户进行修改，或者联系运营商要求修改\n北京联通使用 MAC+SN 的方式进行认证，登陆光猫后台即可获取到；实际测试中只使用到了 MAC 地址，在光猫后面的贴纸就可以获取到\n配置猫棒 北京联通的 EPON 配置较为复杂，除了配置 MAC/MACKEY 和 VLAN ID外，还需要配置 MAC 映射和猫棒信息（以及 OUI 信息）\n购买到的猫棒的固件版本是 V1.0-220923，这个版本不支持配置 MAC 映射表，因此要先刷回 V1.0-220414 版本进行配置\n使用 220414 固件配置 MAC 映射 刷入固件 下载固件 在 GitHub 仓库 https://github.com/Anime4000/RTL960x 下载 Firmware/DFP-34X-2C2/M114_sfp_ODI_Vlan_220414.tar 文件\n刷入固件 登陆猫棒后台，默认地址 192.168.1.1，默认用户名和密码都是 admin（需要确保电脑在同一个网段才能访问到）\n登陆后进入固件升级，选择刚才下载的 tar 文件，点击升级\n点击升级后会先上传固件，可能需要1分钟左右，耐心等待，期间不要操作\n大概3～5分钟后升级完成，提示需要重新登陆\n配置 MAC 映射表 升级完成后再次登陆，进入到 EPON 设定，LOID 填入光猫的 MAC 地址，LOID 密码填 000000，MAC 映射表的 0/2/4/6 也填写光猫的 MAC 地址\n填写完成后点击应用，然后选择提交并重启，等待重启完成后刷入 220923 进行配置\n使用 220912 固件配置认证信息 刷入固件 下载固件 在 GitHub 仓库 https://github.com/Anime4000/RTL960x 下载 Firmware/DFP-34X-2C2/M110_sfp_ODI_220923.tar 文件\n刷入固件 操作和上面一样，等待升级完成\n配置 MAC 和 MACKEY 升级完成后再次登陆猫棒后台，选择 设定进行配置（未深入研究，以下配置或许不完全准确）\nLOID 设定：光猫的 MAC 地址 LOID 密码： 000000 MAC：光猫的 MAC 地址 MACKEY：hsgq1.9a+大写的光猫 MAC 地址的小写 md5 值，如 MAC 地址是 XXXXXXXXXXXX, 则获取hsgq1.9aXXXXXXXXXXXX的 md5 值即可，可以使用命令行或者在线网站进行计算 OUI：配置值为 111111，这个配置在任何文档中均未提到，但是实际影响到了拨号，未配置之前拨号一直没有响应，配置后可以成功拨号（或许和其他配置有关） 其他配置：非必须，参考图片内容进行配置即可（如果拨号失败建议修改为一样的） 配置 VLAN 选择 VLAN 设置，将 VLAN 改为手动，PVID 填写光猫的 INTERNET 的 VLAN ID，北京联通为 3961\n配置完成后，点击 提交/重启，保存并重启，使配置生效\n检查连接状态 插入光纤，重启后再次登陆后台，查看 PON，如果发送功率和接收功率均有值，说明光信号正常，查看 EPON LLID Status，index 为 0 的状态是 1，说明猫棒认证成功；可以多刷新几次，检查是否一直是 1（如果 0 和 1 来回变，说明认证失败了）\n拨号 将路由器或者电脑用网线连接交换机的 8号口，然后选择拨号上网，等待一会儿即可看到拨号成功了\n如果等待一会儿后提示拨号失败了，说明配置可能不正确，按照截图中的配置内容重新填写，然后在 备份/恢复 中选择重置后再次尝试\n","wordCount":"291","inLanguage":"en","datePublished":"2023-06-19T08:54:44+08:00","dateModified":"2023-06-19T08:54:44+08:00","author":{"@type":"Person","name":"HelloWood"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8%E5%85%AE%E5%85%8B-2.5g-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B0%86%E5%8C%97%E4%BA%AC%E8%81%94%E9%80%9A-epon-%E6%94%B9%E4%B8%BA-odi-%E7%8C%AB%E6%A3%92%E6%8E%A5%E5%85%A5/"},"publisher":{"@type":"Organization","name":"HelloWood","logo":{"@type":"ImageObject","url":"https://blog.hellowood.dev/favicon.ico"}}}</script><link rel=icon href=/images/avatar.png sizes=16x16><link rel=apple-touch-icon href=/images/avatar.png><link rel=manifest href=/images/avatar.png><link rel=stylesheet href=https://cdn.staticfile.org/lxgw-wenkai-webfont/1.6.0/style.css><link rel=stylesheet href=/css/main.min.ff1bc260fafbfb440e10194d7d06d57eb5e85eed11d12d06255581262664204e.css integrity="sha256-/xvCYPr7+0QOEBlNfQbVfrXoXu0R0S0GJVWBJiZkIE4=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css><script src=/js/highlight.min.min.894ca9c68afab956438c4926a0dc7f5293e04e08595bd27abdb123e94801f684.js></script><script>hljs.highlightAll()</script><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","jtbhx98g62")</script></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-brand data-umami-event=navigation-brand href=/>HOME
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><span></span><span></span><span></span></label><ul class=navigation-list id=navigation-list><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Blog href=/posts>Blog</a></li><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Tags href=/tags>Tags</a></li><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Archive href=/archives>Archive</a></li><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Dashboard href=https://umami.hellowood.dev/share/lab/Blog>Dashboard</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class="navigation-item navigation-social"><a class=navigation-link data-umami-event=navigation-social href=https://github.com/helloworlde><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li class="navigation-item navigation-dark"><button id=mode type=button data-umami-event=toggle-theme aria-label="toggle user light or dark theme">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></li></ul></section></nav><div id=content><article class=blog-single><header class=blog-title><h1>使用兮克 2.5G 交换机将北京联通 EPON 改为 ODI 猫棒接入</h1></header><p><small>June 19, 2023&nbsp;· 291 words&nbsp;· 2 min</small><p><div class=blog-toc><nav id=TableOfContents><ul><li><a href=#名词解释>名词解释</a></li><li><a href=#硬件设备>硬件设备</a></li><li><a href=#获取光猫认证信息>获取光猫认证信息</a></li><li><a href=#配置猫棒>配置猫棒</a><ul><li><a href=#使用-220414-固件配置-mac-映射>使用 220414 固件配置 MAC 映射</a></li><li><a href=#使用-220912-固件配置认证信息>使用 220912 固件配置认证信息</a></li><li><a href=#检查连接状态>检查连接状态</a></li></ul></li><li><a href=#拨号>拨号</a></li></ul></nav></div><section class=blog-content><h1 id=使用兮克-25g-交换机将北京联通-epon-改为-odi-猫棒接入>使用兮克 2.5G 交换机将北京联通 EPON 改为 ODI 猫棒接入</h1><p>最近入手了兮克2.5G交换机（兮克SKS1200-8GPY1XF），有 8 个 2.5G 电口和 1 个 10G SFP+ 光口；支持多种组网模式，其中一种是支持使用猫棒接入，由路由器拨号后再回接到交换机，这样就可以替换掉光猫了
(注意：兮克 SKS1200-8GPY1XF 不支持 VLAN 隔离，将网线接到路由器再回接会形成环路，导致网络频繁抖动；建议使用最新的支持 VLAN 隔离的版本)</p><p><img src=https://img.hellowood.dev/picture/homelab-switch-sfp-network.png alt=homelab-switch-sfp-network.png></p><p>替换光猫有以下原因：</p><ol><li>千兆及以上宽带突破不到千兆限制：运营商的千兆光猫一般只能跑到 950M左右，而 EPON 支持 1.25G 下行，GPON 支持 2.5G 下行</li><li>减少光猫空间占用：光猫体积较大，替换成猫棒可以减少空间占用，对于将网络设备放在弱电箱的用户比较合适</li><li>瞎折腾：纯粹为了体验和折腾</li></ol><h2 id=名词解释>名词解释</h2><ul><li>猫棒</li></ul><p>猫棒(Pon Stick) 就是 SFP 封装的猫，分为 GPON、EPON 等，接口是 SFP，可插到有 SFP 口的交换机、路由器或者网卡上来代替光猫，具有光猫完整的功能；优点是体积小，网速比普通光猫高；缺点是性能羸弱，发热量大，不够稳定</p><ul><li>光模块</li></ul><p>光模块工作在OSI模型的物理层，是光纤通信系统中的核心器件之一。它主要由光电子器件（光发射器、光接收器）、功能电路和光接口等部分组成，主要作用就是实现光纤通信中的光电转换和电光转换功能；光模块是一个光电转换器，而猫棒是有 CPU、内存、系统的光猫，两者都使用 SFP 接口</p><ul><li>SFP/SFP+</li></ul><p>SFP（Small Form-Factor Pluggable）和SFP+（Enhanced Small Form-Factor Pluggable）是两种不同的光模块类型，主要区别是它们支持的传输速率不同；SFP 模块支持最高传输速率为1.25 Gbps，而 SFP+ 模块支持最高传输速率为10 Gbps。此外，SFP+ 可以向下兼容 SFP 插槽，因此可以将 SFP+ 插入 SFP 插槽中，但反之则不行</p><ul><li>UPC/APC/SC：</li></ul><p>UPC（Ultra Physical Contact）、APC（Angled Physical Contact）和SC（Subscriber Connector）都是光纤接口的类型；通常 APC 是绿色的接头，用于机房等场景；SC 是蓝色的接头，一般家用光纤都是 SC 接口</p><ul><li>EPON/GPON：</li></ul><p>GPON（Gigabit Passive Optical Network）和EPON（Ethernet Passive Optical Network）都是基于Passive Optical Network （PON）技术的光纤接入网络。</p><p>GPON 是 ITU-T 标准化的 PON 技术，最高传输速率可达2.5 Gbps 下行 和1.25 Gbps 上行。它通常用于大型服务提供商、运营商或企业级网络中，提供高速宽带 Internet、IPTV、VoIP等服务。</p><p>EPON 则是 IEEE 802.3 标准的 PON 技术，使用以太网技术在单根光纤上传输数据，最高传输速率可达 1.25 Gbps。由于采用了市场上广泛应用的以太网协议，EPON 在一些小型企业、住宅小区等应用场合得到了广泛应用。</p><h2 id=硬件设备>硬件设备</h2><ul><li>宽带：北京联通，EPON（非10G）</li><li>光猫：烽火 HG2543C1 （EPON/4+1+WiFi(2.4G)）</li><li>猫棒：ODI DFP-34X-2C2，支持 EPON 和 GPON 两种模式</li><li>路由器：红米 AX6000，一个千兆 WAN口，三个千兆 LAN 口</li><li>交换机：兮克 SKS1200-8GPY1XF， 8 个 2.5G 电口和 1 个 10G SFP+ 光口</li></ul><h2 id=获取光猫认证信息>获取光猫认证信息</h2><p>改接之前要确认光猫已经修改为桥接模式，可以自行登陆光猫超级账户进行修改，或者联系运营商要求修改</p><p>北京联通使用 MAC+SN 的方式进行认证，登陆光猫后台即可获取到；实际测试中只使用到了 MAC 地址，在光猫后面的贴纸就可以获取到</p><p><img src=https://img.hellowood.dev/picture/homelab-switch-unicom-epon-device-info.png alt=homelab-switch-unicom-epon-device-info.png></p><h2 id=配置猫棒>配置猫棒</h2><p>北京联通的 EPON 配置较为复杂，除了配置 MAC/MACKEY 和 VLAN ID外，还需要配置 MAC 映射和猫棒信息（以及 OUI 信息）</p><p>购买到的猫棒的固件版本是 V1.0-220923，这个版本不支持配置 MAC 映射表，因此要先刷回 V1.0-220414 版本进行配置</p><h3 id=使用-220414-固件配置-mac-映射>使用 220414 固件配置 MAC 映射</h3><h4 id=刷入固件>刷入固件</h4><ul><li>下载固件</li></ul><p>在 GitHub 仓库 <a href=https://github.com/Anime4000/RTL960x>https://github.com/Anime4000/RTL960x</a> 下载 <a href=https://github.com/Anime4000/RTL960x/blob/main/Firmware/DFP-34X-2C2/M114_sfp_ODI_Vlan_220414.tar>Firmware/DFP-34X-2C2/M114_sfp_ODI_Vlan_220414.tar</a> 文件</p><ul><li>刷入固件</li></ul><p>登陆猫棒后台，默认地址 192.168.1.1，默认用户名和密码都是 admin（需要确保电脑在同一个网段才能访问到）</p><p><img src=https://img.hellowood.dev/picture/homelab-switch-sfp-epon-odi-login.png alt=homelab-switch-sfp-epon-odi-login.png></p><p>登陆后进入固件升级，选择刚才下载的 <code>tar</code> 文件，点击升级</p><p><img src=https://img.hellowood.dev/picture/homelab-switch-sfp-epon-odi-upgrade.png alt=homelab-switch-sfp-epon-odi-upgrade.png></p><p>点击升级后会先上传固件，可能需要1分钟左右，耐心等待，期间不要操作</p><p><img src=https://img.hellowood.dev/picture/homelab-switch-sfp-epon-odi-upgrade-progress.png alt=homelab-switch-sfp-epon-odi-upgrade-progress.png></p><p>大概3～5分钟后升级完成，提示需要重新登陆</p><p><img src=https://img.hellowood.dev/picture/homelab-switch-sfp-epon-odi-upgrade-complete.png alt=homelab-switch-sfp-epon-odi-upgrade-complete.png></p><h4 id=配置-mac-映射表>配置 MAC 映射表</h4><p>升级完成后再次登陆，进入到 EPON 设定，LOID 填入光猫的 MAC 地址，LOID 密码填 <code>000000</code>，MAC 映射表的 0/2/4/6 也填写光猫的 MAC 地址</p><p><img src=https://img.hellowood.dev/picture/homelab-switch-sfp-epon-odi-mac-mapping.png alt=homelab-switch-sfp-epon-odi-mac-mapping.png></p><p>填写完成后点击应用，然后选择提交并重启，等待重启完成后刷入 220923 进行配置</p><p><img src=https://img.hellowood.dev/picture/homelab-switch-sfp-epon-odi-apply-settings.png alt=homelab-switch-sfp-epon-odi-apply-settings.png></p><h3 id=使用-220912-固件配置认证信息>使用 220912 固件配置认证信息</h3><h4 id=刷入固件-1>刷入固件</h4><ul><li>下载固件</li></ul><p>在 GitHub 仓库 <a href=https://github.com/Anime4000/RTL960x>https://github.com/Anime4000/RTL960x</a> 下载 <a href=https://github.com/Anime4000/RTL960x/blob/main/Firmware/DFP-34X-2C2/M110_sfp_ODI_220923.tar>Firmware/DFP-34X-2C2/M110_sfp_ODI_220923.tar</a> 文件</p><ul><li>刷入固件</li></ul><p>操作和上面一样，等待升级完成</p><h4 id=配置-mac-和-mackey>配置 MAC 和 MACKEY</h4><p>升级完成后再次登陆猫棒后台，选择 <code>设定</code>进行配置（未深入研究，以下配置或许不完全准确）</p><ul><li>LOID 设定：光猫的 MAC 地址</li><li>LOID 密码： 000000</li><li>MAC：光猫的 MAC 地址</li><li>MACKEY：<code>hsgq1.9a+大写的光猫 MAC 地址</code>的小写 md5 值，如 MAC 地址是 <code>XXXXXXXXXXXX</code>, 则获取<code>hsgq1.9aXXXXXXXXXXXX</code>的 md5 值即可，可以使用命令行或者<a href=http://www.ip33.com/md5.html>在线网站</a>进行计算</li><li>OUI：配置值为 <code>111111</code>，这个配置在任何文档中均未提到，但是实际影响到了拨号，未配置之前拨号一直没有响应，配置后可以成功拨号（或许和其他配置有关）</li><li>其他配置：非必须，参考图片内容进行配置即可（如果拨号失败建议修改为一样的）</li></ul><p><img src=https://img.hellowood.dev/picture/homelab-switch-sfp-epon-odi-mac-mackey-settings.png alt=homelab-switch-sfp-epon-odi-mac-mackey-settings.png></p><h4 id=配置-vlan>配置 VLAN</h4><p>选择 <code>VLAN 设置</code>，将 VLAN 改为手动，PVID 填写光猫的 INTERNET 的 VLAN ID，北京联通为 <code>3961</code></p><p><img src=https://img.hellowood.dev/picture/homelab-switch-sfp-odi-set-vlan.png alt=homelab-switch-sfp-odi-set-vlan.png></p><p>配置完成后，点击 <code>提交/重启</code>，保存并重启，使配置生效</p><h3 id=检查连接状态>检查连接状态</h3><p>插入光纤，重启后再次登陆后台，查看 <code>PON</code>，如果发送功率和接收功率均有值，说明光信号正常，查看 <code>EPON LLID Status</code>，<code>index</code> 为 <code>0</code> 的状态是 <code>1</code>，说明猫棒认证成功；可以多刷新几次，检查是否一直是 1（如果 0 和 1 来回变，说明认证失败了）</p><p><img src=https://img.hellowood.dev/picture/homelab-switch-sfp-epon-status.png alt=homelab-switch-sfp-epon-status.png></p><h2 id=拨号>拨号</h2><p>将路由器或者电脑用网线连接交换机的 8号口，然后选择拨号上网，等待一会儿即可看到拨号成功了</p><p><img src=https://img.hellowood.dev/picture/homelab-switch-sfp-epon-dial-success.png alt=homelab-switch-sfp-epon-dial-success.png></p><p>如果等待一会儿后提示拨号失败了，说明配置可能不正确，按照截图中的配置内容重新填写，然后在 <code>备份/恢复</code> 中选择重置后再次尝试</p><p><img src=https://img.hellowood.dev/picture/homelab-switch-sfp-epon-odi-reset.png alt=homelab-switch-sfp-epon-odi-reset.png></p></section><div class=paginator><a class=prev href=https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8arpl%E5%9C%A8pve%E4%B8%8A%E5%AE%89%E8%A3%85%E9%BB%91%E7%BE%A4%E6%99%96/><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M9.94496 9C9.28897 9.61644 7.63215 10.997 6.04814 11.7966 5.98257 11.8297 5.98456 11.9753 6.05061 12.0063c1.00435.4716 2.8788 1.9201 3.89435 2.9937M6.44444 11.9667C8.86549 12.0608 14 12 16 11" stroke="currentcolor" stroke-linecap="round"/></svg><span>使用arpl在PVE上安装黑群晖</span></a>
<a class=next href=https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8wireguard%E4%BB%8E%E5%A4%96%E7%BD%91%E8%AE%BF%E9%97%AEopenwrt/><span>使用WireGuard从外网访问OpenWrt</span><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M12.055 9C12.711 9.61644 14.3679 10.997 15.9519 11.7966 16.0174 11.8297 16.0154 11.9753 15.9494 12.0063 14.945 12.4779 13.0706 13.9264 12.055 15m3.5006-3.0333C13.1345 12.0608 8 12 6 11" stroke="currentcolor" stroke-linecap="round"/></svg></a></div></article></div><footer class=footer><p>&copy; 2024 <a href=https://blog.hellowood.dev>HelloWood</a>
Powered by
<a href=https://gohugo.io/ rel=noopener target=_blank data-umami-event=to-hugo>Hugo️️</a>
<a href=https://github.com/guangzhengli/hugo-theme-ladder rel=noopener target=_blank data-umami-event=to-ladder>Ladder</a>
️</p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g data-umami-event=top-link><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.5376 22.7916C11.0152 22.7207 22.5795 21.1781 22.0978 10.4211 22.0536 9.43274 21.9303 8.53367 21.7387 7.71865M10.5376 22.7916C16.876 22.3728 20.0969 19.8899 21.5383 16.9142M10.5376 22.7916C9.7707 22.9055 8.97982 22.8964 8.19743 22.7725M21.7387 7.71865C21.4988 6.69828 21.1518 5.80967 20.7188 5.04257m1.0199 2.67608C22.6022 10.1105 23.0542 13.7848 21.5383 16.9142M20.7188 5.04257c-3.5504-6.28886-12.88753-4.410077-16.44303.0C2.88063 6.77451-.0433281 11.1668 1.38159 16.6571c.89322 3.4417 3.7911 5.6365 6.81584 6.1154M20.7188 5.04257c1.3509 1.89783 3.3111 6.34223 1.6353 10.37273M21.5383 16.9142C21.8737 16.4251 22.1428 15.9235 22.3541 15.4153M8.19743 22.7725C12.1971 23.4683 20.6281 22.971 22.3541 15.4153M14 10.945C13.3836 10.289 12.003 8.63215 11.2034 7.04814 11.1703 6.98257 11.0247 6.98456 10.9937 7.05061 10.5221 8.05496 9.07362 9.92941 8 10.945m3.0333-3.50056C10.9392 9.86549 11 15 12 17" stroke="currentcolor" stroke-linecap="round"/></svg></a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function n(){t.innerHTML="Copied",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),n();return}const s=document.createRange();s.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(s);try{document.execCommand("copy"),n()}catch{}o.removeRange(s)}),e.parentNode.appendChild(t)})</script></main></body><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".blog-content img"));images.forEach(e=>{mediumZoom(e,{margin:10,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.5)"})})</script><script src=/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin=anonymous defer></script></html>