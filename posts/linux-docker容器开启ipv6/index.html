<!doctype html><html lang=en><head><meta name=viewport content="width=device-width,initial-scale=1"><title>Linux Docker容器开启IPv6</title>
<meta charset=utf-8><meta name=description content='Ladder@Linux Docker 容器开启 IPv6 局域网开启了 IPv6 后，发现 Docker 因为没有开启 IPv6 无法访问了，因此需要为 Docker 开启 IPv6，根据官方文档提示，IPv6 仅在运行于 Linux 主机上的 Docker 守护进程上受支持
Docker 支持只给特定的网络开启 IPv6，也支持给 bridge 网络开启 IPv6
只给特定的网络开启 IPv6 这种方式不会修改默认的网络配置，指定特定的网络生效
修改配置 修改 /etc/docker/daemon.json 文件，开启 IPv6 网络 { "experimental": true, "ip6tables": true } 重启 docker sudo systemctl restart docker 创建 IPv6 网络 创建名为 homelab-v6 的 IPv6 网络，并指定子网范围
docker network create --ipv6 --subnet 2001:0DB8::/112 homelab-v6 测试验证 启动一个 busybox 容器，ping 阿里巴巴的 IPv6 DNS 地址 2400:3200::1，发现可以正常访问，说明已经成功开启 IPv6'><meta name=author content="HelloWood"><link rel=canonical href=https://blog.hellowood.dev/posts/linux-docker%E5%AE%B9%E5%99%A8%E5%BC%80%E5%90%AFipv6/><meta name=google-site-verification content="G-3MSGPYTHPZ"><link rel=alternate type=application/rss+xml href=https://blog.hellowood.dev//index.xml title=HelloWood><script async src="https://www.googletagmanager.com/gtag/js?id=G-3MSGPYTHPZ"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3MSGPYTHPZ")}</script><script async defer data-website-id=7a9034de-0ce7-4756-942a-829e6cd22301 src=https://umami.hellowood.dev/script.js></script><script defer data-cf-beacon='{"token": "b2e481d136dc428c8c96c8673e2a04cf"}' src=https://static.cloudflareinsights.com/beacon.min.js></script><meta property="og:url" content="https://blog.hellowood.dev/posts/linux-docker%E5%AE%B9%E5%99%A8%E5%BC%80%E5%90%AFipv6/"><meta property="og:site_name" content="HelloWood"><meta property="og:title" content="Linux Docker容器开启IPv6"><meta property="og:description" content='Linux Docker 容器开启 IPv6 局域网开启了 IPv6 后，发现 Docker 因为没有开启 IPv6 无法访问了，因此需要为 Docker 开启 IPv6，根据官方文档提示，IPv6 仅在运行于 Linux 主机上的 Docker 守护进程上受支持
Docker 支持只给特定的网络开启 IPv6，也支持给 bridge 网络开启 IPv6
只给特定的网络开启 IPv6 这种方式不会修改默认的网络配置，指定特定的网络生效
修改配置 修改 /etc/docker/daemon.json 文件，开启 IPv6 网络 { "experimental": true, "ip6tables": true } 重启 docker sudo systemctl restart docker 创建 IPv6 网络 创建名为 homelab-v6 的 IPv6 网络，并指定子网范围
docker network create --ipv6 --subnet 2001:0DB8::/112 homelab-v6 测试验证 启动一个 busybox 容器，ping 阿里巴巴的 IPv6 DNS 地址 2400:3200::1，发现可以正常访问，说明已经成功开启 IPv6'><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-04-21T21:25:04+08:00"><meta property="article:modified_time" content="2024-04-21T21:25:04+08:00"><meta property="article:tag" content="HomeLab"><meta property="article:tag" content="Docker"><meta name=twitter:card content="summary"><meta name=twitter:title content="Linux Docker容器开启IPv6"><meta name=twitter:description content='Linux Docker 容器开启 IPv6 局域网开启了 IPv6 后，发现 Docker 因为没有开启 IPv6 无法访问了，因此需要为 Docker 开启 IPv6，根据官方文档提示，IPv6 仅在运行于 Linux 主机上的 Docker 守护进程上受支持
Docker 支持只给特定的网络开启 IPv6，也支持给 bridge 网络开启 IPv6
只给特定的网络开启 IPv6 这种方式不会修改默认的网络配置，指定特定的网络生效
修改配置 修改 /etc/docker/daemon.json 文件，开启 IPv6 网络 { "experimental": true, "ip6tables": true } 重启 docker sudo systemctl restart docker 创建 IPv6 网络 创建名为 homelab-v6 的 IPv6 网络，并指定子网范围
docker network create --ipv6 --subnet 2001:0DB8::/112 homelab-v6 测试验证 启动一个 busybox 容器，ping 阿里巴巴的 IPv6 DNS 地址 2400:3200::1，发现可以正常访问，说明已经成功开启 IPv6'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.hellowood.dev/posts/"},{"@type":"ListItem","position":2,"name":"Linux Docker容器开启IPv6","item":"https://blog.hellowood.dev/posts/linux-docker%E5%AE%B9%E5%99%A8%E5%BC%80%E5%90%AFipv6/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Linux Docker容器开启IPv6","name":"Linux Docker容器开启IPv6","description":"Linux Docker 容器开启 IPv6 局域网开启了 IPv6 后，发现 Docker 因为没有开启 IPv6 无法访问了，因此需要为 Docker 开启 IPv6，根据官方文档提示，IPv6 仅在运行于 Linux 主机上的 Docker 守护进程上受支持\nDocker 支持只给特定的网络开启 IPv6，也支持给 bridge 网络开启 IPv6\n只给特定的网络开启 IPv6 这种方式不会修改默认的网络配置，指定特定的网络生效\n修改配置 修改 /etc/docker/daemon.json 文件，开启 IPv6 网络 { \u0026#34;experimental\u0026#34;: true, \u0026#34;ip6tables\u0026#34;: true } 重启 docker sudo systemctl restart docker 创建 IPv6 网络 创建名为 homelab-v6 的 IPv6 网络，并指定子网范围\ndocker network create --ipv6 --subnet 2001:0DB8::/112 homelab-v6 测试验证 启动一个 busybox 容器，ping 阿里巴巴的 IPv6 DNS 地址 2400:3200::1，发现可以正常访问，说明已经成功开启 IPv6","keywords":["HomeLab","Docker"],"articleBody":"Linux Docker 容器开启 IPv6 局域网开启了 IPv6 后，发现 Docker 因为没有开启 IPv6 无法访问了，因此需要为 Docker 开启 IPv6，根据官方文档提示，IPv6 仅在运行于 Linux 主机上的 Docker 守护进程上受支持\nDocker 支持只给特定的网络开启 IPv6，也支持给 bridge 网络开启 IPv6\n只给特定的网络开启 IPv6 这种方式不会修改默认的网络配置，指定特定的网络生效\n修改配置 修改 /etc/docker/daemon.json 文件，开启 IPv6 网络 { \"experimental\": true, \"ip6tables\": true } 重启 docker sudo systemctl restart docker 创建 IPv6 网络 创建名为 homelab-v6 的 IPv6 网络，并指定子网范围\ndocker network create --ipv6 --subnet 2001:0DB8::/112 homelab-v6 测试验证 启动一个 busybox 容器，ping 阿里巴巴的 IPv6 DNS 地址 2400:3200::1，发现可以正常访问，说明已经成功开启 IPv6\ndocker run --network=homelab-v6 --rm -it busybox ping -6 -c1 2400:3200::1 PING 2400:3200::1 (2400:3200::1): 56 data bytes 64 bytes from 2400:3200::1: seq=0 ttl=117 time=2040.345 ms --- 2400:3200::1 ping statistics --- 1 packets transmitted, 1 packets received, 0% packet loss round-trip min/avg/max = 2040.345/2040.345/2040.345 ms 给 bridge 开启 IPv6 给 bridge 开启 IPv6 相当于默认给所有没有指定网络的容器都开启了 IPv6；此时需要在配置文件中指定 IPv6 子网范围\n修改配置 修改 /etc/docker/daemon.json 文件，添加以下内容：\n{ \"ipv6\": true, \"fixed-cidr-v6\": \"2001:db8:1::/64\", \"experimental\": true, \"ip6tables\": true } 重启 Docker sudo systemctl restart docker 测试验证 docker run --network=bridge --rm -it busybox ping -6 -c1 2400:3200::1 PING 2400:3200::1 (2400:3200::1): 56 data bytes 64 bytes from 2400:3200::1: seq=0 ttl=117 time=7.906 ms --- 2400:3200::1 ping statistics --- 1 packets transmitted, 1 packets received, 0% packet loss round-trip min/avg/max = 7.906/7.906/7.906 ms macvlan 网络开启 IPv6 macvlan 网络 IPv6 和给特定的网络开启 IPv6 一样，在创建网络的时候指定相应的 CIDR 和网关地址即可\n创建网络 docker network create -d macvlan \\ --subnet=192.168.2.0/24 \\ --gateway=192.168.2.1 \\ --subnet=fd00::/80 \\ --gateway=fd00::1 \\ --ipv6 -o parent=eth0 homelab-macvlan 使用 version: \"3\" networks: homelab-macvlan: external: name: homelab-macvlan services: coredns: image: alpine container_name: alpine command: ping -6 -c100 2400:3200::1 networks: homelab-macvlan: ipv4_address: 192.168.2.249 ipv6_address: fd00::2 测试 docker-compose up Starting alpine ... done Attaching to alpine alpine | PING 2400:3200::1 (2400:3200::1): 56 data bytes alpine | 64 bytes from 2400:3200::1: seq=4 ttl=119 time=6.293 ms alpine | 64 bytes from 2400:3200::1: seq=5 ttl=119 time=6.301 ms 参考文档 Enable IPv6 support ","wordCount":"287","inLanguage":"en","datePublished":"2024-04-21T21:25:04+08:00","dateModified":"2024-04-21T21:25:04+08:00","author":{"@type":"Person","name":"HelloWood"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.hellowood.dev/posts/linux-docker%E5%AE%B9%E5%99%A8%E5%BC%80%E5%90%AFipv6/"},"publisher":{"@type":"Organization","name":"HelloWood","logo":{"@type":"ImageObject","url":"https://blog.hellowood.dev/favicon.ico"}}}</script><link rel=icon href=/images/avatar.png sizes=16x16><link rel=apple-touch-icon href=/images/avatar.png><link rel=manifest href=/images/avatar.png><link rel=stylesheet href=https://cdn.staticfile.org/lxgw-wenkai-webfont/1.6.0/style.css><link rel=stylesheet href=/css/main.min.7f82854fa0e999ec07c4835d3029de9f484030e254b80d470b3ca48eb934720e.css integrity="sha256-f4KFT6DpmewHxINdMCnen0hAMOJUuA1HCzykjrk0cg4=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css><script src=/js/highlight.min.min.c607d6febd16934a82eb61d3a896ed9d869f54373cc63ce95864ed5488fe3128.js></script><script>hljs.highlightAll()</script><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><meta name=google-adsense-account content="ca-pub-3401351766168985"><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","jtbhx98g62")</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3401351766168985" crossorigin=anonymous></script><script defer src=https://analytics.us.umami.is/script.js data-website-id=73ff1c8c-9938-43cf-81af-e77e26b0cca3></script></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-brand data-umami-event=navigation-brand href=/>HOME
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><span></span><span></span><span></span></label><ul class=navigation-list id=navigation-list><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Blog href=/posts>Blog</a></li><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Tags href=/tags>Tags</a></li><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Archive href=/archives>Archive</a></li><li class="navigation-item navigation-menu"><a class=navigation-link data-umami-event=Dashboard href=https://umami.hellowood.dev/share/lab/Blog>Dashboard</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class="navigation-item navigation-social"><a class=navigation-link data-umami-event=navigation-social href=https://github.com/helloworlde><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li class="navigation-item navigation-dark"><button id=mode type=button data-umami-event=toggle-theme aria-label="toggle user light or dark theme">
<span class=toggle-dark><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span>
<span class=toggle-light><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></li></ul></section></nav><div id=content><article class=blog-single><header class=blog-title><h1>Linux Docker容器开启IPv6</h1></header><p><small>April 21, 2024&nbsp;· 287 words&nbsp;· 2 min</small><p><div class=blog-toc><nav id=TableOfContents><ul><li><a href=#只给特定的网络开启-ipv6>只给特定的网络开启 IPv6</a></li><li><a href=#给-bridge-开启-ipv6>给 bridge 开启 IPv6</a></li><li><a href=#macvlan-网络开启-ipv6>macvlan 网络开启 IPv6</a></li><li><a href=#参考文档>参考文档</a></li></ul></nav></div><section class=blog-content><h1 id=linux-docker-容器开启-ipv6>Linux Docker 容器开启 IPv6</h1><p>局域网开启了 IPv6 后，发现 Docker 因为没有开启 IPv6 无法访问了，因此需要为 Docker 开启 IPv6，根据官方文档提示，IPv6 仅在运行于 Linux 主机上的 Docker 守护进程上受支持</p><p>Docker 支持只给特定的网络开启 IPv6，也支持给 bridge 网络开启 IPv6</p><h2 id=只给特定的网络开启-ipv6>只给特定的网络开启 IPv6</h2><p>这种方式不会修改默认的网络配置，指定特定的网络生效</p><ul><li>修改配置
修改 <code>/etc/docker/daemon.json</code> 文件，开启 IPv6 网络</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;experimental&#34;</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;ip6tables&#34;</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li>重启 docker</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl restart docker
</span></span></code></pre></div><ul><li>创建 IPv6 网络</li></ul><p>创建名为 <code>homelab-v6</code> 的 IPv6 网络，并指定子网范围</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker network create --ipv6 --subnet 2001:0DB8::/112 homelab-v6
</span></span></code></pre></div><ul><li>测试验证</li></ul><p>启动一个 busybox 容器，ping 阿里巴巴的 IPv6 DNS 地址 <code>2400:3200::1</code>，发现可以正常访问，说明已经成功开启 IPv6</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run --network<span style=color:#f92672>=</span>homelab-v6 --rm -it busybox ping -6 -c1 2400:3200::1
</span></span><span style=display:flex><span>PING 2400:3200::1 <span style=color:#f92672>(</span>2400:3200::1<span style=color:#f92672>)</span>: <span style=color:#ae81ff>56</span> data bytes
</span></span><span style=display:flex><span><span style=color:#ae81ff>64</span> bytes from 2400:3200::1: seq<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span> ttl<span style=color:#f92672>=</span><span style=color:#ae81ff>117</span> time<span style=color:#f92672>=</span>2040.345 ms
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>--- 2400:3200::1 ping statistics ---
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> packets transmitted, <span style=color:#ae81ff>1</span> packets received, 0% packet loss
</span></span><span style=display:flex><span>round-trip min/avg/max <span style=color:#f92672>=</span> 2040.345/2040.345/2040.345 ms
</span></span></code></pre></div><h2 id=给-bridge-开启-ipv6>给 bridge 开启 IPv6</h2><p>给 bridge 开启 IPv6 相当于默认给所有没有指定网络的容器都开启了 IPv6；此时需要在配置文件中指定 IPv6 子网范围</p><ul><li>修改配置</li></ul><p>修改 <code>/etc/docker/daemon.json</code> 文件，添加以下内容：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;ipv6&#34;</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;fixed-cidr-v6&#34;</span>: <span style=color:#e6db74>&#34;2001:db8:1::/64&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;experimental&#34;</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;ip6tables&#34;</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li>重启 Docker</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl restart docker
</span></span></code></pre></div><ul><li>测试验证</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run --network<span style=color:#f92672>=</span>bridge --rm -it busybox ping -6 -c1 2400:3200::1
</span></span><span style=display:flex><span>PING 2400:3200::1 <span style=color:#f92672>(</span>2400:3200::1<span style=color:#f92672>)</span>: <span style=color:#ae81ff>56</span> data bytes
</span></span><span style=display:flex><span><span style=color:#ae81ff>64</span> bytes from 2400:3200::1: seq<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span> ttl<span style=color:#f92672>=</span><span style=color:#ae81ff>117</span> time<span style=color:#f92672>=</span>7.906 ms
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>--- 2400:3200::1 ping statistics ---
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> packets transmitted, <span style=color:#ae81ff>1</span> packets received, 0% packet loss
</span></span><span style=display:flex><span>round-trip min/avg/max <span style=color:#f92672>=</span> 7.906/7.906/7.906 ms
</span></span></code></pre></div><h2 id=macvlan-网络开启-ipv6>macvlan 网络开启 IPv6</h2><p>macvlan 网络 IPv6 和给特定的网络开启 IPv6 一样，在创建网络的时候指定相应的 CIDR 和网关地址即可</p><ul><li>创建网络</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker network create -d macvlan <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --subnet<span style=color:#f92672>=</span>192.168.2.0/24 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --gateway<span style=color:#f92672>=</span>192.168.2.1 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --subnet<span style=color:#f92672>=</span>fd00::/80 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --gateway<span style=color:#f92672>=</span>fd00::1 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --ipv6 -o parent<span style=color:#f92672>=</span>eth0 homelab-macvlan
</span></span></code></pre></div><ul><li>使用</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;3&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>networks</span>:
</span></span><span style=display:flex><span>   <span style=color:#f92672>homelab-macvlan</span>:
</span></span><span style=display:flex><span>     <span style=color:#f92672>external</span>:
</span></span><span style=display:flex><span>       <span style=color:#f92672>name</span>: <span style=color:#ae81ff>homelab-macvlan</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>coredns</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>alpine</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>alpine</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>command</span>: <span style=color:#ae81ff>ping -6 -c100 2400:3200::1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>networks</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>homelab-macvlan</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>ipv4_address</span>: <span style=color:#ae81ff>192.168.2.249</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>ipv6_address</span>: <span style=color:#ae81ff>fd00::2</span>
</span></span></code></pre></div><ul><li>测试</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker-compose up
</span></span><span style=display:flex><span>Starting alpine ... <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>Attaching to alpine
</span></span><span style=display:flex><span>alpine     | PING 2400:3200::1 <span style=color:#f92672>(</span>2400:3200::1<span style=color:#f92672>)</span>: <span style=color:#ae81ff>56</span> data bytes
</span></span><span style=display:flex><span>alpine     | <span style=color:#ae81ff>64</span> bytes from 2400:3200::1: seq<span style=color:#f92672>=</span><span style=color:#ae81ff>4</span> ttl<span style=color:#f92672>=</span><span style=color:#ae81ff>119</span> time<span style=color:#f92672>=</span>6.293 ms
</span></span><span style=display:flex><span>alpine     | <span style=color:#ae81ff>64</span> bytes from 2400:3200::1: seq<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span> ttl<span style=color:#f92672>=</span><span style=color:#ae81ff>119</span> time<span style=color:#f92672>=</span>6.301 ms
</span></span></code></pre></div><h2 id=参考文档>参考文档</h2><ul><li><a href=https://docs.docker.com/config/daemon/ipv6/>Enable IPv6 support</a></li></ul></section><div class=paginator><a class=prev href=https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8%E5%AE%B6%E5%BA%AD%E5%AE%BD%E5%B8%A6%E5%85%AC%E7%BD%91-ipv6-%E8%87%AA%E5%BB%BA-tailscale-%E7%9A%84-derp-%E8%8A%82%E7%82%B9/><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M9.94496 9C9.28897 9.61644 7.63215 10.997 6.04814 11.7966 5.98257 11.8297 5.98456 11.9753 6.05061 12.0063c1.00435.4716 2.8788 1.9201 3.89435 2.9937M6.44444 11.9667C8.86549 12.0608 14 12 16 11" stroke="currentcolor" stroke-linecap="round"/></svg>
<span>使用家庭宽带公网 IPV6 自建 Tailscale 的 DERP 节点</span></a>
<a class=next href=https://blog.hellowood.dev/posts/ubuntu-22-%E7%8E%AF%E5%A2%83%E5%88%9D%E5%A7%8B%E5%8C%96/><span>Ubuntu 22 环境初始化</span><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M12.055 9C12.711 9.61644 14.3679 10.997 15.9519 11.7966 16.0174 11.8297 16.0154 11.9753 15.9494 12.0063 14.945 12.4779 13.0706 13.9264 12.055 15m3.5006-3.0333C13.1345 12.0608 8 12 6 11" stroke="currentcolor" stroke-linecap="round"/></svg></a></div></article></div><footer class=footer><p>&copy; 2024 <a href=https://blog.hellowood.dev/>HelloWood</a>
Powered by
<a href=https://gohugo.io/ rel=noopener target=_blank data-umami-event=to-hugo>Hugo️️</a>
<a href=https://github.com/guangzhengli/hugo-theme-ladder rel=noopener target=_blank data-umami-event=to-ladder>Ladder</a>
️</p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g data-umami-event=top-link><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M10.5376 22.7916C11.0152 22.7207 22.5795 21.1781 22.0978 10.4211 22.0536 9.43274 21.9303 8.53367 21.7387 7.71865M10.5376 22.7916C16.876 22.3728 20.0969 19.8899 21.5383 16.9142M10.5376 22.7916C9.7707 22.9055 8.97982 22.8964 8.19743 22.7725M21.7387 7.71865C21.4988 6.69828 21.1518 5.80967 20.7188 5.04257m1.0199 2.67608C22.6022 10.1105 23.0542 13.7848 21.5383 16.9142M20.7188 5.04257c-3.5504-6.28886-12.88753-4.410077-16.44303.0C2.88063 6.77451-.0433281 11.1668 1.38159 16.6571c.89322 3.4417 3.7911 5.6365 6.81584 6.1154M20.7188 5.04257c1.3509 1.89783 3.3111 6.34223 1.6353 10.37273M21.5383 16.9142C21.8737 16.4251 22.1428 15.9235 22.3541 15.4153M8.19743 22.7725C12.1971 23.4683 20.6281 22.971 22.3541 15.4153M14 10.945C13.3836 10.289 12.003 8.63215 11.2034 7.04814 11.1703 6.98257 11.0247 6.98456 10.9937 7.05061 10.5221 8.05496 9.07362 9.92941 8 10.945m3.0333-3.50056C10.9392 9.86549 11 15 12 17" stroke="currentcolor" stroke-linecap="round"/></svg>
</a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function n(){t.innerHTML="Copied",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),n();return}const s=document.createRange();s.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(s);try{document.execCommand("copy"),n()}catch{}o.removeRange(s)}),e.parentNode.appendChild(t)})</script></main></body><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".blog-content img"));images.forEach(e=>{mediumZoom(e,{margin:10,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.5)"})})</script><script src=/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin=anonymous defer></script></html>