<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D;--font-size:1.1rem}</style><title>在服务器部署 Docker 镜像代理服务 Distribution Registry</title><meta name=description content="使用 Docker 部署服务的时候，Docker 官方镜像时常拉取失败，第三方的镜像仓库同样不稳定，在多次遇到问题后最终选择在海外的 VPS 上自己搭建 Docker 镜像代理服务，提升拉取镜像的成功率和速度
镜像代理使用 CNCF 的 Distribution Registry 项目搭建，使用 Docker …"><meta name=keywords content='blog,hugo,Docker,HomeLab'><meta property="og:url" content="https://blog.hellowood.dev/posts/%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2-docker-%E9%95%9C%E5%83%8F%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1-distribution-registry/"><meta property="og:type" content="website"><meta property="og:title" content="在服务器部署 Docker 镜像代理服务 Distribution Registry"><meta property="og:description" content="使用 Docker 部署服务的时候，Docker 官方镜像时常拉取失败，第三方的镜像仓库同样不稳定，在多次遇到问题后最终选择在海外的 VPS 上自己搭建 Docker 镜像代理服务，提升拉取镜像的成功率和速度
镜像代理使用 CNCF 的 Distribution Registry 项目搭建，使用 Docker …"><meta property="og:image" content="https://blog.hellowood.dev/images/avatar.webp"><meta property="og:image:secure_url" content="https://blog.hellowood.dev/images/avatar.webp"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="在服务器部署 Docker 镜像代理服务 Distribution Registry"><meta name=twitter:description content="使用 Docker 部署服务的时候，Docker 官方镜像时常拉取失败，第三方的镜像仓库同样不稳定，在多次遇到问题后最终选择在海外的 VPS 上自己搭建 Docker 镜像代理服务，提升拉取镜像的成功率和速度
镜像代理使用 CNCF 的 Distribution Registry 项目搭建，使用 Docker …"><meta property="twitter:domain" content="https://blog.hellowood.dev/posts/%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2-docker-%E9%95%9C%E5%83%8F%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1-distribution-registry/"><meta property="twitter:url" content="https://blog.hellowood.dev/posts/%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2-docker-%E9%95%9C%E5%83%8F%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1-distribution-registry/"><meta name=twitter:image content="https://blog.hellowood.dev/images/avatar.webp"><link rel=canonical href=https://blog.hellowood.dev/posts/%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2-docker-%E9%95%9C%E5%83%8F%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1-distribution-registry/><link rel=stylesheet type=text/css href=/css/normalize.min.css media=print><link rel=stylesheet type=text/css href=/css/main.min.css><link id=dark-theme rel=stylesheet href=/css/dark.min.css><script src=/js/bundle.min.7136b4abac7b277aba8bc933917f4602d39a5c44f5590be687244bc86ef4f162.js integrity="sha256-cTa0q6x7J3q6i8kzkX9GAtOaXET1WQvmhyRLyG708WI="></script><link rel=stylesheet type=text/css href=/css/custom.css><script defer src=https://umami.hellowood.dev/script.js data-website-id=7a9034de-0ce7-4756-942a-829e6cd22301></script><script defer src=https://cloud.umami.is/script.js data-website-id=73ff1c8c-9938-43cf-81af-e77e26b0cca3></script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "b2e481d136dc428c8c96c8673e2a04cf"}'></script><meta name=google-adsense-account content="ca-pub-5709431067036925"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5709431067036925" crossorigin=anonymous></script><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","jtbhx98g62")</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-3MSGPYTHPZ"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3MSGPYTHPZ")</script></head><body><script>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=https://blog.hellowood.dev/><img src=/images/avatar.webp alt=avatar></a></div><div class=nav-title><a class=nav-brand href=https://blog.hellowood.dev/>HelloWood</a></div><div class=nav-links><div class=nav-link><a href=https://blog.hellowood.dev/ aria-label><span data-feather=home></span> Home</a></div><div class=nav-link><a href=https://blog.hellowood.dev/posts/ aria-label><span data-feather=book></span> Posts</a></div><div class=nav-link><a href=https://blog.hellowood.dev/tags/ aria-label><span data-feather=tag></span> Tags</a></div><div class=nav-link><a href=https://github.com/helloworlde aria-label=github><span data-feather=github></span></a></div><div class=nav-link><a href=https://umami.hellowood.dev/share/lab/Blog aria-label=dashboard><span data-feather=pie-chart></span></a></div><div class=nav-link><a href=https://blog.hellowood.dev/index.xml aria-label=rss><span data-feather=rss></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a aria-hidden=true role=switch><span class=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span class="sr-only hamburger-menu-toggle-screen-reader-target">menu</span>
<a aria-checked=false aria-labelledby=hamburger-menu-toggle id=hamburger-menu-toggle-target role=switch><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=https://blog.hellowood.dev/><span data-feather=home></span> Home</a></li><li class=nav-item><a href=https://blog.hellowood.dev/posts/><span data-feather=book></span> Posts</a></li><li class=nav-item><a href=https://blog.hellowood.dev/tags/><span data-feather=tag></span> Tags</a></li><li class=nav-item><a href=https://github.com/helloworlde><span data-feather=github></span></a></li><li class=nav-item><a href=https://umami.hellowood.dev/share/lab/Blog><span data-feather=pie-chart></span></a></li><li class=nav-item><a href=https://blog.hellowood.dev/index.xml><span data-feather=rss></span></a></li><li class="nav-item dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a role=switch><span class=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>在服务器部署 Docker 镜像代理服务 Distribution Registry</h1><small role=doc-subtitle></small><p class=post-date>2025-12-09
| Updated 2025-12-25</p><ul class=post-tags><li class=post-tag><a href=https://blog.hellowood.dev/tags/docker>Docker</a></li><li class=post-tag><a href=https://blog.hellowood.dev/tags/homelab>HomeLab</a></li></ul></div><div class=post-content><p>使用 Docker 部署服务的时候，Docker 官方镜像时常拉取失败，第三方的镜像仓库同样不稳定，在多次遇到问题后最终选择在海外的 VPS 上自己搭建 Docker 镜像代理服务，提升拉取镜像的成功率和速度</p><p>镜像代理使用 CNCF 的 <a href=https://distribution.github.io/distribution/about/>Distribution Registry</a> 项目搭建，使用 Docker Compose 进行部署</p><h2 id=部署-distribution-registry>部署 Distribution Registry</h2><p>一个 Distribution Registry 只能代理一个上游镜像仓库，这里以代理 Docker 官方镜像仓库为例，如果要代理其他仓库，则需要在配置中指定对应的上游后启动多个实例</p><h3 id=配置>配置</h3><ul><li>config.yml</li></ul><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#e06c75>version</span>: <span style=color:#d19a66>0.1</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>storage</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>cache</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>blobdescriptor</span>: <span style=color:#98c379>inmemory</span> <span style=color:#8a93a5;font-style:italic># blob 描述信息缓存到内存</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>filesystem</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>rootdirectory</span>: <span style=color:#98c379>/var/lib/registry</span> <span style=color:#8a93a5;font-style:italic># layer/manifest 等数据存储路径</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>http</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>addr</span>: <span style=color:#d19a66>0.0.0.0</span>:<span style=color:#d19a66>5000</span> <span style=color:#8a93a5;font-style:italic># 监听地址和端口</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>proxy</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>remoteurl</span>: <span style=color:#98c379>https://registry-1.docker.io</span> <span style=color:#8a93a5;font-style:italic># 代理的上游镜像仓库地址</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>username</span>: <span style=color:#98c379>username</span> <span style=color:#8a93a5;font-style:italic># 如果上游仓库需要认证，可以在这里配置用户名和密码</span>
</span></span><span style=display:flex><span>  <span style=color:#e06c75>password</span>: <span style=color:#98c379>password</span>
</span></span></code></pre></div><h3 id=部署>部署</h3><ul><li>docker-compose.yml</li></ul><p>需要将 config.yml 挂载到容器的 <code>/etc/docker/registry/config.yml</code> 路径下</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#e06c75>services</span>:
</span></span><span style=display:flex><span>  <span style=color:#e06c75>docker-registry</span>:
</span></span><span style=display:flex><span>    <span style=color:#e06c75>image</span>: <span style=color:#98c379>registry:2</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>container_name</span>: <span style=color:#98c379>docker-registry</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>restart</span>: <span style=color:#98c379>always</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>volumes</span>:
</span></span><span style=display:flex><span>      - <span style=color:#63c381>&#34;/etc/localtime:/etc/localtime&#34;</span>
</span></span><span style=display:flex><span>      - <span style=color:#63c381>&#34;./data:/var/lib/registry&#34;</span>
</span></span><span style=display:flex><span>      - <span style=color:#63c381>&#34;./config.yml:/etc/docker/registry/config.yml&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#63c381>&#34;5000:5000&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>environment</span>:
</span></span><span style=display:flex><span>      - <span style=color:#98c379>REGISTRY_LOG_LEVEL=warn</span>
</span></span><span style=display:flex><span>      - <span style=color:#98c379>OTEL_TRACES_EXPORTER=none</span>
</span></span></code></pre></div><h3 id=验证镜像仓库>验证镜像仓库</h3><p>启动服务后，通过 Traefix/Nginx/Caddy 等反向代理将 5000 端口映射到域名或 IP 地址上，然后拉取镜像进行验证，如域名是 <code>docker.example.com</code>，则执行如下命令（docker 的一些公共镜像需要添加 <code>library</code> 名称）</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>docker pull docker.example.com/library/nginx:latest
</span></span><span style=display:flex><span>latest: Pulling from library/nginx
</span></span><span style=display:flex><span>1733a4cd5954: Pull <span style=color:#ef8383>complete</span>
</span></span><span style=display:flex><span>5b219a92f92a: Pull <span style=color:#ef8383>complete</span>
</span></span><span style=display:flex><span>ee3a09d2248a: Pull <span style=color:#ef8383>complete</span>
</span></span><span style=display:flex><span>7382b41547b8: Pull <span style=color:#ef8383>complete</span>
</span></span><span style=display:flex><span>9ee60c6c0558: Pull <span style=color:#ef8383>complete</span>
</span></span><span style=display:flex><span>114e699da838: Pull <span style=color:#ef8383>complete</span>
</span></span><span style=display:flex><span>5b5fa0b64d74: Pull <span style=color:#ef8383>complete</span>
</span></span><span style=display:flex><span>Digest: sha256:fb01117203ff38c2f9af91db1a7409459182a37c87cced5cb442d1d8fcc66d19
</span></span><span style=display:flex><span>Status: Downloaded newer image <span style=color:#c678dd>for</span> docker.example.com/library/nginx:latest
</span></span><span style=display:flex><span>docker.example.com/library/nginx:latest
</span></span></code></pre></div><p>registry 的日志如下：</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-shell data-lang=shell><span style=display:flex><span>docker-registry  | 172.20.0.7 - - <span style=color:#c7bf54>[</span>23/Dec/2025:09:19:38 +0800<span style=color:#c7bf54>]</span> <span style=color:#63c381>&#34;GET /v2/ HTTP/1.1&#34;</span> <span style=color:#d19a66>200</span> <span style=color:#d19a66>2</span> <span style=color:#63c381>&#34;&#34;</span> <span style=color:#63c381>&#34;docker/29.1.3 go/go1.25.5 git-commit/fbf3ed2 kernel/6.8.0-87-generic os/linux arch/amd64 UpstreamClient(Docker-Client/29.1.3 \\(linux\\))&#34;</span>
</span></span><span style=display:flex><span>docker-registry  | 172.20.0.7 - - <span style=color:#c7bf54>[</span>23/Dec/2025:09:19:38 +0800<span style=color:#c7bf54>]</span> <span style=color:#63c381>&#34;HEAD /v2/library/nginx/manifests/latest HTTP/1.1&#34;</span> <span style=color:#d19a66>200</span> <span style=color:#d19a66>10229</span> <span style=color:#63c381>&#34;&#34;</span> <span style=color:#63c381>&#34;docker/29.1.3 go/go1.25.5 git-commit/fbf3ed2 kernel/6.8.0-87-generic os/linux arch/amd64 UpstreamClient(Docker-Client/29.1.3 \\(linux\\))&#34;</span>
</span></span><span style=display:flex><span>docker-registry  | 172.20.0.7 - - <span style=color:#c7bf54>[</span>23/Dec/2025:09:19:39 +0800<span style=color:#c7bf54>]</span> <span style=color:#63c381>&#34;GET /v2/library/nginx/manifests/sha256:fb01117203ff38c2f9af91db1a7409459182a37c87cced5cb442d1d8fcc66d19 HTTP/1.1&#34;</span> <span style=color:#d19a66>200</span> <span style=color:#d19a66>10229</span> <span style=color:#63c381>&#34;&#34;</span> <span style=color:#63c381>&#34;docker/29.1.3 go/go1.25.5 git-commit/fbf3ed2 kernel/6.8.0-87-generic os/linux arch/amd64 UpstreamClient(Docker-Client/29.1.3 \\(linux\\))&#34;</span>
</span></span><span style=display:flex><span>docker-registry  | 172.20.0.7 - - <span style=color:#c7bf54>[</span>23/Dec/2025:09:19:39 +0800<span style=color:#c7bf54>]</span> <span style=color:#63c381>&#34;GET /v2/library/nginx/manifests/sha256:547c8c6863a88abd0c987779413489ff0e9a693c24d2d88ce9eb8515e0ae0335 HTTP/1.1&#34;</span> <span style=color:#d19a66>200</span> <span style=color:#d19a66>2290</span> <span style=color:#63c381>&#34;&#34;</span> <span style=color:#63c381>&#34;docker/29.1.3 go/go1.25.5 git-commit/fbf3ed2 kernel/6.8.0-87-generic os/linux arch/amd64 UpstreamClient(Docker-Client/29.1.3 \\(linux\\))&#34;</span>
</span></span><span style=display:flex><span>docker-registry  | 172.20.0.7 - - <span style=color:#c7bf54>[</span>23/Dec/2025:09:19:40 +0800<span style=color:#c7bf54>]</span> <span style=color:#63c381>&#34;GET /v2/library/nginx/blobs/sha256:ee3a09d2248a2df379f9868e31e578994110589e1f118a98396aeebcc9316b8d HTTP/1.1&#34;</span> <span style=color:#d19a66>200</span> <span style=color:#d19a66>628</span> <span style=color:#63c381>&#34;&#34;</span> <span style=color:#63c381>&#34;docker/29.1.3 go/go1.25.5 git-commit/fbf3ed2 kernel/6.8.0-87-generic os/linux arch/amd64 UpstreamClient(Docker-Client/29.1.3 \\(linux\\))&#34;</span>
</span></span><span style=display:flex><span>docker-registry  | 172.20.0.7 - - <span style=color:#c7bf54>[</span>23/Dec/2025:09:19:40 +0800<span style=color:#c7bf54>]</span> <span style=color:#63c381>&#34;GET /v2/library/nginx/blobs/sha256:576306625d797a52045ad158b601d5a011f7a7f16e4ccc909809f02dd6047c37 HTTP/1.1&#34;</span> <span style=color:#d19a66>200</span> <span style=color:#d19a66>8734</span> <span style=color:#63c381>&#34;&#34;</span> <span style=color:#63c381>&#34;docker/29.1.3 go/go1.25.5 git-commit/fbf3ed2 kernel/6.8.0-87-generic os/linux arch/amd64 UpstreamClient(Docker-Client/29.1.3 \\(linux\\))&#34;</span>
</span></span><span style=display:flex><span>docker-registry  | 172.20.0.7 - - <span style=color:#c7bf54>[</span>23/Dec/2025:09:19:41 +0800<span style=color:#c7bf54>]</span> <span style=color:#63c381>&#34;GET /v2/library/nginx/blobs/sha256:7382b41547b8efa59d4103ac9610d7e359eb989e675faf7e0d3e7445496bba94 HTTP/1.1&#34;</span> <span style=color:#d19a66>200</span> <span style=color:#d19a66>953</span> <span style=color:#63c381>&#34;&#34;</span> <span style=color:#63c381>&#34;docker/29.1.3 go/go1.25.5 git-commit/fbf3ed2 kernel/6.8.0-87-generic os/linux arch/amd64 UpstreamClient(Docker-Client/29.1.3 \\(linux\\))&#34;</span>
</span></span><span style=display:flex><span>docker-registry  | 172.20.0.7 - - <span style=color:#c7bf54>[</span>23/Dec/2025:09:19:42 +0800<span style=color:#c7bf54>]</span> <span style=color:#63c381>&#34;GET /v2/library/nginx/blobs/sha256:9ee60c6c0558552ff0a2548f4b6941e4aa276937fb1cd8c76a94e73fe75d69ba HTTP/1.1&#34;</span> <span style=color:#d19a66>200</span> <span style=color:#d19a66>402</span> <span style=color:#63c381>&#34;&#34;</span> <span style=color:#63c381>&#34;docker/29.1.3 go/go1.25.5 git-commit/fbf3ed2 kernel/6.8.0-87-generic os/linux arch/amd64 UpstreamClient(Docker-Client/29.1.3 \\(linux\\))&#34;</span>
</span></span><span style=display:flex><span>docker-registry  | 172.20.0.7 - - <span style=color:#c7bf54>[</span>23/Dec/2025:09:19:40 +0800<span style=color:#c7bf54>]</span> <span style=color:#63c381>&#34;GET /v2/library/nginx/blobs/sha256:5b219a92f92aeb674b0b29811b447d120ce69b41d21cfca56f90ad323aff91a2 HTTP/1.1&#34;</span> <span style=color:#d19a66>200</span> <span style=color:#d19a66>29992957</span> <span style=color:#63c381>&#34;&#34;</span> <span style=color:#63c381>&#34;docker/29.1.3 go/go1.25.5 git-commit/fbf3ed2 kernel/6.8.0-87-generic os/linux arch/amd64 UpstreamClient(Docker-Client/29.1.3 \\(linux\\))&#34;</span>
</span></span><span style=display:flex><span>docker-registry  | 172.20.0.7 - - <span style=color:#c7bf54>[</span>23/Dec/2025:09:19:40 +0800<span style=color:#c7bf54>]</span> <span style=color:#63c381>&#34;GET /v2/library/nginx/blobs/sha256:1733a4cd59540b3470ff7a90963bcdea5b543279dd6bdaf022d7883fdad221e5 HTTP/1.1&#34;</span> <span style=color:#d19a66>200</span> <span style=color:#d19a66>29776496</span> <span style=color:#63c381>&#34;&#34;</span> <span style=color:#63c381>&#34;docker/29.1.3 go/go1.25.5 git-commit/fbf3ed2 kernel/6.8.0-87-generic os/linux arch/amd64 UpstreamClient(Docker-Client/29.1.3 \\(linux\\))&#34;</span>
</span></span><span style=display:flex><span>docker-registry  | 172.20.0.7 - - <span style=color:#c7bf54>[</span>23/Dec/2025:09:19:43 +0800<span style=color:#c7bf54>]</span> <span style=color:#63c381>&#34;GET /v2/library/nginx/blobs/sha256:114e699da838b7a4a5dd75807233341d8f9a392ee2360d4bfe2b0680df4965f8 HTTP/1.1&#34;</span> <span style=color:#d19a66>200</span> <span style=color:#d19a66>1207</span> <span style=color:#63c381>&#34;&#34;</span> <span style=color:#63c381>&#34;docker/29.1.3 go/go1.25.5 git-commit/fbf3ed2 kernel/6.8.0-87-generic os/linux arch/amd64 UpstreamClient(Docker-Client/29.1.3 \\(linux\\))&#34;</span>
</span></span><span style=display:flex><span>docker-registry  | 172.20.0.7 - - <span style=color:#c7bf54>[</span>23/Dec/2025:09:19:43 +0800<span style=color:#c7bf54>]</span> <span style=color:#63c381>&#34;GET /v2/library/nginx/blobs/sha256:5b5fa0b64d74b2ce9915f89c1be1b98a3400a7ca4fb4654cec353db54342c2a9 HTTP/1.1&#34;</span> <span style=color:#d19a66>200</span> <span style=color:#d19a66>1397</span> <span style=color:#63c381>&#34;&#34;</span> <span style=color:#63c381>&#34;docker/29.1.3 go/go1.25.5 git-commit/fbf3ed2 kernel/6.8.0-87-generic os/linux arch/amd64 UpstreamClient(Docker-Client/29.1.3 \\(linux\\))&#34;</span>
</span></span></code></pre></div><h2 id=docker-配置-mirror>Docker 配置 mirror</h2><p>在 <code>/etc/docker/daemon.json</code> 中添加如下内容</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#e06c75>&#34;registry-mirrors&#34;</span>: [<span style=color:#63c381>&#34;https://docker.example.com&#34;</span>]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>如果不能提供 HTTPS 服务，可以使用如下配置忽略证书验证（不推荐）</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#e06c75>&#34;insecure-registries&#34;</span>: [<span style=color:#63c381>&#34;docker.example.com:5000&#34;</span>]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>然后重启 Docker 服务</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl daemon-reload
</span></span><span style=display:flex><span>systemctl restart docker
</span></span></code></pre></div><h2 id=参考文档>参考文档</h2><ul><li><a href=https://distribution.github.io/distribution/about/configuration/>Configuring a registry</a></li></ul></div><div class=prev-next></div><svg id="btt-button" class="arrow-logo" height="1em" viewBox="0 0 384 512" onclick="scrollToTop()" title="Go to top"><path d="M177 159.7l136 136c9.4 9.4 9.4 24.6.0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9.0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9.0L7 329.7c-9.4-9.4-9.4-24.6.0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"/></svg>
<script>let backToTopButton=document.getElementById("btt-button");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?backToTopButton.style.display="block":backToTopButton.style.display="none"}function scrollToTop(){window.scrollTo(0,0)}</script><div id=comments><script src=https://utteranc.es/client.js repo=helloworlde/helloworlde.github.io issue-term=title theme=github-light crossorigin=anonymous async></script></div></div></main><footer class=footer><span>&copy; 2025 hellowood.dev</span>
<span>Made with &#10084;&#65039; using <a target=_blank href=https://github.com/gokarna-theme/gokarna-hugo>Gokarna</a></span></footer></body></html>