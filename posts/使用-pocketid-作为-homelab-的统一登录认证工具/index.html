<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D;--font-size:1.1rem}</style><title>使用 PocketID 作为 HomeLab 的统一登录认证工具</title><meta name=description content="PocketID 是一个轻量、只支持通行密钥(passkey)的用户管理系统，支持 OIDC 协议，和 GitHub/Google/Microsoft 等一样可以作为身份认证提供者；同时可以给 Tinyauth/Grafana/Memos/Beszel 等 HomeLab 服务提供 OIDC …"><meta name=keywords content='blog,hugo,Caddy,HomeLab,Gateway,Auth'><meta property="og:url" content="https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8-pocketid-%E4%BD%9C%E4%B8%BA-homelab-%E7%9A%84%E7%BB%9F%E4%B8%80%E7%99%BB%E5%BD%95%E8%AE%A4%E8%AF%81%E5%B7%A5%E5%85%B7/"><meta property="og:type" content="website"><meta property="og:title" content="使用 PocketID 作为 HomeLab 的统一登录认证工具"><meta property="og:description" content="PocketID 是一个轻量、只支持通行密钥(passkey)的用户管理系统，支持 OIDC 协议，和 GitHub/Google/Microsoft 等一样可以作为身份认证提供者；同时可以给 Tinyauth/Grafana/Memos/Beszel 等 HomeLab 服务提供 OIDC …"><meta property="og:image" content="https://blog.hellowood.dev/images/avatar.webp"><meta property="og:image:secure_url" content="https://blog.hellowood.dev/images/avatar.webp"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="使用 PocketID 作为 HomeLab 的统一登录认证工具"><meta name=twitter:description content="PocketID 是一个轻量、只支持通行密钥(passkey)的用户管理系统，支持 OIDC 协议，和 GitHub/Google/Microsoft 等一样可以作为身份认证提供者；同时可以给 Tinyauth/Grafana/Memos/Beszel 等 HomeLab 服务提供 OIDC …"><meta property="twitter:domain" content="https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8-pocketid-%E4%BD%9C%E4%B8%BA-homelab-%E7%9A%84%E7%BB%9F%E4%B8%80%E7%99%BB%E5%BD%95%E8%AE%A4%E8%AF%81%E5%B7%A5%E5%85%B7/"><meta property="twitter:url" content="https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8-pocketid-%E4%BD%9C%E4%B8%BA-homelab-%E7%9A%84%E7%BB%9F%E4%B8%80%E7%99%BB%E5%BD%95%E8%AE%A4%E8%AF%81%E5%B7%A5%E5%85%B7/"><meta name=twitter:image content="https://blog.hellowood.dev/images/avatar.webp"><link rel=canonical href=https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8-pocketid-%E4%BD%9C%E4%B8%BA-homelab-%E7%9A%84%E7%BB%9F%E4%B8%80%E7%99%BB%E5%BD%95%E8%AE%A4%E8%AF%81%E5%B7%A5%E5%85%B7/><link rel=stylesheet type=text/css href=/css/normalize.min.css media=print><link rel=stylesheet type=text/css href=/css/main.min.css><link id=dark-theme rel=stylesheet href=/css/dark.min.css><script src=/js/bundle.min.70293498aa96b2dbb767ec11a622eb2266d8fc37a0fff88233a82952e3c72b15.js integrity="sha256-cCk0mKqWstu3Z+wRpiLrImbY/Deg//iCM6gpUuPHKxU="></script><link rel=stylesheet type=text/css href=/css/custom.css><script defer src=https://umami.hellowood.dev/script.js data-website-id=7a9034de-0ce7-4756-942a-829e6cd22301></script><script defer src=https://cloud.umami.is/script.js data-website-id=73ff1c8c-9938-43cf-81af-e77e26b0cca3></script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "b2e481d136dc428c8c96c8673e2a04cf"}'></script><meta name=google-adsense-account content="ca-pub-5709431067036925"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5709431067036925" crossorigin=anonymous></script><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","jtbhx98g62")</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-3MSGPYTHPZ"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3MSGPYTHPZ")</script></head><body><script>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=https://blog.hellowood.dev/><img src=/images/avatar.webp alt=avatar></a></div><div class=nav-title><a class=nav-brand href=https://blog.hellowood.dev/>HelloWood</a></div><div class=nav-links><div class=nav-link><a href=https://blog.hellowood.dev/ aria-label><span data-feather=home></span> Home</a></div><div class=nav-link><a href=https://blog.hellowood.dev/posts/ aria-label><span data-feather=book></span> Posts</a></div><div class=nav-link><a href=https://blog.hellowood.dev/tags/ aria-label><span data-feather=tag></span> Tags</a></div><div class=nav-link><a href=https://github.com/helloworlde aria-label=github><span data-feather=github></span></a></div><div class=nav-link><a href=https://umami.hellowood.dev/share/lab/Blog aria-label=dashboard><span data-feather=pie-chart></span></a></div><div class=nav-link><a href=https://blog.hellowood.dev/index.xml aria-label=rss><span data-feather=rss></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a aria-hidden=true role=switch><span class=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span class="sr-only hamburger-menu-toggle-screen-reader-target">menu</span>
<a aria-checked=false aria-labelledby=hamburger-menu-toggle id=hamburger-menu-toggle-target role=switch><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=https://blog.hellowood.dev/><span data-feather=home></span> Home</a></li><li class=nav-item><a href=https://blog.hellowood.dev/posts/><span data-feather=book></span> Posts</a></li><li class=nav-item><a href=https://blog.hellowood.dev/tags/><span data-feather=tag></span> Tags</a></li><li class=nav-item><a href=https://github.com/helloworlde><span data-feather=github></span></a></li><li class=nav-item><a href=https://umami.hellowood.dev/share/lab/Blog><span data-feather=pie-chart></span></a></li><li class=nav-item><a href=https://blog.hellowood.dev/index.xml><span data-feather=rss></span></a></li><li class="nav-item dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a role=switch><span class=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>使用 PocketID 作为 HomeLab 的统一登录认证工具</h1><small role=doc-subtitle></small><p class=post-date>2025-08-31
| Updated 2025-09-06</p><ul class=post-tags><li class=post-tag><a href=https://blog.hellowood.dev/tags/caddy>Caddy</a></li><li class=post-tag><a href=https://blog.hellowood.dev/tags/homelab>HomeLab</a></li><li class=post-tag><a href=https://blog.hellowood.dev/tags/gateway>Gateway</a></li><li class=post-tag><a href=https://blog.hellowood.dev/tags/auth>Auth</a></li></ul></div><div class=post-content><p><a href=https://pocket-id.org/>PocketID</a> 是一个轻量、只支持通行密钥(passkey)的用户管理系统，支持 OIDC 协议，和 GitHub/Google/Microsoft 等一样可以作为身份认证提供者；同时可以给 Tinyauth/Grafana/Memos/Beszel 等 HomeLab 服务提供 OIDC 的身份认证</p><p><img src=https://img.hellowood.dev/picture/homelab-caddy-auth-pocketid-homepage.png alt=homelab-caddy-auth-pocketid-homepage.png loading=lazy></p><p>PocketID 只支持通行密钥(passkey) 的方式进行登录，因此要求 PocketID 服务的访问地址必须是 HTTPS 的；如果是在本地部署，可以使用 Cloudflare Tunnel 转发，或者通过 Split DNS + Caddy 代理的方式进行访问；关于 Split DNS 可以参考 <a href=https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8-split-dns-%E6%89%93%E9%80%A0-homelab-%E5%86%85%E7%BD%91%E5%92%8C%E5%85%AC%E7%BD%91%E4%B8%80%E8%87%B4%E7%9A%84%E8%AE%BF%E9%97%AE%E4%BD%93%E9%AA%8C/>使用 Split DNS 打造 HomeLab 内网和公网一致的访问体验</a></p><p>以 PocketID 和 Tinyauth 为例，使用 PocketID 作为统一的登录认证工具，配合 Tinyauth 保护 HomeLab 内网的其他服务</p><p>关于 Caddy 和 Tinyauth 的安装使用可以参考<a href=https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8-caddy-%E4%BD%9C%E4%B8%BA-homelab-%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E7%9A%84%E4%BB%A3%E7%90%86/>使用 Caddy 作为 HomeLab 内网服务的代理</a> 和 <a href=https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8-tinyauth-%E4%BD%9C%E4%B8%BA-caddy-%E7%9A%84%E9%89%B4%E6%9D%83%E5%B7%A5%E5%85%B7%E4%BF%9D%E6%8A%A4-homelab-%E5%85%B6%E4%BB%96%E6%9C%8D%E5%8A%A1/>使用 Tinyauth 作为 Caddy 的鉴权工具保护 HomeLab 其他服务</a></p><h2 id=部署-pocketid>部署 PocketID</h2><p>PocketID 的数据支持 SQLite 和 PostgreSQL 两种方式进行保存，因为用户和 OIDC 客户端信息会影响到所有相关使用 PocketID 的服务，因此强烈建议使用 PostgreSQL 保存数据，并对数据进行定期、多副本备份</p><h3 id=创建-pg-数据库>创建 PG 数据库</h3><p>PG 数据库可以使用 docker 部署，或者使用 <a href=https://supabase.com/>Supabase</a> 等 SaaS 服务</p><ul><li>创建 pocketid 数据库</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>DATABASE</span> pocketid;
</span></span></code></pre></div><ul><li>创建 pocketid 用户，并授权</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>USER</span> pocketid <span style=color:#66d9ef>WITH</span> PASSWORD <span style=color:#e6db74>&#39;123456&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>GRANT</span> <span style=color:#66d9ef>ALL</span> <span style=color:#66d9ef>PRIVILEGES</span> <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>DATABASE</span> pocketid <span style=color:#66d9ef>TO</span> pocketid;
</span></span><span style=display:flex><span><span style=color:#66d9ef>GRANT</span> <span style=color:#66d9ef>ALL</span> <span style=color:#66d9ef>PRIVILEGES</span> <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>SCHEMA</span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>TO</span> pocketid;
</span></span><span style=display:flex><span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>PRIVILEGES</span> <span style=color:#66d9ef>IN</span> <span style=color:#66d9ef>SCHEMA</span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>GRANT</span> <span style=color:#66d9ef>ALL</span> <span style=color:#66d9ef>PRIVILEGES</span> <span style=color:#66d9ef>ON</span> TABLES <span style=color:#66d9ef>TO</span> pocketid;
</span></span></code></pre></div><h3 id=部署-pocketid-1>部署 PocketID</h3><ul><li>生成加密的 KEY</li></ul><p>可以使用下面的命令生成一个 32 位的随机字符串，用于加密数据</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>openssl rand -base64 <span style=color:#ae81ff>32</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jen/Xz9GUbrS6BXkj+EcFjri6ZCRzHoO8+rPkRbef3Q<span style=color:#f92672>=</span>
</span></span></code></pre></div><ul><li>docker-compose.yaml</li></ul><p>如果不使用 PG 数据库，可以将 <code>DB_PROVIDER</code> 设置为 <code>sqlite</code>，这样会在 <code>./data</code> 目录下生成 <code>pocket-id.db</code> 的 SQLite 数据库文件</p><p>另外需要注意的是 passkey 设计只支持 HTTPS 的访问，因此 <code>APP_URL</code> 需要设置为 HTTPS 的地址，并且证书必须是可信的，否则其他服务无法使用；可以通过 mkcert 生成证书并信任，或者使用 Cloudflare Tunnel 等反向代理工具代理</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>pocket-id</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>ghcr.io/pocket-id/pocket-id</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>pocketid</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>hostname</span>: <span style=color:#ae81ff>pocketid</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>unless-stopped</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>1411</span>:<span style=color:#ae81ff>1411</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;./data:/app/data&#34;</span> <span style=color:#75715e># 用于保存 SQLite 数据库文件、图片、GEO 信息</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>extra_hosts</span>:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;host.docker.internal:host-gateway&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>healthcheck</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>test</span>: [<span style=color:#e6db74>&#34;CMD&#34;</span>, <span style=color:#e6db74>&#34;/app/pocket-id&#34;</span>, <span style=color:#e6db74>&#34;healthcheck&#34;</span>]
</span></span><span style=display:flex><span>      <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>1m30s</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>timeout</span>: <span style=color:#ae81ff>5s</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>retries</span>: <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>start_period</span>: <span style=color:#ae81ff>10s</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>APP_URL=https://pocketid.example.com</span> <span style=color:#75715e># PocketID 的访问地址</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>TRUST_PROXY=true</span> <span style=color:#75715e># 如果通过反向代理访问，需要设置为 true</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>ENCRYPTION_KEY=jen/Xz9GUbrS6BXkj+EcFjri6ZCRzHoO8+rPkRbef3Q=</span> <span style=color:#75715e># 上面生成的加密 KEY</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>ALLOW_USER_SIGNUPS=withToken</span> <span style=color:#75715e># 仅允许邀请的用户注册</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>DB_PROVIDER=postgres</span> <span style=color:#75715e># 数据库类型，支持 sqlite 和 postgres</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>DB_CONNECTION_STRING=postgres://pocketid:123456@100.0.0.2:5432/pocketid?sslmode=disable</span> <span style=color:#75715e># PostgreSQL 的连接字符串</span>
</span></span></code></pre></div><p>然后启动 PocketID，会自动创建数据表，等待启动成功后访问 <a href=https://pocketid.example.com>https://pocketid.example.com</a> 即可看到 PocketID 的登录页面</p><p><img src=https://img.hellowood.dev/picture/homelab-caddy-auth-pocketid-homepage.png alt=homelab-caddy-auth-pocketid-homepage.png loading=lazy></p><h3 id=配置-pocketid>配置 PocketID</h3><p>第一次使用需要先访问 <a href=https://pocketid.example.com/setup>https://pocketid.example.com/setup</a> 进行管理员账号的创建</p><p><img src=https://img.hellowood.dev/picture/homelab-caddy-auth-pocketid-setup-page.png alt=homelab-caddy-auth-pocketid-setup-page.png loading=lazy></p><p>然后添加一个 passkey，用于后续登录:</p><p><img src=https://img.hellowood.dev/picture/homelab-caddy-auth-pocketid-add-passkey.png alt=homelab-caddy-auth-pocketid-add-passkey.png loading=lazy></p><p>需要注意的是，如果这里不创建，后续登录只能进入容器创建登录码的方式进行登录，参考 <a href=https://pocket-id.org/docs/troubleshooting/account-recovery>Account Recovery</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker compose exec pocket-id /app/pocket-id one-time-access-token admin
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>2025/09/02 01:36:24 INFO Connected to database provider<span style=color:#f92672>=</span>sqlite
</span></span><span style=display:flex><span>A one-time access token valid <span style=color:#66d9ef>for</span> <span style=color:#ae81ff>1</span> hour has been created <span style=color:#66d9ef>for</span> <span style=color:#e6db74>&#34;admin&#34;</span>.
</span></span><span style=display:flex><span>Use the following URL to sign in once: https://pocketid.example.com/lc/lAuSRYzsLsqUUFNf
</span></span></code></pre></div><p>启动后就可以通过访问上面的 URL 进行登录，登录成功后会看到 PocketID 的管理页面</p><p><img src=https://img.hellowood.dev/picture/homelab-caddy-auth-pocketid-homepage.png alt=homelab-caddy-auth-pocketid-homepage.png loading=lazy></p><h2 id=配置-oidc-客户端>配置 OIDC 客户端</h2><p>以 Memos 为例，将 PocketID 作为 Memos 的身份认证提供者；其他服务的配置类似，可以参考 <a href=https://pocket-id.org/docs/client-examples>Client Examples</a></p><h3 id=添加-oidc-客户端>添加 OIDC 客户端</h3><p>在 PocketID 的管理页面，选择 OIDC 客户端，然后点击添加 OIDC 客户端创建一个新的客户端</p><p><img src=https://img.hellowood.dev/picture/homelab-caddy-auth-pocketid-add-oidc-client.png alt=homelab-caddy-auth-pocketid-add-oidc-client.png loading=lazy></p><p>名称填写 Memos，重定向 URL 填写 Memos 的回调地址，比如 <code>https://memos.example.com/auth/callback</code>，然后保存；会生成对应的客户端ID和密钥，点击详情会显示需要在 Memos 中配置的参数</p><p><img src=https://img.hellowood.dev/picture/homelab-caddy-auth-pocketid-add-oidc-client-detail.png alt=homelab-caddy-auth-pocketid-add-oidc-client-detail.png loading=lazy></p><h3 id=配置-memos-使用-pocketid-进行登录>配置 Memos 使用 PocketID 进行登录</h3><p>在 Memos 的设置 - 单点登录中选择创建，模板选择 Custom，输入对应的 PocketID 生成的客户端ID、密钥、授权地址、令牌地址、用户信息地址等参数，保存后即可使用 PocketID 进行登录；需要注意的是回调地址和 PocketID 的地址都需要是 HTTPS 的，否则会导致登录失败</p><p><img src=https://img.hellowood.dev/picture/homelab-caddy-auth-pocketid-memos-add-pocketid.png alt=homelab-caddy-auth-pocketid-memos-add-pocketid.png loading=lazy></p><p><img src=https://img.hellowood.dev/picture/homelab-caddy-auth-pocketid-memos-login-by-pocketid.png alt=homelab-caddy-auth-pocketid-memos-login-by-pocketid.png loading=lazy></p><h2 id=pocketid-其他配置>PocketID 其他配置</h2><p>PokcetID 还有一些环境变量可以进行配置，用于优化使用体验和安全，可以参考 <a href=https://pocket-id.org/docs/configuration/environment-variables>Environment Variables</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>APP_URL=https://pocketid.example.com</span> <span style=color:#75715e># PocketID 的访问地址</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>TRUST_PROXY=true</span> <span style=color:#75715e># 如果通过反向代理访问，需要设置为 true</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>ENCRYPTION_KEY=jen/Xz9GUbrS6BXkj+EcFjri6ZCRzHoO8+rPkRbef3Q=</span> <span style=color:#75715e># 上面生成的加密 KEY</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>ALLOW_USER_SIGNUPS=withToken</span> <span style=color:#75715e># 仅允许邀请的用户注册</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>DB_PROVIDER=postgres</span> <span style=color:#75715e># 数据库类型，支持 sqlite 和 postgres</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>DB_CONNECTION_STRING=postgres://pocketid:123456@100.0.0.2:5432/pocketid?sslmode=disable</span> <span style=color:#75715e># PostgreSQL 的连接字符串</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>MAXMIND_LICENSE_KEY=xxx</span> <span style=color:#75715e># 下载 GEO 信息的 MaxMind 的 License Key，用于登录日志中识别 IP 地址的地理位置</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>PUID=1000</span> <span style=color:#75715e># 设置用户ID避免权限问题</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>PGID=1000</span> <span style=color:#75715e># 设置组ID避免权限问题</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>ANALYTICS_DISABLED=true</span> <span style=color:#75715e># 禁用匿名数据收集</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>LOG_JSON=true</span> <span style=color:#75715e># 使用 JSON 格式输出日志，方便日志收集和分析</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>APP_NAME=Pocket ID</span> <span style=color:#75715e># 应用名称</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>SESSION_DURATION=3600</span> <span style=color:#75715e># 会话持续时间，单位为秒，默认 3600 秒</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>ENABLE_PASSKEYS=true</span> <span style=color:#75715e># 启用 Passkeys 登录</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>EMAIL_ONE_TIME_ACCESS_AS_ADMIN_ENABLED=true</span> <span style=color:#75715e># 启用管理员通过邮箱发送一次性登录链接</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>EMAIL_ONE_TIME_ACCESS_AS_UNAUTHENTICATED_ENABLED=true</span> <span style=color:#75715e># 禁止未认证用户通过邮箱发送一次性登录链接</span>
</span></span></code></pre></div></div><div class=prev-next></div><svg id="btt-button" class="arrow-logo" height="1em" viewBox="0 0 384 512" onclick="scrollToTop()" title="Go to top"><path d="M177 159.7l136 136c9.4 9.4 9.4 24.6.0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9.0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9.0L7 329.7c-9.4-9.4-9.4-24.6.0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"/></svg>
<script>let backToTopButton=document.getElementById("btt-button");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?backToTopButton.style.display="block":backToTopButton.style.display="none"}function scrollToTop(){window.scrollTo(0,0)}</script><div id=comments><script src=https://utteranc.es/client.js repo=helloworlde/helloworlde.github.io issue-term=title theme=github-light crossorigin=anonymous async></script></div></div></main><footer class=footer><span>&copy; 2025 hellowood.dev</span>
<span>Made with &#10084;&#65039; using <a target=_blank href=https://github.com/gokarna-theme/gokarna-hugo>Gokarna</a></span></footer></body></html>