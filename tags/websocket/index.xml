<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>WebSocket on HelloWood</title><link>https://blog.hellowood.dev/tags/websocket/</link><description>Recent content in WebSocket on HelloWood</description><generator>Hugo</generator><language>cn</language><lastBuildDate>Sat, 06 Sep 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://blog.hellowood.dev/tags/websocket/index.xml" rel="self" type="application/rss+xml"/><item><title>Spring Boot 中使用 WebSocket</title><link>https://blog.hellowood.dev/posts/spring-boot-%E4%B8%AD%E4%BD%BF%E7%94%A8-websocket/</link><pubDate>Sun, 08 Sep 2019 18:48:25 +0800</pubDate><guid>https://blog.hellowood.dev/posts/spring-boot-%E4%B8%AD%E4%BD%BF%E7%94%A8-websocket/</guid><description>&lt;blockquote&gt;
&lt;p&gt;WebSocket 是一种长连接技术，可以实现服务端和客户端的双向通信，服务端可以主动推送信息给客户端&lt;/p&gt;&lt;/blockquote&gt;
&lt;h2 id="构建应用"&gt;构建应用&lt;/h2&gt;
&lt;h3 id="添加依赖"&gt;添加依赖&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;build.gradle&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-gradle" data-lang="gradle"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c1abea"&gt;dependencies&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c1abea"&gt;compile&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;&lt;span style="color:#63c381"&gt;&amp;#34;org.springframework.boot:spring-boot-starter-websocket&amp;#34;&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c1abea"&gt;compile&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;&lt;span style="color:#63c381"&gt;&amp;#34;org.webjars:webjars-locator-core&amp;#34;&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c1abea"&gt;compile&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;&lt;span style="color:#63c381"&gt;&amp;#34;org.webjars:sockjs-client:1.0.2&amp;#34;&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c1abea"&gt;compile&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;&lt;span style="color:#63c381"&gt;&amp;#34;org.webjars:stomp-websocket:2.3.3&amp;#34;&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c1abea"&gt;compile&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;&lt;span style="color:#63c381"&gt;&amp;#34;org.webjars:bootstrap:3.3.7&amp;#34;&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c1abea"&gt;compile&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;&lt;span style="color:#63c381"&gt;&amp;#34;org.webjars:jquery:3.1.0&amp;#34;&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c1abea"&gt;testCompile&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;&lt;span style="color:#63c381"&gt;&amp;#34;org.springframework.boot:spring-boot-starter-test&amp;#34;&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c7bf54"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="配置"&gt;配置&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;WebSocketConfig.java&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e5c07b"&gt;@Configuration&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e5c07b"&gt;@EnableWebSocketMessageBroker&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c678dd"&gt;public&lt;/span&gt; &lt;span style="color:#c678dd"&gt;class&lt;/span&gt; &lt;span style="color:#76a9f9"&gt;WebSocketConfig&lt;/span&gt; &lt;span style="color:#c678dd"&gt;implements&lt;/span&gt; &lt;span style="color:#c1abea"&gt;WebSocketMessageBrokerConfigurer&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e5c07b"&gt;@Override&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c678dd"&gt;public&lt;/span&gt; &lt;span style="color:#ef8383"&gt;void&lt;/span&gt; &lt;span style="color:#00b1f7"&gt;configureMessageBroker&lt;/span&gt;(&lt;span style="color:#c1abea"&gt;MessageBrokerRegistry&lt;/span&gt; &lt;span style="color:#c1abea"&gt;registry&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c1abea"&gt;registry&lt;/span&gt;.&lt;span style="color:#b3d23c"&gt;enableSimpleBroker&lt;/span&gt;(&lt;span style="color:#98c379"&gt;&amp;#34;/topic&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c1abea"&gt;registry&lt;/span&gt;.&lt;span style="color:#b3d23c"&gt;setApplicationDestinationPrefixes&lt;/span&gt;(&lt;span style="color:#98c379"&gt;&amp;#34;/app&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e5c07b"&gt;@Override&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c678dd"&gt;public&lt;/span&gt; &lt;span style="color:#ef8383"&gt;void&lt;/span&gt; &lt;span style="color:#00b1f7"&gt;registerStompEndpoints&lt;/span&gt;(&lt;span style="color:#c1abea"&gt;StompEndpointRegistry&lt;/span&gt; &lt;span style="color:#c1abea"&gt;registry&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c1abea"&gt;registry&lt;/span&gt;.&lt;span style="color:#b3d23c"&gt;addEndpoint&lt;/span&gt;(&lt;span style="color:#98c379"&gt;&amp;#34;/socket&amp;#34;&lt;/span&gt;).&lt;span style="color:#b3d23c"&gt;withSockJS&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;其中&lt;code&gt;/topic&lt;/code&gt; 是用于推送给客户端的消息路径前缀；&lt;code&gt;/app&lt;/code&gt;是用于请求服务端的消息路径前缀， &lt;code&gt;/socket&lt;/code&gt;用于客户端建立连接&lt;/p&gt;
&lt;p&gt;SockJS用于提供浏览器兼容性，当浏览器不支持 WebSocket 时，就会尝试降级为HTTP流或者长轮询的方式以实现和 WebSocket 相同的效果，参考 &lt;a href="https://docs.spring.io/spring/docs/5.1.8.RELEASE/spring-framework-reference/web.html#websocket-fallback"&gt;4.3. SockJS Fallback&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="群发消息"&gt;群发消息&lt;/h3&gt;
&lt;p&gt;群发消息可以将消息发送给所有订阅了该消息的客户端，可以通过 &lt;code&gt;@SendTo&lt;/code&gt;或&lt;code&gt;org.springframework.messaging.simp.SimpMessagingTemplate#convertAndSend&lt;/code&gt;发送&lt;/p&gt;
&lt;h4 id="服务端"&gt;服务端&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;通过注解实现&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e5c07b"&gt;@MessageMapping&lt;/span&gt;(&lt;span style="color:#98c379"&gt;&amp;#34;/message/broadcast&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e5c07b"&gt;@SendTo&lt;/span&gt;(&lt;span style="color:#98c379"&gt;&amp;#34;/response/message&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c678dd"&gt;public&lt;/span&gt; &lt;span style="color:#c1abea"&gt;Message&lt;/span&gt; &lt;span style="color:#00b1f7"&gt;broadcastMessage&lt;/span&gt;(&lt;span style="color:#c1abea"&gt;String&lt;/span&gt; &lt;span style="color:#c1abea"&gt;title&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c1abea"&gt;log&lt;/span&gt;.&lt;span style="color:#b3d23c"&gt;info&lt;/span&gt;(&lt;span style="color:#98c379"&gt;&amp;#34;Receive new broadcast message from socket, title is :&amp;#34;&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;+&lt;/span&gt; &lt;span style="color:#c1abea"&gt;title&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c678dd"&gt;return&lt;/span&gt; &lt;span style="color:#c1abea"&gt;Message&lt;/span&gt;.&lt;span style="color:#b3d23c"&gt;builder&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; .&lt;span style="color:#b3d23c"&gt;title&lt;/span&gt;(&lt;span style="color:#c1abea"&gt;title&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; .&lt;span style="color:#b3d23c"&gt;content&lt;/span&gt;(&lt;span style="color:#98c379"&gt;&amp;#34;Socket Broadcast:&amp;#34;&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;+&lt;/span&gt; &lt;span style="color:#c1abea"&gt;title&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;+&lt;/span&gt; &lt;span style="color:#98c379"&gt;&amp;#34; content!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; .&lt;span style="color:#b3d23c"&gt;createTime&lt;/span&gt;(&lt;span style="color:#c1abea"&gt;LocalDateTime&lt;/span&gt;.&lt;span style="color:#b3d23c"&gt;now&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; .&lt;span style="color:#b3d23c"&gt;build&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;通过 REST接口调用方法实现&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e5c07b"&gt;@Autowired&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c678dd"&gt;private&lt;/span&gt; &lt;span style="color:#c1abea"&gt;SimpMessagingTemplate&lt;/span&gt; &lt;span style="color:#c1abea"&gt;simpMessagingTemplate&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e5c07b"&gt;@GetMapping&lt;/span&gt;(&lt;span style="color:#98c379"&gt;&amp;#34;/message/broadcast&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e5c07b"&gt;@ResponseBody&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c678dd"&gt;public&lt;/span&gt; &lt;span style="color:#ef8383"&gt;void&lt;/span&gt; &lt;span style="color:#00b1f7"&gt;sendBroadcastMessage&lt;/span&gt;(&lt;span style="color:#c1abea"&gt;String&lt;/span&gt; &lt;span style="color:#c1abea"&gt;title&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c1abea"&gt;log&lt;/span&gt;.&lt;span style="color:#b3d23c"&gt;info&lt;/span&gt;(&lt;span style="color:#98c379"&gt;&amp;#34;Receive new broadcast message from REST interface, title is :&amp;#34;&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;+&lt;/span&gt; &lt;span style="color:#c1abea"&gt;title&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c1abea"&gt;Message&lt;/span&gt; &lt;span style="color:#c1abea"&gt;message&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;=&lt;/span&gt; &lt;span style="color:#c1abea"&gt;Message&lt;/span&gt;.&lt;span style="color:#b3d23c"&gt;builder&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; .&lt;span style="color:#b3d23c"&gt;title&lt;/span&gt;(&lt;span style="color:#c1abea"&gt;title&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; .&lt;span style="color:#b3d23c"&gt;content&lt;/span&gt;(&lt;span style="color:#98c379"&gt;&amp;#34;REST Broadcast:&amp;#34;&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;+&lt;/span&gt; &lt;span style="color:#c1abea"&gt;title&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;+&lt;/span&gt; &lt;span style="color:#98c379"&gt;&amp;#34; content!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; .&lt;span style="color:#b3d23c"&gt;createTime&lt;/span&gt;(&lt;span style="color:#c1abea"&gt;LocalDateTime&lt;/span&gt;.&lt;span style="color:#b3d23c"&gt;now&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; .&lt;span style="color:#b3d23c"&gt;build&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c1abea"&gt;simpMessagingTemplate&lt;/span&gt;.&lt;span style="color:#b3d23c"&gt;convertAndSend&lt;/span&gt;(&lt;span style="color:#98c379"&gt;&amp;#34;/response/message&amp;#34;&lt;/span&gt;, &lt;span style="color:#c1abea"&gt;message&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id="客户端"&gt;客户端&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-javascript" data-lang="javascript"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c678dd"&gt;function&lt;/span&gt; &lt;span style="color:#c1abea"&gt;connect&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c678dd"&gt;var&lt;/span&gt; &lt;span style="color:#c1abea"&gt;socket&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;=&lt;/span&gt; &lt;span style="color:#c678dd"&gt;new&lt;/span&gt; &lt;span style="color:#c1abea"&gt;SockJS&lt;/span&gt;(&lt;span style="color:#63c381"&gt;&amp;#34;/socket&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c1abea"&gt;stompClient&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;=&lt;/span&gt; &lt;span style="color:#c1abea"&gt;Stomp&lt;/span&gt;.&lt;span style="color:#c1abea"&gt;over&lt;/span&gt;(&lt;span style="color:#c1abea"&gt;socket&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c1abea"&gt;stompClient&lt;/span&gt;.&lt;span style="color:#c1abea"&gt;connect&lt;/span&gt;({}, &lt;span style="color:#c678dd"&gt;function&lt;/span&gt; (&lt;span style="color:#c1abea"&gt;frame&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c1abea"&gt;stompClient&lt;/span&gt;.&lt;span style="color:#c1abea"&gt;subscribe&lt;/span&gt;(&lt;span style="color:#63c381"&gt;&amp;#34;/response/message&amp;#34;&lt;/span&gt;, &lt;span style="color:#c678dd"&gt;function&lt;/span&gt; (&lt;span style="color:#c1abea"&gt;message&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c1abea"&gt;console&lt;/span&gt;.&lt;span style="color:#c1abea"&gt;log&lt;/span&gt;(&lt;span style="color:#63c381"&gt;&amp;#34;Receive message from server:&amp;#34;&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;+&lt;/span&gt; &lt;span style="color:#c1abea"&gt;message&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; });
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; });
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c678dd"&gt;function&lt;/span&gt; &lt;span style="color:#c1abea"&gt;sendMessage&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c1abea"&gt;stompClient&lt;/span&gt;.&lt;span style="color:#c1abea"&gt;send&lt;/span&gt;(&lt;span style="color:#63c381"&gt;&amp;#34;/request/message/broadcast&amp;#34;&lt;/span&gt;, {}, &lt;span style="color:#63c381"&gt;&amp;#34;Message&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id="测试"&gt;测试&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;启动应用，用两个不同的浏览器访问 &lt;a href="localhost:8080"&gt;localhost:8080&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;广播消息建立连接，并发送消息，此时可以看到两个浏览器都收到了刚才发送的消息&lt;/li&gt;
&lt;li&gt;通过 REST 接口：&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl &lt;span style="color:#98c379"&gt;&amp;#39;localhost:8080/message/broadcast?title=hello&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="发送给指定客户端"&gt;发送给指定客户端&lt;/h3&gt;
&lt;p&gt;群发消息可以将消息发送给所有订阅了该消息的客户端，可以通过 &lt;code&gt;@SendToUser&lt;/code&gt;或&lt;code&gt;org.springframework.messaging.simp.SimpMessagingTemplate#convertAndSendToUser&lt;/code&gt;发送&lt;/p&gt;</description></item></channel></rss>