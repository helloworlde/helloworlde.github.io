<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Google on HelloWood</title><link>https://blog.hellowood.dev/tags/google/</link><description>Recent content in Google on HelloWood</description><generator>Hugo</generator><language>cn</language><lastBuildDate>Sat, 06 Sep 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://blog.hellowood.dev/tags/google/index.xml" rel="self" type="application/rss+xml"/><item><title>Google Cloud Run 部署 Knative Serverless 应用</title><link>https://blog.hellowood.dev/posts/google-cloud-run-%E9%83%A8%E7%BD%B2-knative-serverless-%E5%BA%94%E7%94%A8/</link><pubDate>Wed, 15 May 2019 08:23:26 +0800</pubDate><guid>https://blog.hellowood.dev/posts/google-cloud-run-%E9%83%A8%E7%BD%B2-knative-serverless-%E5%BA%94%E7%94%A8/</guid><description>&lt;blockquote&gt;
&lt;p&gt;Google Cloud Run 是 Google 最近推出的基于容器运行的支持 Serverless 应用的服务，是 Knative 的Google Cloud 托管版本；和其他的 Serverless 如Google Cloud Functions, AWS Lambda 等相比，优点在于完全的基于容器，且不限语言&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="安装-cloud-sdk"&gt;安装 &lt;a href="https://cloud.google.com/sdk/"&gt;Cloud SDK&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Cloud SDK 是 Google Cloud 的命令行工具，用于访问Google Cloud相关资源&lt;/p&gt;
&lt;p&gt;具体平台的安装方式可以参考 &lt;a href="https://cloud.google.com/sdk/docs/quickstarts"&gt;https://cloud.google.com/sdk/docs/quickstarts&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="创建应用上传镜像"&gt;创建应用，上传镜像&lt;/h2&gt;
&lt;p&gt;以 Go 语言为例，创建一个应用，根据不同的请求返回不同的内容&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;main.go&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-go" data-lang="go"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c678dd"&gt;package&lt;/span&gt; &lt;span style="color:#c1abea"&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c678dd"&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#98c379"&gt;&amp;#34;encoding/json&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#98c379"&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#98c379"&gt;&amp;#34;net/http&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#98c379"&gt;&amp;#34;net/url&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c678dd"&gt;type&lt;/span&gt; &lt;span style="color:#c1abea"&gt;CustomResponse&lt;/span&gt; &lt;span style="color:#c678dd"&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#c1abea"&gt;Code&lt;/span&gt; &lt;span style="color:#ef8383"&gt;int&lt;/span&gt; &lt;span style="color:#98c379"&gt;`json:&amp;#34;code&amp;#34;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#c1abea"&gt;Message&lt;/span&gt; &lt;span style="color:#ef8383"&gt;string&lt;/span&gt; &lt;span style="color:#98c379"&gt;`json:&amp;#34;message&amp;#34;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c678dd"&gt;func&lt;/span&gt; &lt;span style="color:#00b1f7"&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#c1abea"&gt;fmt&lt;/span&gt;.&lt;span style="color:#00b1f7"&gt;Println&lt;/span&gt;(&lt;span style="color:#98c379"&gt;&amp;#34;Server started&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#c1abea"&gt;http&lt;/span&gt;.&lt;span style="color:#00b1f7"&gt;HandleFunc&lt;/span&gt;(&lt;span style="color:#98c379"&gt;&amp;#34;/&amp;#34;&lt;/span&gt;, &lt;span style="color:#c1abea"&gt;rootHandler&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#c1abea"&gt;_&lt;/span&gt; = &lt;span style="color:#c1abea"&gt;http&lt;/span&gt;.&lt;span style="color:#00b1f7"&gt;ListenAndServe&lt;/span&gt;(&lt;span style="color:#98c379"&gt;&amp;#34;:8080&amp;#34;&lt;/span&gt;, &lt;span style="color:#b756ff;font-weight:bold"&gt;nil&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c678dd"&gt;func&lt;/span&gt; &lt;span style="color:#00b1f7"&gt;rootHandler&lt;/span&gt;(&lt;span style="color:#c1abea"&gt;w&lt;/span&gt; &lt;span style="color:#c1abea"&gt;http&lt;/span&gt;.&lt;span style="color:#c1abea"&gt;ResponseWriter&lt;/span&gt;, &lt;span style="color:#c1abea"&gt;r&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;*&lt;/span&gt;&lt;span style="color:#c1abea"&gt;http&lt;/span&gt;.&lt;span style="color:#c1abea"&gt;Request&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#c1abea"&gt;fmt&lt;/span&gt;.&lt;span style="color:#00b1f7"&gt;Println&lt;/span&gt;(&lt;span style="color:#98c379"&gt;&amp;#34;Start handler request&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#c1abea"&gt;queryForm&lt;/span&gt;, &lt;span style="color:#c1abea"&gt;err&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;:=&lt;/span&gt; &lt;span style="color:#c1abea"&gt;url&lt;/span&gt;.&lt;span style="color:#00b1f7"&gt;ParseQuery&lt;/span&gt;(&lt;span style="color:#c1abea"&gt;r&lt;/span&gt;.&lt;span style="color:#c1abea"&gt;URL&lt;/span&gt;.&lt;span style="color:#c1abea"&gt;RawQuery&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#c1abea"&gt;w&lt;/span&gt;.&lt;span style="color:#00b1f7"&gt;Header&lt;/span&gt;().&lt;span style="color:#00b1f7"&gt;Set&lt;/span&gt;(&lt;span style="color:#98c379"&gt;&amp;#34;Content-Type&amp;#34;&lt;/span&gt;, &lt;span style="color:#98c379"&gt;&amp;#34;application/json&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#c1abea"&gt;message&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;:=&lt;/span&gt; &lt;span style="color:#98c379"&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#c678dd"&gt;if&lt;/span&gt; &lt;span style="color:#c1abea"&gt;err&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;==&lt;/span&gt; &lt;span style="color:#b756ff;font-weight:bold"&gt;nil&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style="color:#ef8383"&gt;len&lt;/span&gt;(&lt;span style="color:#c1abea"&gt;queryForm&lt;/span&gt;[&lt;span style="color:#98c379"&gt;&amp;#34;message&amp;#34;&lt;/span&gt;]) &amp;gt; &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;		&lt;span style="color:#c1abea"&gt;message&lt;/span&gt; = &lt;span style="color:#c1abea"&gt;queryForm&lt;/span&gt;[&lt;span style="color:#98c379"&gt;&amp;#34;message&amp;#34;&lt;/span&gt;][&lt;span style="color:#d19a66"&gt;0&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	} &lt;span style="color:#c678dd"&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;		&lt;span style="color:#c1abea"&gt;message&lt;/span&gt; = &lt;span style="color:#98c379"&gt;&amp;#34;Hello Go Server&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#c1abea"&gt;_&lt;/span&gt; = &lt;span style="color:#c1abea"&gt;json&lt;/span&gt;.&lt;span style="color:#00b1f7"&gt;NewEncoder&lt;/span&gt;(&lt;span style="color:#c1abea"&gt;w&lt;/span&gt;).&lt;span style="color:#00b1f7"&gt;Encode&lt;/span&gt;(&lt;span style="color:#c1abea"&gt;CustomResponse&lt;/span&gt;{&lt;span style="color:#d19a66"&gt;200&lt;/span&gt;, &lt;span style="color:#c1abea"&gt;message&lt;/span&gt;})
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#c1abea"&gt;fmt&lt;/span&gt;.&lt;span style="color:#00b1f7"&gt;Println&lt;/span&gt;(&lt;span style="color:#98c379"&gt;&amp;#34;Handler request completed&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Dockerfile&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-dockerfile" data-lang="dockerfile"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c678dd"&gt;FROM&lt;/span&gt; &lt;span style="color:#98c379"&gt;golang:1.12.3-alpine3.9&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c678dd"&gt;RUN&lt;/span&gt; mkdir /app
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c678dd"&gt;ADD&lt;/span&gt; . /app/
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c678dd"&gt;WORKDIR&lt;/span&gt; &lt;span style="color:#98c379"&gt;/app&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c678dd"&gt;RUN&lt;/span&gt; &lt;span style="color:#dcaeea"&gt;CGO_ENABLED&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;=&lt;/span&gt;&lt;span style="color:#d19a66"&gt;0&lt;/span&gt; &lt;span style="color:#dcaeea"&gt;GOOS&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;=&lt;/span&gt;linux go build -o main main.go
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c678dd"&gt;EXPOSE&lt;/span&gt; &lt;span style="color:#98c379"&gt;8080&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c678dd"&gt;CMD&lt;/span&gt; [&lt;span style="color:#63c381"&gt;&amp;#34;/app/main&amp;#34;&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;配置 &lt;a href="https://console.cloud.google.com/gcr"&gt;Google Container Registry&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;相关配置可以参考 &lt;a href="https://cloud.google.com/container-registry/docs/pushing-and-pulling"&gt;推送和拉取映像&lt;/a&gt;，需要注意的是需要一个项目 ID，这个 ID 可以在 &lt;a href="https://console.cloud.google.com/home/dashboard"&gt;home/dashboard&lt;/a&gt; 下找到&lt;/p&gt;</description></item></channel></rss>