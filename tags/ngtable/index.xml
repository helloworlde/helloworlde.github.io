<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>NgTable on HelloWood</title><link>https://blog.hellowood.dev/tags/ngtable/</link><description>Recent content in NgTable on HelloWood</description><generator>Hugo</generator><language>cn</language><lastBuildDate>Sun, 22 Sep 2024 13:16:31 +0000</lastBuildDate><atom:link href="https://blog.hellowood.dev/tags/ngtable/index.xml" rel="self" type="application/rss+xml"/><item><title>AngularJS 中ngTable自定义/重写过滤器</title><link>https://blog.hellowood.dev/posts/angularjs%E4%B8%ADngtable%E8%87%AA%E5%AE%9A%E4%B9%89-%E9%87%8D%E5%86%99%E8%BF%87%E6%BB%A4%E5%99%A8/</link><pubDate>Mon, 01 Jan 2018 11:56:49 +0000</pubDate><guid>https://blog.hellowood.dev/posts/angularjs%E4%B8%ADngtable%E8%87%AA%E5%AE%9A%E4%B9%89-%E9%87%8D%E5%86%99%E8%BF%87%E6%BB%A4%E5%99%A8/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>在使用ngTable 时用到了需要进行按时间过滤，但是ngTable并没有该功能，所以需要自定义过滤器，但是如果自定义了过滤器，则会覆盖原来的，所以就需要重写过滤器&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;blockquote>
&lt;ul>
&lt;li>###ngTable过滤器的原理是按照过滤的条件遍历所有的列表项内容，如果满足过滤条件则返回true，显示该记录，如果不满足条件则返回false，不显示该条记录，过滤条件有任何变化都会触发过滤&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;blockquote>
&lt;ul>
&lt;li>text:根据字符匹配，如果被过滤的值有该字符，则显示该记录&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;ul>
&lt;li>
&lt;p>number:根据数值进行匹配，如果数值相等，则显示该记录&lt;/p>
&lt;/li>
&lt;li>
&lt;p>select:根据下拉列表选择的值进行匹配，如果值相等，则显示该记录&lt;/p>
&lt;/li>
&lt;li>
&lt;p>添加自定义的过滤器控件&lt;/p>
&lt;ul>
&lt;li>在HTML中&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>&amp;lt;script type=&amp;#34;text/ng-template&amp;#34; id=&amp;#34;/filter/js/startDateFilter.html&amp;#34;&amp;gt;
 &amp;lt;input type=&amp;#34;text&amp;#34;&amp;gt;
&amp;lt;/script&amp;gt;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>添加自定义的过滤器控件
&lt;ul>
&lt;li>在js中&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>$scope.customFilter = {
 start:{
 id:&amp;#39;/filter/js/startDateFilter.html&amp;#39;,
 placeholder:&amp;#39;Start&amp;#39;
 }
 }
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>需要在ngTable的配置中指定过滤器&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>$scope.userTable = new NgTableParams({},
 {
 // initial sort order
 filterDelay: 0,
 filterOptions: {filterFn: $scope.customFilterFn},
 dataset: data
 });
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>为指定列设置控件&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>&amp;lt;td data-title=&amp;#34;&amp;#39;日期&amp;#39;&amp;#34; filter=&amp;#34;customFilter&amp;#34;&amp;gt;
 {{user.date|type: post
date:&amp;#39;yyyy-MM-dd&amp;#39;}}
 &amp;lt;/td&amp;gt;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>重写过滤器方法，实现过滤器功能&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>$scope.customFilterFn = function (date, filterValues) {
 return data.filter(function (item) {
 var result = true;
 if (typeof(filterValues.name) != undefined &amp;amp;&amp;amp; filterValues.name != null) {
 result = result &amp;amp;&amp;amp; (item.name.indenOf(filterValues.name) &amp;gt; -1);
 }

 if (typeof(filterValues.sex) != undefined &amp;amp;&amp;amp; filterValues.sex != null) {
 result = result &amp;amp;&amp;amp; (item.sex == filterValues.sex);
 }

 if (typeof(filterValues.startDate) != undefined &amp;amp;&amp;amp; filterValues.startDate != null) {
 result = result &amp;amp;&amp;amp; (item.startDate &amp;gt;= filterValues.startDate);
 }
 return result;
 })
 }
&lt;/code>&lt;/pre>&lt;hr>
&lt;ul>
&lt;li>页面代码&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html lang=&amp;#34;en&amp;#34; ng-app=&amp;#34;myApp&amp;#34; ng-controller=&amp;#34;myCtrl&amp;#34;&amp;gt;
&amp;lt;head&amp;gt;
 &amp;lt;meta charset=&amp;#34;UTF-8&amp;#34;&amp;gt;
 &amp;lt;title&amp;gt;自定义过滤器&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;link href=&amp;#34;https://cdn.bootcss.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css&amp;#34; rel=&amp;#34;stylesheet&amp;#34;&amp;gt;
&amp;lt;link href=&amp;#34;https://cdn.bootcss.com/ng-table/1.0.0/ng-table.min.css&amp;#34; rel=&amp;#34;stylesheet&amp;#34;&amp;gt;
&amp;lt;body&amp;gt;
&amp;lt;div class=&amp;#34;row&amp;#34;&amp;gt;
 &amp;lt;!--自定义filter控件--&amp;gt;
 &amp;lt;script type=&amp;#34;text/ng-template&amp;#34; id=&amp;#34;dateFilter.html&amp;#34;&amp;gt;
 &amp;lt;input type=&amp;#34;date&amp;#34;&amp;gt;
 &amp;lt;/script&amp;gt;
 &amp;lt;div class=&amp;#34;col-md-12 table-responsive&amp;#34;&amp;gt;
 &amp;lt;table ng-table=&amp;#34;userTable&amp;#34; class=&amp;#34;table table-condensed table-bordered table-striped table-hover &amp;#34;
 show-filter=&amp;#34;true&amp;#34;&amp;gt;
 &amp;lt;tr ng-repeat=&amp;#34;user in $data&amp;#34;&amp;gt;
 &amp;lt;td data-title=&amp;#34;&amp;#39;用户名&amp;#39;&amp;#34; filter=&amp;#34;{username: &amp;#39;text&amp;#39;}&amp;#34; sortable=&amp;#34;&amp;#39;username&amp;#39;&amp;#34;&amp;gt;{{user.username}}&amp;lt;/td&amp;gt;
 &amp;lt;td data-title=&amp;#34;&amp;#39;性别&amp;#39;&amp;#34; filter=&amp;#34;{sex: &amp;#39;select&amp;#39;}&amp;#34; filter-data=&amp;#34;sexs&amp;#34; sortable=&amp;#34;&amp;#39;sex&amp;#39;&amp;#34;&amp;gt;{{user.sex}}&amp;lt;/td&amp;gt;
 &amp;lt;td data-title=&amp;#34;&amp;#39;性别&amp;#39;&amp;#34; filter=&amp;#34;customFilter&amp;#34; sortable=&amp;#34;&amp;#39;date&amp;#39;&amp;#34;&amp;gt;
 {{user.date|type: post
date:&amp;#39;yyyy-MM-dd&amp;#39;}}
 &amp;lt;/td&amp;gt;
 &amp;lt;/tr&amp;gt;
 &amp;lt;/table&amp;gt;
 &amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;script type=&amp;#34;text/ng-template&amp;#34; id=&amp;#34;/filter/js/startDateFilter.html&amp;#34;&amp;gt;
 &amp;lt;input type=&amp;#34;text&amp;#34;&amp;gt;
&amp;lt;/script&amp;gt;
&amp;lt;script src=&amp;#34;https://cdn.bootcss.com/angular.js/1.5.8/angular.min.js&amp;#34;&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;script src=&amp;#34;https://cdn.bootcss.com/ng-table/1.0.0/ng-table.min.js&amp;#34;&amp;gt;&amp;lt;/script&amp;gt;

&amp;lt;script type=&amp;#34;text/javascript&amp;#34;&amp;gt;
 var app = angular.module(&amp;#39;myApp&amp;#39;, [&amp;#39;ngTable&amp;#39;]);
 app.controller(&amp;#39;myCtrl&amp;#39;, function ($scope, NgTableParams) {

 $scope.sexs = [{
 &amp;#34;id&amp;#34;: &amp;#34;男&amp;#34;,
 &amp;#34;title&amp;#34;: &amp;#34;男&amp;#34;
 }, {
 &amp;#34;id&amp;#34;: &amp;#34;女&amp;#34;,
 &amp;#34;title&amp;#34;: &amp;#34;女&amp;#34;
 }]

 var data = [{
 &amp;#34;username&amp;#34;: &amp;#34;农夫山泉&amp;#34;,
 &amp;#34;sex&amp;#34;: &amp;#34;男&amp;#34;,
 &amp;#34;date&amp;#34;: 1004570428580
 }, {
 &amp;#34;username&amp;#34;: &amp;#34;哇哈哈&amp;#34;,
 &amp;#34;sex&amp;#34;: &amp;#34;女&amp;#34;,
 &amp;#34;date&amp;#34;: 1784570428580
 },
 {
 &amp;#34;username&amp;#34;: &amp;#34;Alice&amp;#34;,
 &amp;#34;sex&amp;#34;: &amp;#34;男&amp;#34;,
 &amp;#34;date&amp;#34;: 1466570428580
 },
 {
 &amp;#34;username&amp;#34;: &amp;#34;CCC&amp;#34;,
 &amp;#34;sex&amp;#34;: &amp;#34;女&amp;#34;,
 &amp;#34;date&amp;#34;: 1584570428580
 }];


 $scope.userTable = new NgTableParams({
 sorting: {id: &amp;#34;asc&amp;#34;}
 },
 {
 // initial sort order
 filterDelay: 0,
 filterOptions: {filterFn: $scope.customFilterFn},
 dataset: data
 });

 $scope.customFilter = {
 start:{
 id:&amp;#39;/filter/js/startDateFilter.html&amp;#39;,
 placeholder:&amp;#39;Start&amp;#39;
 }
 }

 $scope.customFilterFn = function (date, filterValues) {
 return data.filter(function (item) {
 var result = true;

 console.log(filterValues);

 if (typeof(filterValues.name) != undefined &amp;amp;&amp;amp; filterValues.name != null) {
 result = result &amp;amp;&amp;amp; (item.name.indenOf(filterValues.name) &amp;gt; -1);
 }

 if (typeof(filterValues.sex) != undefined &amp;amp;&amp;amp; filterValues.sex != null) {
 result = result &amp;amp;&amp;amp; (item.sex == filterValues.sex);
 }

 if (typeof(filterValues.startDate) != undefined &amp;amp;&amp;amp; filterValues.startDate != null) {
 result = result &amp;amp;&amp;amp; (item.startDate &amp;gt;= filterValues.startDate);
 }
 return result;
 })

 }
 })
&amp;lt;/script&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code>&lt;/pre></description></item><item><title>AngularJS中使用ngTable</title><link>https://blog.hellowood.dev/posts/angularjs%E4%B8%AD%E4%BD%BF%E7%94%A8ngtable/</link><pubDate>Mon, 01 Jan 2018 11:42:21 +0000</pubDate><guid>https://blog.hellowood.dev/posts/angularjs%E4%B8%AD%E4%BD%BF%E7%94%A8ngtable/</guid><description>&lt;blockquote>
&lt;p>在HTML中使用&lt;a href="http://ng-table.com/">ngTable&lt;/a> 可以方便的进行排序，筛选，分页，添加，编辑删除等操作，不用再从数据库里面进行分页等操作&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>需要引用的文件
&lt;ul>
&lt;li>angular.js&lt;/li>
&lt;li>ng-table.js&lt;/li>
&lt;li>ng-table.css&lt;/li>
&lt;li>bootrasp.css&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;hr>
&lt;ul>
&lt;li>注入依赖&lt;/li>
&lt;li>为ng-table 设置属性和数据&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>var app = angular.module(&amp;#39;app&amp;#39;, [ &amp;#39;ngTable&amp;#39;]);
app.controller(&amp;#39;controller&amp;#39;, function($scope,NgTableParams) {
 $http.get(&amp;#34;/query&amp;#34;)
 .success(function(data) {
 $scope.userTable = new NgTableParams({
 page : 1,
 count : 5
 }, {
 total : data.length,
 getData : data
 }
 });
 })
 });
}
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>为 table 添加 ng-table 属性&lt;/li>
&lt;li>显示数据&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>&amp;lt;table ng-table=&amp;#34;userTable&amp;#34; class=&amp;#34;table table-hover&amp;#34;&amp;gt;
 &amp;lt;tbody&amp;gt;
 &amp;lt;tr&amp;gt;
 &amp;lt;th&amp;gt;编号&amp;lt;/th&amp;gt;
 &amp;lt;th&amp;gt;用户名&amp;lt;/th&amp;gt;
 &amp;lt;/tr&amp;gt;
 &amp;lt;tr ng-repeat=&amp;#34;user in $data&amp;#34;&amp;gt;
 &amp;lt;td&amp;gt;{{user.id}}&amp;lt;/td&amp;gt;
 &amp;lt;td&amp;gt;{{user.name}}&amp;lt;/td&amp;gt;
 &amp;lt;/tr&amp;gt;
 &amp;lt;/tbody&amp;gt;
 &amp;lt;/table&amp;gt;
&lt;/code>&lt;/pre></description></item></channel></rss>