<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Ubuntu on HelloWood</title><link>https://blog.hellowood.dev/tags/ubuntu/</link><description>Recent content in Ubuntu on HelloWood</description><generator>Hugo</generator><language>cn</language><lastBuildDate>Sat, 06 Sep 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://blog.hellowood.dev/tags/ubuntu/index.xml" rel="self" type="application/rss+xml"/><item><title>Ubuntu 24 安装 AMD 780M 显卡驱动和 ROCm</title><link>https://blog.hellowood.dev/posts/ubuntu-24-%E5%AE%89%E8%A3%85-amd-780m-%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8/</link><pubDate>Sun, 20 Apr 2025 00:00:00 +0000</pubDate><guid>https://blog.hellowood.dev/posts/ubuntu-24-%E5%AE%89%E8%A3%85-amd-780m-%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8/</guid><description>&lt;p&gt;ROCm (Radeon Open Compute) 是由 AMD 开发的开源软件平台，专为加速计算而设计，开源用于深度学习、机器学习和图形处理等应用程序。定位和 NVIDIA 的 CUDA 相同&lt;/p&gt;
&lt;h2 id="安装-rocm"&gt;安装 ROCm&lt;/h2&gt;
&lt;h3 id="添加-rocm-源"&gt;添加 rocm 源&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;添加 gpg 密钥&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo mkdir --parents --mode&lt;span style="color:#c7bf54"&gt;=&lt;/span&gt;&lt;span style="color:#d19a66"&gt;0755&lt;/span&gt; /etc/apt/keyrings
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;wget https://repo.radeon.com/rocm/rocm.gpg.key -O - | &lt;span style="color:#d26464;font-weight:bold"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; gpg --dearmor | sudo tee /etc/apt/keyrings/rocm.gpg &amp;gt; /dev/nul
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;添加源&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;分别添加 AMDGPU 驱动程序的软件源和 ROCm 软件源，并设置软件源的优先级，确保在有多个版本可用时，系统会优先安装来自 AMD 官方仓库的软件包&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ef8383"&gt;echo&lt;/span&gt; &lt;span style="color:#63c381"&gt;&amp;#34;deb [arch=amd64 signed-by=/etc/apt/keyrings/rocm.gpg] https://repo.radeon.com/amdgpu/6.4/ubuntu jammy main&amp;#34;&lt;/span&gt; &lt;span style="color:#d26464;font-weight:bold"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; | sudo tee /etc/apt/sources.list.d/amdgpu.list
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ef8383"&gt;echo&lt;/span&gt; &lt;span style="color:#63c381"&gt;&amp;#34;deb [arch=amd64 signed-by=/etc/apt/keyrings/rocm.gpg] https://repo.radeon.com/rocm/apt/6.4 noble main&amp;#34;&lt;/span&gt; &lt;span style="color:#d26464;font-weight:bold"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; | sudo tee --append /etc/apt/sources.list.d/rocm.list
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ef8383"&gt;echo&lt;/span&gt; -e &lt;span style="color:#98c379"&gt;&amp;#39;Package: *\nPin: release o=repo.radeon.com\nPin-Priority: 600&amp;#39;&lt;/span&gt; &lt;span style="color:#d26464;font-weight:bold"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; | sudo tee /etc/apt/preferences.d/rocm-pin-600
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;更新软件包&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt update
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="安装-rocm-1"&gt;安装 ROCm&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;安装 ROCm&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;使用 apt 安装 ROCm 时会自动安装相关的依赖项，包括驱动、内核模块和相关工具&lt;/p&gt;</description></item><item><title>Ubuntu 22 安装 AMD 显卡驱动</title><link>https://blog.hellowood.dev/posts/ubuntu-22-%E5%AE%89%E8%A3%85-amd-%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8/</link><pubDate>Thu, 19 Sep 2024 09:14:35 +0800</pubDate><guid>https://blog.hellowood.dev/posts/ubuntu-22-%E5%AE%89%E8%A3%85-amd-%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8/</guid><description>&lt;p&gt;在 Ubuntu 22 安装 AMD 的显卡驱动，用于视频解码、ffmpeg 等场景&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;下载 amdgpu-install&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;访问 &lt;a href="https://www.amd.com/en/support/download/linux-drivers.html#linux-for-radeon-pro"&gt;Linux® Drivers for AMD Radeon™ and Radeon PRO™ Graphics&lt;/a&gt;，找到 Ubuntu 对应的驱动安装软件；右击 Download 按钮复制下载地址，即可得到下载链接；然后使用 curl 或者 wget 在 Ubuntu 下载，如：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;wget https://repo.radeon.com/amdgpu-install/6.1.3/ubuntu/focal/amdgpu-install_6.1.60103-1_all.deb
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;

 &lt;img src="https://img.hellowood.dev/picture/homelab-ubuntu-22-install-amd-graphics-driver.png" alt="homelab-ubuntu-22-install-amd-graphics-driver.png" loading="lazy"&gt;
&lt;/p&gt;
&lt;ol start="2"&gt;
&lt;li&gt;安装下载软件&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;使用 apt 安装刚才下载的软件&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apt install ./amdgpu-install_6.1.60103-1_all.deb
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="3"&gt;
&lt;li&gt;安装显卡驱动&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;使用 amdgpu-install 安装显卡驱动&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;amdgpu-install -y --usecase&lt;span style="color:#c7bf54"&gt;=&lt;/span&gt;graphics
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="参考文档"&gt;参考文档&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://amdgpu-install.readthedocs.io/en/latest/index.html"&gt;Radeon™ Software for Linux® Installation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>将重新训练的 Yolov8 模型编译为 Hailo 8 和 Hailo 8L 支持的模型</title><link>https://blog.hellowood.dev/posts/%E5%B0%86%E9%87%8D%E6%96%B0%E8%AE%AD%E7%BB%83%E7%9A%84-yolov8-%E6%A8%A1%E5%9E%8B%E7%BC%96%E8%AF%91%E4%B8%BA-hailo-8-%E5%92%8C-hailo-8l-%E6%94%AF%E6%8C%81%E7%9A%84%E6%A8%A1%E5%9E%8B/</link><pubDate>Sun, 08 Sep 2024 21:32:21 +0800</pubDate><guid>https://blog.hellowood.dev/posts/%E5%B0%86%E9%87%8D%E6%96%B0%E8%AE%AD%E7%BB%83%E7%9A%84-yolov8-%E6%A8%A1%E5%9E%8B%E7%BC%96%E8%AF%91%E4%B8%BA-hailo-8-%E5%92%8C-hailo-8l-%E6%94%AF%E6%8C%81%E7%9A%84%E6%A8%A1%E5%9E%8B/</guid><description>&lt;p&gt;在 Ubuntu 22 将自行训练的 Yolov8n 模型编译为 Hailo8/Hailo8L 支持的 hef 格式的模型，在 Hailo8 上使用自行训练的模型进行对象检测&lt;/p&gt;
&lt;h2 id="1-环境准备"&gt;1. 环境准备&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;anaconda&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;参考 &lt;a href="https://docs.anaconda.com/anaconda/install/linux/"&gt;Installing on Linux&lt;/a&gt; 安装&lt;/p&gt;
&lt;h2 id="2-训练-yolo-模型"&gt;2. 训练 yolo 模型&lt;/h2&gt;
&lt;h3 id="21-安装依赖"&gt;2.1 安装依赖&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;创建环境&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;单独创建 ultralytics 的环境，用于训练和导出 yolo 模型为其他格式&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;conda create -n ultralytics &lt;span style="color:#dcaeea"&gt;python&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;=&lt;/span&gt;3.10
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;激活环境&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;conda activate ultralytics
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;安装 ultralytics&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;pip install ultralytics
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;等待安装完成后就可以使用 &lt;code&gt;yolo&lt;/code&gt; 命令训练和导出模型了&lt;/p&gt;
&lt;h3 id="22-训练模型"&gt;2.2 训练模型&lt;/h3&gt;
&lt;p&gt;训练模型可以参考 roboflow 的博客 &lt;a href="https://blog.roboflow.com/how-to-train-yolov8-on-a-custom-dataset/"&gt;How to Train YOLOv8 Object Detection on a Custom Dataset&lt;/a&gt;；为了测试验证流程，先使用官方提供的 yolov8n 当作训练的模型，可以从 &lt;a href="https://github.com/ultralytics/assets/releases"&gt;https://github.com/ultralytics/assets/releases/&lt;/a&gt; 下载，以 yolov8n 为例，下载地址为 &lt;a href="https://github.com/ultralytics/assets/releases/download/v8.2.0/yolov8n.pt"&gt;https://github.com/ultralytics/assets/releases/download/v8.2.0/yolov8n.pt&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;wget https://github.com/ultralytics/assets/releases/download/v8.2.0/yolov8n.pt
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="23-将模型导出为-onnx-格式"&gt;2.3 将模型导出为 onnx 格式&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;yolo &lt;span style="color:#ef8383"&gt;export&lt;/span&gt; &lt;span style="color:#dcaeea"&gt;model&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;=&lt;/span&gt;./yolov8n.pt &lt;span style="color:#dcaeea"&gt;imgsz&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;=&lt;/span&gt;&lt;span style="color:#d19a66"&gt;640&lt;/span&gt; &lt;span style="color:#dcaeea"&gt;format&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;=&lt;/span&gt;onnx &lt;span style="color:#dcaeea"&gt;opset&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;=&lt;/span&gt;&lt;span style="color:#d19a66"&gt;11&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;imgsz=640 指定输入图片的尺寸（图像大小），即 640x640。这个尺寸是模型在推理时处理图像的分辨率&lt;/p&gt;</description></item><item><title>Ubuntu22 安装初始化 Hailo 8系列 TPU 加速器</title><link>https://blog.hellowood.dev/posts/ubuntu22-%E5%AE%89%E8%A3%85%E5%88%9D%E5%A7%8B%E5%8C%96-hailo-8%E7%B3%BB%E5%88%97-tpu-%E5%8A%A0%E9%80%9F%E5%99%A8/</link><pubDate>Sun, 01 Sep 2024 11:22:23 +0800</pubDate><guid>https://blog.hellowood.dev/posts/ubuntu22-%E5%AE%89%E8%A3%85%E5%88%9D%E5%A7%8B%E5%8C%96-hailo-8%E7%B3%BB%E5%88%97-tpu-%E5%8A%A0%E9%80%9F%E5%99%A8/</guid><description>&lt;blockquote&gt;
&lt;p&gt;Hailo 是一家位于以色列的边缘人工智能处理器的先驱芯片制造商，该公司成立于2017年；专注于为边缘设备开发高效的深度学习处理器。Hailo 的核心产品是其自研的 Hailo-8 人工智能处理器，这款芯片特别设计用于在资源受限的边缘设备上运行复杂的深度学习模型&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Hailo-8 能够在嵌入式系统中支持实时处理应用，如计算机视觉、自动驾驶、智能城市监控、医疗设备和工业物联网等&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Hailo 在 2024年6月4日宣布被 Raspberry Pi 选中，为 Raspberry Pi AI Kit 提供 AI 加速器；支持使用 Hailo-8 和 Hailo-8L 进行加速，参考 &lt;a href="https://hailo.ai/zh-hans/company-overview/newsroom/news-zh-hans/raspberry-pi-selects-hailo-to-enable-advanced-ai-capabilities-for-raspberry-pi-5/"&gt;Raspberry Pi Selects Hailo to Enable Advanced AI Capabilities for Raspberry Pi 5&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Hailo8 发布于 2021年，算力为 26 TOPS，Hailo8L 发布于 2023 年，算力为 13 TOPS；两款产品除了算力外，其他特性差别不大，均支持 TensorFlow，TensorFlow Lite，Keras，PyTorch &amp;amp; ONNX 框架，主机架构支持 X86 和 ARM，操作系统支持 Linux 和 Windows；更多信息参考官网介绍：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://hailo.ai/zh-hans/products/ai-accelerators/hailo-8-ai-accelerator/#hailo-8-features"&gt;Hailo-8 AI处理器&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://hailo.ai/zh-hans/products/ai-accelerators/hailo-8l-m-2-ai-acceleration-module-for-ai-light-applications/#hailo8lm2-features"&gt;Hailo-8L M.2 Entry-Level Acceleration Module&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://hailo.ai/files/hailo-8-product-brief-en/"&gt;hailo-8-product-brief&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://hailo.ai/files/hailo-8l-m-2-et-product-brief-en/"&gt;hailo-8l-m-2-et-product-brief&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;

 &lt;img src="https://hailo.ai/wp-content/uploads/2023/09/Hailo-8L%E2%84%A2_Entry-Level_M.2_AI_Acceleration_Module_Overview.webp" alt="Hailo8L" loading="lazy"&gt;
&lt;/p&gt;
&lt;p&gt;Hailo 相关软件功能如图：&lt;/p&gt;
&lt;p&gt;

 &lt;img src="https://hailo.ai/wp-content/uploads/2023/09/HailoRT-Diagram.png" alt="" loading="lazy"&gt;
&lt;/p&gt;
&lt;h2 id="驱动"&gt;驱动&lt;/h2&gt;
&lt;h3 id="安装驱动"&gt;安装驱动&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;安装依赖&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;安装驱动依赖一些软件，需要提前安装&lt;/p&gt;</description></item><item><title>Ubuntu 22 在 Docker 容器中使用 NVIDIA 显卡</title><link>https://blog.hellowood.dev/posts/ubuntu-22-%E5%9C%A8-docker-%E5%AE%B9%E5%99%A8%E4%B8%AD%E4%BD%BF%E7%94%A8-nvidia-%E6%98%BE%E5%8D%A1/</link><pubDate>Tue, 06 Aug 2024 09:15:33 +0800</pubDate><guid>https://blog.hellowood.dev/posts/ubuntu-22-%E5%9C%A8-docker-%E5%AE%B9%E5%99%A8%E4%B8%AD%E4%BD%BF%E7%94%A8-nvidia-%E6%98%BE%E5%8D%A1/</guid><description>&lt;p&gt;在容器中运行需要使用 NVIDIA 显卡进行加速的服务，如图像识别、LLM 等，需要将显卡挂载到容器中&lt;/p&gt;
&lt;h2 id="安装-nvidia-容器工具包"&gt;安装 NVIDIA 容器工具包&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;添加软件源&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;需要添加 NVIDIA 容器工具包的软件源和 gpg 签名&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg &lt;span style="color:#d26464;font-weight:bold"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c7bf54"&gt;&amp;amp;&amp;amp;&lt;/span&gt; curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | &lt;span style="color:#d26464;font-weight:bold"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sed &lt;span style="color:#98c379"&gt;&amp;#39;s#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g&amp;#39;&lt;/span&gt; | &lt;span style="color:#d26464;font-weight:bold"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;更新软件并安装 NVIDIA 容器工具包&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt-get update &lt;span style="color:#c7bf54"&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo apt-get install -y nvidia-container-toolkit
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="配置-docker"&gt;配置 Docker&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;使用 nvidia-ctk 修改 Docker 配置&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;修改 Docker 配置，允许将显卡挂载到容器中&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo nvidia-ctk runtime configure --runtime&lt;span style="color:#c7bf54"&gt;=&lt;/span&gt;docker
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;WARN&lt;span style="color:#c7bf54"&gt;[&lt;/span&gt;0000&lt;span style="color:#c7bf54"&gt;]&lt;/span&gt; Ignoring runtime-config-override flag &lt;span style="color:#c678dd"&gt;for&lt;/span&gt; docker
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;INFO&lt;span style="color:#c7bf54"&gt;[&lt;/span&gt;0000&lt;span style="color:#c7bf54"&gt;]&lt;/span&gt; Loading config from /etc/docker/daemon.json
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;INFO&lt;span style="color:#c7bf54"&gt;[&lt;/span&gt;0000&lt;span style="color:#c7bf54"&gt;]&lt;/span&gt; Wrote updated config to /etc/docker/daemon.json
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;INFO&lt;span style="color:#c7bf54"&gt;[&lt;/span&gt;0000&lt;span style="color:#c7bf54"&gt;]&lt;/span&gt; It is recommended that docker daemon be restarted.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这样会自动修改 &lt;code&gt;/etc/docker/daemon.json&lt;/code&gt; 文件，添加显卡 &lt;code&gt;runtimes&lt;/code&gt; 相关的内容：&lt;/p&gt;</description></item><item><title>Ubuntu 22 运行 Google Coral TPU 示例</title><link>https://blog.hellowood.dev/posts/ubuntu-22-%E8%BF%90%E8%A1%8C-google-coral-tpu-%E7%A4%BA%E4%BE%8B/</link><pubDate>Tue, 09 Jul 2024 09:30:21 +0800</pubDate><guid>https://blog.hellowood.dev/posts/ubuntu-22-%E8%BF%90%E8%A1%8C-google-coral-tpu-%E7%A4%BA%E4%BE%8B/</guid><description>&lt;p&gt;在 Ubuntu 22 上运行 Google Coral TPU 的示例项目&lt;/p&gt;
&lt;h2 id="配置运行环境"&gt;配置运行环境&lt;/h2&gt;
&lt;p&gt;Coral 只支持 Python 3.6～3.9 的环境，而 Ubuntu 22 的 Python 版本为 3.10；因此需要使用 Anaconda 创建独立的运行环境&lt;/p&gt;
&lt;h3 id="安装-anaconda"&gt;安装 Anaconda&lt;/h3&gt;
&lt;p&gt;参考 &lt;a href="https://docs.anaconda.com/anaconda/install/linux/"&gt;Installing on Linux&lt;/a&gt; 安装&lt;/p&gt;
&lt;h3 id="初始化环境"&gt;初始化环境&lt;/h3&gt;
&lt;p&gt;使用 Python 3.8 版本创建运行环境&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;conda create -n coral &lt;span style="color:#dcaeea"&gt;python&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;=&lt;/span&gt;3.8
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;待创建完成后激活该环境&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;conda activate coral
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="运行-demo"&gt;运行 Demo&lt;/h2&gt;
&lt;h3 id="下载项目"&gt;下载项目&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;创建 Coral 的工作目录，并克隆项目到本地&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mkdir coral &lt;span style="color:#c7bf54"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style="color:#ef8383"&gt;cd&lt;/span&gt; coral
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;git clone https://github.com/google-coral/pycoral.git
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="下载依赖"&gt;下载依赖&lt;/h3&gt;
&lt;h4 id="下载模型图片依赖"&gt;下载模型、图片依赖&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ef8383"&gt;cd&lt;/span&gt; pycoral
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;bash examples/install_requirements.sh classify_image.py
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id="安装项目依赖"&gt;安装项目依赖&lt;/h4&gt;
&lt;p&gt;需要安装 pycoral 和 tflite-runtime，但是在 Ubuntu 22 上无法通过 &lt;code&gt;sudo apt-get install python3-pycoral&lt;/code&gt; 直接安装 &lt;code&gt;python3-pycoral&lt;/code&gt;，因此需要指定依赖地址安装；相关版本可以从 &lt;a href="https://github.com/google-coral/pycoral/releases/"&gt;https://github.com/google-coral/pycoral/releases/&lt;/a&gt; 查找&lt;/p&gt;</description></item><item><title>Ubuntu 22 安装 Google Coral TPU NVME 驱动</title><link>https://blog.hellowood.dev/posts/ubuntu-22-%E5%AE%89%E8%A3%85-google-coral-tpu-nvme-%E9%A9%B1%E5%8A%A8/</link><pubDate>Mon, 08 Jul 2024 09:07:20 +0800</pubDate><guid>https://blog.hellowood.dev/posts/ubuntu-22-%E5%AE%89%E8%A3%85-google-coral-tpu-nvme-%E9%A9%B1%E5%8A%A8/</guid><description>&lt;p&gt;最近折腾图像识别和视频对象检测，因为需要长期低功耗运行，所以购入了 Google Coral TPU&lt;/p&gt;
&lt;p&gt;Google Coral TPU 是一款专为边缘应用设计的机器学习加速器，由 Google 设计和开发，它基于 TensorFlow Lite 模型，能够在低功耗的情况下提供快速的神经网络性能，适用于边缘设备，用于目标检测和图像分类(如开源 NVR Frigate)；可以使用 Yolo、MobikeNet 等模型&lt;/p&gt;
&lt;p&gt;单个 Coral TPU 芯片有 4T OPS 的算力，每秒可以识别大概 100 帧的视频内容，非常适合低功耗、本地场景，可以有效保护隐私；虽然 Coral 从 2021年开始不再更新，但是在边缘场景下依然是非常合适的选择&lt;/p&gt;
&lt;p&gt;Coral TPU 有多种型号，如开发板、USB 配件、M2、Mini PCIE等，这里使用的是 M.2 Accelerator B+M key 的版本。关于 Coral 不同类型的设备更多信息参考 &lt;a href="https://coral.ai/products/"&gt;Products&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;

 &lt;img src="https://lh3.googleusercontent.com/-R0H37d9aKorHo_VYWf8hCfukvbZolBaW2SHW1uDDn1G411r3MqemjxPZa9f44q8OwlfYIkGxSoj-GQbZGd2j7lxtyzSklIQVUWvo9r88mn8CzB-rcw=w2000-rw" alt="" loading="lazy"&gt;
&lt;/p&gt;
&lt;h2 id="要求"&gt;要求&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;系统：Linux、Windows&lt;/li&gt;
&lt;li&gt;环境：python3.6-3.9&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="安装"&gt;安装&lt;/h2&gt;
&lt;h3 id="安装-coral-tpu"&gt;安装 Coral TPU&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;安装 Coral TPU&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;将 Coral TPU 安装到 M.2 插槽&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;检查连接&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;等待启动后，检查 NVME 连接&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;lspci -nn | grep 089a
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;已经正确识别到了 Coral TPU&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;03:00.0 System peripheral &lt;span style="color:#c7bf54"&gt;[&lt;/span&gt;0880&lt;span style="color:#c7bf54"&gt;]&lt;/span&gt;: Global Unichip Corp. Coral Edge TPU &lt;span style="color:#c7bf54"&gt;[&lt;/span&gt;1ac1:089a&lt;span style="color:#c7bf54"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="安装驱动"&gt;安装驱动&lt;/h3&gt;
&lt;p&gt;需要安装 &lt;code&gt;gasket-dkms&lt;/code&gt; 和 &lt;code&gt;libedgetpu1-std&lt;/code&gt;；&lt;/p&gt;</description></item><item><title>Ubuntu 22 安装 NVIDIA 显卡驱动和 CUDA</title><link>https://blog.hellowood.dev/posts/ubuntu-22-%E5%AE%89%E8%A3%85-nvidia-%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8%E5%92%8C-cuda/</link><pubDate>Mon, 08 Jul 2024 08:58:48 +0800</pubDate><guid>https://blog.hellowood.dev/posts/ubuntu-22-%E5%AE%89%E8%A3%85-nvidia-%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8%E5%92%8C-cuda/</guid><description>&lt;p&gt;在 Ubuntu 22 上使用 NVIDIA 的显卡运行图像识别的训练，需要安装驱动和 CUDA&lt;/p&gt;
&lt;h2 id="安装驱动"&gt;安装驱动&lt;/h2&gt;
&lt;h3 id="获取支持的驱动"&gt;获取支持的驱动&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;更新 Ubuntu 依赖&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt update
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;安装 ubuntu-drivers-common&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;ubuntu-drivers-common&lt;/code&gt; 是 Ubuntu 用于管理和安装第三方硬件驱动程序的工具，能够管理和安装硬件驱动程序&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt install ubuntu-drivers-common
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;获取支持的驱动列表&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;ubuntu-drivers&lt;/code&gt; 获取适用于系统的 NVIDIA 驱动程序列表&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ubuntu-drivers devices
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;在输出信息中，可以看到设备是 &lt;code&gt;GeForce RTX 3070 Ti&lt;/code&gt;, 推荐使用的驱动是 &lt;code&gt;nvidia-driver-555&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c7bf54"&gt;==&lt;/span&gt; /sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0 &lt;span style="color:#c7bf54"&gt;==&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;modalias : pci:v000010DEd00002482sv000010DEsd0000146Abc03sc00i00
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;vendor : NVIDIA Corporation
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;model : GA104 &lt;span style="color:#c7bf54"&gt;[&lt;/span&gt;GeForce RTX &lt;span style="color:#d19a66"&gt;3070&lt;/span&gt; Ti&lt;span style="color:#c7bf54"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;driver : nvidia-driver-550 - third-party non-free
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;driver : nvidia-driver-520 - third-party non-free
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;driver : nvidia-driver-525 - third-party non-free
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;driver : nvidia-driver-555 - third-party non-free recommended
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;driver : nvidia-driver-545-open - distro non-free
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;driver : nvidia-driver-470-server - distro non-free
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;driver : nvidia-driver-470 - distro non-free
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;driver : nvidia-driver-535-open - distro non-free
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;driver : nvidia-driver-515 - third-party non-free
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;driver : nvidia-driver-535-server - distro non-free
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;driver : nvidia-driver-550-open - third-party non-free
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;driver : nvidia-driver-535 - third-party non-free
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;driver : nvidia-driver-545 - third-party non-free
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;driver : nvidia-driver-535-server-open - distro non-free
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;driver : nvidia-driver-555-open - third-party non-free
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;driver : xserver-xorg-video-nouveau - distro free &lt;span style="color:#ef8383"&gt;builtin&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="安装-nvidia-驱动"&gt;安装 NVIDIA 驱动&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;安装驱动&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apt install nvidia-driver-555
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;重启系统&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;等待安装完成后重启系统&lt;/p&gt;</description></item><item><title>Ubuntu 22 安装 Intel N100 显卡驱动</title><link>https://blog.hellowood.dev/posts/ubuntu-22-%E5%AE%89%E8%A3%85-intel-n100-%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8/</link><pubDate>Mon, 08 Jul 2024 08:41:49 +0800</pubDate><guid>https://blog.hellowood.dev/posts/ubuntu-22-%E5%AE%89%E8%A3%85-intel-n100-%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8/</guid><description>&lt;p&gt;最近 N5105 的 HomeLab Server 负载过高，CPU 长期接近100%，因此新购入一台 N100，将视频和图像相关的服务迁移到 N100，但是发现 Ubuntu 22 默认没有显卡驱动，需要手动安装&lt;/p&gt;
&lt;h2 id="检查驱动状态"&gt;检查驱动状态&lt;/h2&gt;
&lt;p&gt;使用 intel_gpu_top 检查显卡状态，发现提示没有设备，这是因为没有安装驱动导致的&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;安装 intel-gpu-tools&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt install intel-gpu-tools
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;检查状态&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;intel_gpu_top
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;No device filter specified and no discrete/integrated i915 devices found
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="安装驱动"&gt;安装驱动&lt;/h2&gt;
&lt;h3 id="配置软件源"&gt;配置软件源&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;安装依赖工具&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt update
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt install -y gpg-agent wget
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;添加 Intel 软件源&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;运行以下命令，将 Intel 软件源添加到 apt 的配置中并更新&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;. /etc/os-release
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c678dd"&gt;if&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;[[&lt;/span&gt; ! &lt;span style="color:#63c381"&gt;&amp;#34; jammy &amp;#34;&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;=&lt;/span&gt;~ &lt;span style="color:#63c381"&gt;&amp;#34; &lt;/span&gt;&lt;span style="color:#98c379"&gt;${&lt;/span&gt;&lt;span style="color:#dcaeea"&gt;VERSION_CODENAME&lt;/span&gt;&lt;span style="color:#98c379"&gt;}&lt;/span&gt;&lt;span style="color:#63c381"&gt; &amp;#34;&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;]]&lt;/span&gt;; &lt;span style="color:#c678dd"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ef8383"&gt;echo&lt;/span&gt; &lt;span style="color:#63c381"&gt;&amp;#34;Ubuntu version &lt;/span&gt;&lt;span style="color:#98c379"&gt;${&lt;/span&gt;&lt;span style="color:#dcaeea"&gt;VERSION_CODENAME&lt;/span&gt;&lt;span style="color:#98c379"&gt;}&lt;/span&gt;&lt;span style="color:#63c381"&gt; not supported&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c678dd"&gt;else&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; wget -qO - https://repositories.intel.com/gpu/intel-graphics.key | &lt;span style="color:#d26464;font-weight:bold"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sudo gpg --yes --dearmor --output /usr/share/keyrings/intel-graphics.gpg
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ef8383"&gt;echo&lt;/span&gt; &lt;span style="color:#63c381"&gt;&amp;#34;deb [arch=amd64 signed-by=/usr/share/keyrings/intel-graphics.gpg] https://repositories.intel.com/gpu/ubuntu &lt;/span&gt;&lt;span style="color:#98c379"&gt;${&lt;/span&gt;&lt;span style="color:#dcaeea"&gt;VERSION_CODENAME&lt;/span&gt;&lt;span style="color:#98c379"&gt;}&lt;/span&gt;&lt;span style="color:#63c381"&gt;/lts/2350 unified&amp;#34;&lt;/span&gt; | &lt;span style="color:#d26464;font-weight:bold"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sudo tee /etc/apt/sources.list.d/intel-gpu-&lt;span style="color:#98c379"&gt;${&lt;/span&gt;&lt;span style="color:#dcaeea"&gt;VERSION_CODENAME&lt;/span&gt;&lt;span style="color:#98c379"&gt;}&lt;/span&gt;.list
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sudo apt update
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c678dd"&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="安装驱动-1"&gt;安装驱动&lt;/h3&gt;
&lt;p&gt;安装依赖的软件和显卡驱动&lt;/p&gt;</description></item><item><title>使用 Ubuntu 搭建 NFS 服务器</title><link>https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8-ubuntu-%E6%90%AD%E5%BB%BA-nfs-%E6%9C%8D%E5%8A%A1%E5%99%A8/</link><pubDate>Sat, 27 Jan 2024 11:20:19 +0800</pubDate><guid>https://blog.hellowood.dev/posts/%E4%BD%BF%E7%94%A8-ubuntu-%E6%90%AD%E5%BB%BA-nfs-%E6%9C%8D%E5%8A%A1%E5%99%A8/</guid><description>&lt;p&gt;NFS(Network File System) 是由 Sun 公司提出的分布式文件系统协议，可以通过网络共享远程目录；默认没有加密，不提供身份验证，而是通过客户端 IP 或主机名限制客户端的访问&lt;/p&gt;
&lt;h2 id="搭建-server-端"&gt;搭建 Server 端&lt;/h2&gt;
&lt;h3 id="安装-nfs-kernel-server"&gt;安装 nfs-kernel-server&lt;/h3&gt;
&lt;p&gt;NFS 的 Server 端由 &lt;code&gt;nfs-kernel-server&lt;/code&gt; 提供，使用 apt 进行安装&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apt update
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apt install -y nfs-kernel-server
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;安装完成后，使用 &lt;code&gt;systemctl&lt;/code&gt; 查看状态&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;systemctl status nfs-mountd.service
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;● nfs-mountd.service - NFS Mount Daemon
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Loaded: loaded &lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;/lib/systemd/system/nfs-mountd.service; static&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Active: active &lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;running&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt; since Thu 2022-09-22 18:43:43 CST; 1h 5min ago
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Main PID: &lt;span style="color:#d19a66"&gt;128914&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;rpc.mountd&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Tasks: &lt;span style="color:#d19a66"&gt;1&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;limit: 4415&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Memory: 556.0K
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; CPU: 59ms
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; CGroup: /system.slice/nfs-mountd.service
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; └─128914 /usr/sbin/rpc.mountd
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Sep &lt;span style="color:#d19a66"&gt;22&lt;/span&gt; 18:43:43 rasp systemd&lt;span style="color:#c7bf54"&gt;[&lt;/span&gt;1&lt;span style="color:#c7bf54"&gt;]&lt;/span&gt;: Starting NFS Mount Daemon...
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Sep &lt;span style="color:#d19a66"&gt;22&lt;/span&gt; 18:43:43 rasp rpc.mountd&lt;span style="color:#c7bf54"&gt;[&lt;/span&gt;128914&lt;span style="color:#c7bf54"&gt;]&lt;/span&gt;: Version 2.6.1 starting
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Sep &lt;span style="color:#d19a66"&gt;22&lt;/span&gt; 18:43:43 rasp systemd&lt;span style="color:#c7bf54"&gt;[&lt;/span&gt;1&lt;span style="color:#c7bf54"&gt;]&lt;/span&gt;: Started NFS Mount Daemon.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="修改-nfs-配置"&gt;修改 NFS 配置&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;创建挂载目录并修改权限&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;首先，创建需要分享的目录，如 &lt;code&gt;/data/nfs&lt;/code&gt;&lt;/p&gt;</description></item><item><title>Ubuntu 22 环境初始化</title><link>https://blog.hellowood.dev/posts/ubuntu-22-%E7%8E%AF%E5%A2%83%E5%88%9D%E5%A7%8B%E5%8C%96/</link><pubDate>Sun, 07 Jan 2024 18:03:00 +0800</pubDate><guid>https://blog.hellowood.dev/posts/ubuntu-22-%E7%8E%AF%E5%A2%83%E5%88%9D%E5%A7%8B%E5%8C%96/</guid><description>&lt;p&gt;在搭建 HomeLab 测试使用过程中，可能会经常创建新的 Ubuntu 虚拟机，或初始化树莓派，记录一些常用的初始化配置&lt;/p&gt;
&lt;h2 id="修改主机名"&gt;修改主机名&lt;/h2&gt;
&lt;p&gt;将主机名改为 &lt;code&gt;homelab&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;hostnamectl hostname homelab
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="引入-ssh-公钥"&gt;引入 SSH 公钥&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;从本地导入&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在本地执行，将公钥复制到要登录的机器上&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ssh-copy-id -i ~/.ssh/id_rsa.pub ubuntu@192.168.2.5
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="修改-apt-源"&gt;修改 APT 源&lt;/h2&gt;
&lt;p&gt;将默认的 APT 源替换为&lt;a href="https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/"&gt;清华&lt;/a&gt;的源&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;修改镜像源&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mv /etc/apt/sources.list /etc/apt/sources.list.backup
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo bash -c &lt;span style="color:#63c381"&gt;&amp;#34;cat &amp;lt;&amp;lt; EOF &amp;gt; /etc/apt/sources.list &amp;amp;&amp;amp; apt update
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#63c381"&gt;deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#63c381"&gt;# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#63c381"&gt;deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#63c381"&gt;# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#63c381"&gt;deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#63c381"&gt;# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#63c381"&gt;deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#63c381"&gt;# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#63c381"&gt;EOF&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后使用 update 验证&lt;/p&gt;</description></item><item><title>Docker 使用 NFS 作为数据卷存储</title><link>https://blog.hellowood.dev/posts/docker-%E4%BD%BF%E7%94%A8-nfs-%E4%BD%9C%E4%B8%BA%E6%95%B0%E6%8D%AE%E5%8D%B7%E5%AD%98%E5%82%A8/</link><pubDate>Thu, 22 Sep 2022 11:20:19 +0800</pubDate><guid>https://blog.hellowood.dev/posts/docker-%E4%BD%BF%E7%94%A8-nfs-%E4%BD%9C%E4%B8%BA%E6%95%B0%E6%8D%AE%E5%8D%B7%E5%AD%98%E5%82%A8/</guid><description>&lt;p&gt;在搭建 HomeLab 的过程中，出现因虚拟机故障导致容器挂载在虚拟机上的数据丢失的问题，因此，将数据挂载在虚拟机上仍然存在风险；同时为了将计算和数据分离，HomeLab 所在的服务器只做计算，将数据存储转移到 NAS上；因此，使用 NFS 作为 Docker 的数据卷，将数据挂载到远程的 NAS 存储中&lt;/p&gt;
&lt;p&gt;Docker 支持 Samba/NFS 等协议的远程存储&lt;/p&gt;
&lt;h2 id="创建-docker-nfs-数据卷"&gt;创建 Docker NFS 数据卷&lt;/h2&gt;
&lt;p&gt;通过 docker 命令创建 NFS 的数据卷，在创建时，指定驱动为 &lt;code&gt;local&lt;/code&gt;，类型是 &lt;code&gt;nfs&lt;/code&gt;，同时指定地址和协议版本，以及服务端的挂载路径，名称为 &lt;code&gt;nginx-volume&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker volume create --driver &lt;span style="color:#ef8383"&gt;local&lt;/span&gt; &lt;span style="color:#d26464;font-weight:bold"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--opt &lt;span style="color:#dcaeea"&gt;type&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;=&lt;/span&gt;nfs &lt;span style="color:#d26464;font-weight:bold"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--opt &lt;span style="color:#dcaeea"&gt;o&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;=&lt;/span&gt;&lt;span style="color:#dcaeea"&gt;addr&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;=&lt;/span&gt;192.168.2.10,nolock,vers&lt;span style="color:#c7bf54"&gt;=&lt;/span&gt;4,soft,rw &lt;span style="color:#d26464;font-weight:bold"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--opt &lt;span style="color:#dcaeea"&gt;device&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;=&lt;/span&gt;:/workspaces/data/docker/nginx &lt;span style="color:#d26464;font-weight:bold"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;nginx-volume
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;查看 &lt;code&gt;nginx-volume&lt;/code&gt; 信息&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker volume inspect nginx-volume
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c7bf54"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c7bf54"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#63c381"&gt;&amp;#34;CreatedAt&amp;#34;&lt;/span&gt;: &lt;span style="color:#63c381"&gt;&amp;#34;2022-09-22T14:48:26+08:00&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#63c381"&gt;&amp;#34;Driver&amp;#34;&lt;/span&gt;: &lt;span style="color:#63c381"&gt;&amp;#34;local&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#63c381"&gt;&amp;#34;Labels&amp;#34;&lt;/span&gt;: &lt;span style="color:#c7bf54"&gt;{}&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#63c381"&gt;&amp;#34;Mountpoint&amp;#34;&lt;/span&gt;: &lt;span style="color:#63c381"&gt;&amp;#34;/var/lib/docker/volumes/nginx-volume/_data&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#63c381"&gt;&amp;#34;Name&amp;#34;&lt;/span&gt;: &lt;span style="color:#63c381"&gt;&amp;#34;nfs-volume&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#63c381"&gt;&amp;#34;Options&amp;#34;&lt;/span&gt;: &lt;span style="color:#c7bf54"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#63c381"&gt;&amp;#34;device&amp;#34;&lt;/span&gt;: &lt;span style="color:#63c381"&gt;&amp;#34;:/workspaces/data/docker/nginx&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#63c381"&gt;&amp;#34;o&amp;#34;&lt;/span&gt;: &lt;span style="color:#63c381"&gt;&amp;#34;addr=192.168.2.10,nolock,vers=4,soft,rw&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#63c381"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style="color:#63c381"&gt;&amp;#34;nfs&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c7bf54"&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#63c381"&gt;&amp;#34;Scope&amp;#34;&lt;/span&gt;: &lt;span style="color:#63c381"&gt;&amp;#34;local&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#c7bf54"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c7bf54"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="容器中使用-nfs-数据卷"&gt;容器中使用 NFS 数据卷&lt;/h2&gt;
&lt;h3 id="在容器中挂载"&gt;在容器中挂载&lt;/h3&gt;
&lt;p&gt;以 Nginx 为例，挂载 &lt;code&gt;nginx-volume&lt;/code&gt; 到容器中；也可以使用 &lt;code&gt;-v nginx-volume:/data&lt;/code&gt;的方式挂载，这两个命令的区别在于如果挂载的数据卷不存在，&lt;code&gt;-v&lt;/code&gt; 会创建一个，而 &lt;code&gt;--mount&lt;/code&gt;会报错&lt;/p&gt;</description></item><item><title>Ubuntu Server 22 虚拟机空间扩容</title><link>https://blog.hellowood.dev/posts/ubuntu-server-22-%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%A9%BA%E9%97%B4%E6%89%A9%E5%AE%B9/</link><pubDate>Fri, 09 Sep 2022 11:20:19 +0800</pubDate><guid>https://blog.hellowood.dev/posts/ubuntu-server-22-%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%A9%BA%E9%97%B4%E6%89%A9%E5%AE%B9/</guid><description>&lt;blockquote&gt;
&lt;p&gt;使用 Esxi 安装 Ubuntu Server 后，发现分配的 20G 磁盘空间不够，通过 Esxi 控制台将磁盘扩容到 40G，重启后还需要手动调整&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="检查未分区空间"&gt;检查未分区空间&lt;/h3&gt;
&lt;p&gt;修改了磁盘大小后，新增的空间状态是未分区，首先检查是否新增成功&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用 &lt;code&gt;fdisk&lt;/code&gt; 查看&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;使用 &lt;code&gt;fdisk&lt;/code&gt; 命令查看 &lt;code&gt;/dev/sda&lt;/code&gt;设备情况&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;fdisk /dev/sda
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;输入 &lt;code&gt;F&lt;/code&gt; 显示未分区的空间大小&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Command &lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;m &lt;span style="color:#c678dd"&gt;for&lt;/span&gt; &lt;span style="color:#ef8383"&gt;help&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;: F
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Unpartitioned space /dev/sda: &lt;span style="color:#d19a66"&gt;20971520&lt;/span&gt; B, &lt;span style="color:#d19a66"&gt;167772160&lt;/span&gt; bytes, &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; sectors
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Units: sectors of &lt;span style="color:#d19a66"&gt;1&lt;/span&gt; * &lt;span style="color:#dcaeea"&gt;512&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;=&lt;/span&gt; &lt;span style="color:#d19a66"&gt;512&lt;/span&gt; bytes
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Sector size &lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;logical/physical&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;: &lt;span style="color:#d19a66"&gt;512&lt;/span&gt; bytes / &lt;span style="color:#d19a66"&gt;512&lt;/span&gt; bytes
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="将未分区空间添加到已有分区"&gt;将未分区空间添加到已有分区&lt;/h3&gt;
&lt;p&gt;需要先将这部分空间添加到系统挂载的对应分区&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;查找根目录挂载的设备&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;通过 &lt;code&gt;df&lt;/code&gt; 命令查看空间，发现挂载到根&lt;code&gt;/&lt;/code&gt;目录的设备是 &lt;code&gt;/dev/mapper/ubuntu--vg-ubuntu--lv&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;df -h
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;结果：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Filesystem Size Used Avail Use% Mounted on
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tmpfs 796M 1.5M 794M 1% /run
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/dev/mapper/ubuntu--vg-ubuntu--lv 19G 16G 1.6G 92% /
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tmpfs 3.9G &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; 3.9G 0% /dev/shm
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tmpfs 5.0M &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; 5.0M 0% /run/lock
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/dev/sda2 2.0G 127M 1.7G 7% /boot
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/dev/sda1 1.1G 5.3M 1.1G 1% /boot/efi
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tmpfs 796M 4.0K 796M 1% /run/user/0
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;使用 &lt;code&gt;lsblk&lt;/code&gt; 查看分区信息，发现 &lt;code&gt;ubuntu--vg-ubuntu--lv&lt;/code&gt;是在&lt;code&gt;/dev/sda3&lt;/code&gt;下的逻辑分区，所以需要将未分区的空间添加到 &lt;code&gt;/sda/sda3&lt;/code&gt;分区下&lt;/p&gt;</description></item><item><title>Ubuntu 22 设置静态 IP</title><link>https://blog.hellowood.dev/posts/ubuntu-22-%E8%AE%BE%E7%BD%AE%E9%9D%99%E6%80%81-ip/</link><pubDate>Mon, 05 Sep 2022 11:20:19 +0800</pubDate><guid>https://blog.hellowood.dev/posts/ubuntu-22-%E8%AE%BE%E7%BD%AE%E9%9D%99%E6%80%81-ip/</guid><description>&lt;p&gt;在虚拟机中启动了 Ubuntu Server 作为日常使用的服务器，同时将 DHCP 和 DNS 相关的服务也运行在这个 Ubuntu Server上；&lt;/p&gt;
&lt;p&gt;因为在 DHCP 服务中使用IP 和 Mac 绑定的方式分配 IP，因此 Ubuntu Server 是以 DHCP 方式获取 IP地址；但是在一次意外重启后，无法访问 Ubuntu Server，查看网络发现是因为网卡没有分配到 IP，这是 Ubuntu Server 依赖 DHCP 服务分配 IP，但是 DHCP 服务因为宿主机没有网络所以无法访问，造成死循环；因此通过为 Ubuntu Server 设置静态 IP 的方式，避免重启后再次出现这样的问题&lt;/p&gt;
&lt;h2 id="配置静态-ip"&gt;配置静态 IP&lt;/h2&gt;
&lt;h3 id="1-查找网卡"&gt;1 查找网卡&lt;/h3&gt;
&lt;p&gt;通常情况下，有线网卡名称通常为 &lt;code&gt;eth0&lt;/code&gt;，无线网卡名称通常为 &lt;code&gt;wlan0&lt;/code&gt;；&lt;/p&gt;
&lt;p&gt;通过 &lt;code&gt;ifconfig&lt;/code&gt; 命令查看网卡信息，返回的 &lt;code&gt;ens160&lt;/code&gt; 就是有线网卡&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ifconfig
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker0: &lt;span style="color:#dcaeea"&gt;flags&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;=&lt;/span&gt;4099&amp;lt;UP,BROADCAST,MULTICAST&amp;gt; mtu &lt;span style="color:#d19a66"&gt;1500&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;inet 172.17.0.1 netmask 255.255.0.0 broadcast 172.17.255.255
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ether 02:42:e2:0c:77:47 txqueuelen &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;Ethernet&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;RX packets &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; bytes &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;0.0 B&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;RX errors &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; dropped &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; overruns &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; frame &lt;span style="color:#d19a66"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;TX packets &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; bytes &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;0.0 B&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;TX errors &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; dropped &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; overruns &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; carrier &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; collisions &lt;span style="color:#d19a66"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ens160: &lt;span style="color:#dcaeea"&gt;flags&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;=&lt;/span&gt;4163&amp;lt;UP,BROADCAST,RUNNING,MULTICAST&amp;gt; mtu &lt;span style="color:#d19a66"&gt;1500&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ether 00:0c:29:df:81:93 txqueuelen &lt;span style="color:#d19a66"&gt;1000&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;Ethernet&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;RX packets &lt;span style="color:#d19a66"&gt;73618&lt;/span&gt; bytes &lt;span style="color:#d19a66"&gt;24761397&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;24.7 MB&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;RX errors &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; dropped &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; overruns &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; frame &lt;span style="color:#d19a66"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;TX packets &lt;span style="color:#d19a66"&gt;27757&lt;/span&gt; bytes &lt;span style="color:#d19a66"&gt;7800899&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;7.8 MB&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;TX errors &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; dropped &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; overruns &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; carrier &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; collisions &lt;span style="color:#d19a66"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;lo: &lt;span style="color:#dcaeea"&gt;flags&lt;/span&gt;&lt;span style="color:#c7bf54"&gt;=&lt;/span&gt;73&amp;lt;UP,LOOPBACK,RUNNING&amp;gt; mtu &lt;span style="color:#d19a66"&gt;65536&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;inet 127.0.0.1 netmask 255.0.0.0
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;inet6 ::1 prefixlen &lt;span style="color:#d19a66"&gt;128&lt;/span&gt; scopeid 0x10&amp;lt;host&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; loop txqueuelen &lt;span style="color:#d19a66"&gt;1000&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;Local Loopback&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; RX packets &lt;span style="color:#d19a66"&gt;298&lt;/span&gt; bytes &lt;span style="color:#d19a66"&gt;48692&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;48.6 KB&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; RX errors &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; dropped &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; overruns &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; frame &lt;span style="color:#d19a66"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; TX packets &lt;span style="color:#d19a66"&gt;298&lt;/span&gt; bytes &lt;span style="color:#d19a66"&gt;48692&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;48.6 KB&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; TX errors &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; dropped &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; overruns &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; carrier &lt;span style="color:#d19a66"&gt;0&lt;/span&gt; collisions &lt;span style="color:#d19a66"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="2-修改网络配置"&gt;2 修改网络配置&lt;/h3&gt;
&lt;p&gt;Ubuntu 22 的配置文件位置是 &lt;code&gt;/etc/netplan/***.yaml&lt;/code&gt;，通常是 &lt;code&gt;/etc/netplan/00-installer-config.yaml&lt;/code&gt;，也可能是 &lt;code&gt;50-cloud-init.yaml&lt;/code&gt;；&lt;/p&gt;</description></item><item><title>树莓派 4b 使用 WiFi 从 SSD Headless 启动</title><link>https://blog.hellowood.dev/posts/%E6%A0%91%E8%8E%93%E6%B4%BE-4b-%E4%BD%BF%E7%94%A8-wifi-%E4%BB%8E-ssd-headless-%E5%90%AF%E5%8A%A8/</link><pubDate>Sat, 24 Apr 2021 21:21:27 +0800</pubDate><guid>https://blog.hellowood.dev/posts/%E6%A0%91%E8%8E%93%E6%B4%BE-4b-%E4%BD%BF%E7%94%A8-wifi-%E4%BB%8E-ssd-headless-%E5%90%AF%E5%8A%A8/</guid><description>&lt;p&gt;树莓派已经默认支持从 SSD 启动，可以根据官方提供的工具初始化树莓派系统并启动；尝试通过安装 Ubuntu Server，不使用网线、显示器、键盘等，从 SSD 直接启动&lt;/p&gt;
&lt;h2 id="依赖"&gt;依赖&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;树莓派 4&lt;/li&gt;
&lt;li&gt;Mac&lt;/li&gt;
&lt;li&gt;SSD&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="安装-ubuntu-server"&gt;安装 Ubuntu Server&lt;/h2&gt;
&lt;h3 id="1-安装-raspberry-pi-imager"&gt;1. 安装 Raspberry Pi Imager&lt;/h3&gt;
&lt;p&gt;Raspberry Pi Imager 是官方提供的树莓派镜像写入工具，可以通过 UI 操作，选择树莓派支持的系统，并直接写入到 SSD 或者 SD 卡中&lt;/p&gt;
&lt;p&gt;直接从 &lt;a href="https://www.raspberrypi.org/software/"&gt;https://www.raspberrypi.org/software/&lt;/a&gt; 下载 Raspberry Pi Imager，并在 Mac 上安装&lt;/p&gt;
&lt;h3 id="2-写入镜像"&gt;2. 写入镜像&lt;/h3&gt;
&lt;p&gt;选择 Ubuntu Server 21.04 64 bit 的镜像，第一次可能需要一些时间下载镜像&lt;/p&gt;
&lt;p&gt;

 &lt;img src="https://img.hellowood.dev/picture/RaspberryPiImagerChooseImage.png" alt="RaspberryPiImagerChooseImage.png" loading="lazy"&gt;
&lt;/p&gt;
&lt;p&gt;插入硬盘后选择要写入的硬盘，并点击写入&lt;/p&gt;
&lt;p&gt;

 &lt;img src="https://img.hellowood.dev/picture/RaspberryPiImagerChooseDisk.png" alt="RaspberryPiImagerChooseDisk.png" loading="lazy"&gt;
&lt;/p&gt;
&lt;p&gt;

 &lt;img src="https://img.hellowood.dev/picture/RaspberryPiImageWriting.png" alt="RaspberryPiImageWriting.png" loading="lazy"&gt;
&lt;/p&gt;
&lt;h3 id="3-配置"&gt;3. 配置&lt;/h3&gt;
&lt;p&gt;硬盘镜像写入完成后，会挂载一个名为 &lt;code&gt;system-boot&lt;/code&gt;的目录，进入该目录，修改配置&lt;/p&gt;
&lt;h4 id="挂载文件"&gt;挂载文件&lt;/h4&gt;
&lt;p&gt;如果可以直接在 Mac 上修改文件，可以跳过这一步；如果文件是只读的，无法修改，可以将磁盘弹出，然后手动挂载或挂载到其他的机器上修改&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8a93a5;font-style:italic"&gt;# 查找磁盘&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;fdisk -l
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Disk /dev/mmcblk0: 59.63 GiB, &lt;span style="color:#d19a66"&gt;64021856256&lt;/span&gt; bytes, &lt;span style="color:#d19a66"&gt;125042688&lt;/span&gt; sectors
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Units: sectors of &lt;span style="color:#d19a66"&gt;1&lt;/span&gt; * &lt;span style="color:#dcaeea"&gt;512&lt;/span&gt; &lt;span style="color:#c7bf54"&gt;=&lt;/span&gt; &lt;span style="color:#d19a66"&gt;512&lt;/span&gt; bytes
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Sector size &lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;logical/physical&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;: &lt;span style="color:#d19a66"&gt;512&lt;/span&gt; bytes / &lt;span style="color:#d19a66"&gt;512&lt;/span&gt; bytes
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;I/O size &lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;minimum/optimal&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;: &lt;span style="color:#d19a66"&gt;512&lt;/span&gt; bytes / &lt;span style="color:#d19a66"&gt;512&lt;/span&gt; bytes
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Disklabel type: dos
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Disk identifier: 0x4ec8ea53
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Device Boot Start End Sectors Size Id Type
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/dev/mmcblk0p1 * &lt;span style="color:#d19a66"&gt;2048&lt;/span&gt; &lt;span style="color:#d19a66"&gt;526335&lt;/span&gt; &lt;span style="color:#d19a66"&gt;524288&lt;/span&gt; 256M c W95 FAT32 &lt;span style="color:#c7bf54"&gt;(&lt;/span&gt;LBA&lt;span style="color:#c7bf54"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/dev/mmcblk0p2 &lt;span style="color:#d19a66"&gt;526336&lt;/span&gt; &lt;span style="color:#d19a66"&gt;6366175&lt;/span&gt; &lt;span style="color:#d19a66"&gt;5839840&lt;/span&gt; 2.8G &lt;span style="color:#d19a66"&gt;83&lt;/span&gt; Linux
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;要修改的配置就在 &lt;code&gt;/dev/mmcblk0p1&lt;/code&gt; 这个用于 Boot 的目录下&lt;/p&gt;</description></item><item><title>树莓派 4b 无网线安装 Ubuntu 并初始化</title><link>https://blog.hellowood.dev/posts/%E6%A0%91%E8%8E%93%E6%B4%BE-4b-%E6%97%A0%E7%BD%91%E7%BA%BF%E5%AE%89%E8%A3%85-ubuntu-%E5%B9%B6%E5%88%9D%E5%A7%8B%E5%8C%96/</link><pubDate>Sun, 15 Dec 2019 22:42:04 +0800</pubDate><guid>https://blog.hellowood.dev/posts/%E6%A0%91%E8%8E%93%E6%B4%BE-4b-%E6%97%A0%E7%BD%91%E7%BA%BF%E5%AE%89%E8%A3%85-ubuntu-%E5%B9%B6%E5%88%9D%E5%A7%8B%E5%8C%96/</guid><description>&lt;blockquote&gt;
&lt;p&gt;必需设备：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;树莓派 4b&lt;/li&gt;
&lt;li&gt;SD 卡&lt;/li&gt;
&lt;li&gt;HDMI 线&lt;/li&gt;
&lt;li&gt;显示器&lt;/li&gt;
&lt;li&gt;键盘&lt;/li&gt;
&lt;li&gt;电源及数据线&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="设置镜像"&gt;设置镜像&lt;/h2&gt;
&lt;p&gt;在树莓派官网的连接，找到 Ubuntu，根据指引，找到 Ubuntu 的镜像，即&lt;a href="https://ubuntu.com/download/raspberry-pi"&gt;https://ubuntu.com/download/raspberry-pi&lt;/a&gt;


 &lt;img src="https://img.hellowood.dev/picture/raspberrypi-ubuntu.png" alt="raspberrypi-ubuntu.png" loading="lazy"&gt;
&lt;/p&gt;
&lt;h3 id="下载镜像"&gt;下载镜像&lt;/h3&gt;
&lt;p&gt;点击下载 64 位镜像，随后会开始下载&lt;a href="http://cdimage.ubuntu.com/releases/19.10.1/release/ubuntu-19.10.1-preinstalled-server-arm64+raspi3.img.xz?_ga=2.165606655.1314896456.1576331584-894154124.1576331584"&gt;ubuntu-19.10.1-preinstalled-server-arm64+raspi3.img.xz&lt;/a&gt;这个文件&lt;/p&gt;
&lt;p&gt;

 &lt;img src="https://img.hellowood.dev/picture/raspberrypi-ubuntu-download.png" alt="raspberrypi-ubuntu-download.png" loading="lazy"&gt;
&lt;/p&gt;
&lt;p&gt;但是这个文件下载很慢，也没有国内的镜像，可以使用迅雷下载，或者直接下载上传的镜像 &lt;a href="https://img.hellowood.dev/picture/ubuntu-19.10.1-preinstalled-server-arm64+raspi3.img.xz"&gt;ubuntu-19.10.1-preinstalled-server-arm64+raspi3.img.xz&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="刻录镜像"&gt;刻录镜像&lt;/h3&gt;
&lt;h4 id="格式化-sd卡"&gt;格式化 SD卡&lt;/h4&gt;
&lt;p&gt;刻录镜像前，要先将 SD 卡格式化，在 Mac 上，可以使用官方推荐的&lt;a href="https://www.sdcard.org/downloads/formatter/"&gt;SD Card Formatter&lt;/a&gt;, 也可以用上传到地址进行下载Mac 版：&lt;a href="https://img.hellowood.dev/picture/SDCardFormatterv5_Mac.zip"&gt;SDCardFormatterv5_Mac.zip&lt;/a&gt;&lt;/p&gt;
&lt;h4 id="刻录镜像-1"&gt;刻录镜像&lt;/h4&gt;
&lt;p&gt;刻录镜像有多种方式，不同平台操作不同，可以参考 &lt;a href="https://ubuntu.com/download/iot/installation-media"&gt;https://ubuntu.com/download/iot/installation-media&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;在 Mac 上，可以用官方推荐的软件&lt;a href="https://www.balena.io/etcher"&gt;balenaEtcher&lt;/a&gt;，可以从上传的位置下载&lt;a href="https://img.hellowood.dev/picture/balenaEtcher-1.5.70.dmg"&gt;balenaEtcher-1.5.70.dmg&lt;/a&gt;，也可以直接用命令行执行&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;查找 SD 卡挂载名称&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;diskutil list
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;/dev/disk0 (internal, physical):
 #: TYPE NAME SIZE IDENTIFIER
 0: GUID_partition_scheme *500.3 GB disk0
 1: EFI EFI 314.6 MB disk0s1
 2: Apple_APFS Container disk1 500.0 GB disk0s2

/dev/disk1 (synthesized):
 #: TYPE NAME SIZE IDENTIFIER
 0: APFS Container Scheme - +500.0 GB disk1
 Physical Store disk0s2
 1: APFS Volume Macintosh HD - 数据 280.9 GB disk1s1
 2: APFS Volume Preboot 82.4 MB disk1s2
 3: APFS Volume Recovery 528.5 MB disk1s3
 4: APFS Volume VM 8.6 GB disk1s4
 5: APFS Volume Macintosh HD 10.8 GB disk1s5
/dev/disk3
#: TYPE NAME SIZE IDENTIFIER
0: FDisk_partition_scheme *32.0 GB disk3
1: DOS_FAT_32 SD 32.0 GB disk3s1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;其中的 &lt;code&gt;/dev/disk3&lt;/code&gt;就是 SD卡&lt;/p&gt;</description></item><item><title>Ubuntu/Docker 替换软件源</title><link>https://blog.hellowood.dev/posts/ubuntu-docker-%E6%9B%BF%E6%8D%A2%E8%BD%AF%E4%BB%B6%E6%BA%90/</link><pubDate>Mon, 27 May 2019 15:06:43 +0800</pubDate><guid>https://blog.hellowood.dev/posts/ubuntu-docker-%E6%9B%BF%E6%8D%A2%E8%BD%AF%E4%BB%B6%E6%BA%90/</guid><description>&lt;h2 id="ubuntu"&gt;Ubuntu&lt;/h2&gt;
&lt;h3 id="使用-sed-命令"&gt;使用 sed 命令&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo sed -i &lt;span style="color:#98c379"&gt;&amp;#39;s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g&amp;#39;&lt;/span&gt; /etc/apt/sources.list/
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="手动修改"&gt;手动修改&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ef8383"&gt;cd&lt;/span&gt; /etc/apt/
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo mv sources.list sources.list.bak
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo vi sources.list
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;输入以下内容&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ xenial-proposed main restricted universe multiverse

deb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse

deb-src http://mirrors.aliyun.com/ubuntu/ xenial-proposed main restricted universe multiverse

deb http://archive.canonical.com/ubuntu/ xenial partner
deb http://extras.ubuntu.com/ubuntu/ xenial main
&lt;/code&gt;&lt;/pre&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt-get update
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt-get upgrade
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="docker-alpine-镜像替换软件源"&gt;Docker alpine 镜像替换软件源&lt;/h2&gt;
&lt;h3 id="在-dockerfile-中添加"&gt;在 Dockerfile 中添加&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-dockerfile" data-lang="dockerfile"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c678dd"&gt;RUN&lt;/span&gt; sed -i &lt;span style="color:#98c379"&gt;&amp;#39;s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g&amp;#39;&lt;/span&gt; /etc/apk/repositories
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="修改容器中软件源"&gt;修改容器中软件源&lt;/h3&gt;
&lt;h4 id="使用-sed-命令-1"&gt;使用 sed 命令&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sed -i &lt;span style="color:#98c379"&gt;&amp;#39;s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g&amp;#39;&lt;/span&gt; /etc/apk/repositories
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="手动修改-1"&gt;手动修改&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;vi etc/apk/repositories
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;输入以下内容&lt;/p&gt;</description></item><item><title>Ubuntu 搭建 ShadowSocks 服务</title><link>https://blog.hellowood.dev/posts/ubuntu-%E6%90%AD%E5%BB%BA-shadowsocks-%E6%9C%8D%E5%8A%A1/</link><pubDate>Sun, 21 Oct 2018 22:39:52 +0800</pubDate><guid>https://blog.hellowood.dev/posts/ubuntu-%E6%90%AD%E5%BB%BA-shadowsocks-%E6%9C%8D%E5%8A%A1/</guid><description>&lt;blockquote&gt;
&lt;p&gt;在 Ubuntu 服务器上通过脚本安装 ShadowSocks 服务&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;来自 &lt;a href="https://teddysun.com/342.html"&gt;https://teddysun.com/342.html&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="安装"&gt;安装&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;下载安装脚本&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;wget --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks.sh
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;改变脚本执行权限&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;chmod +x shadowsocks.sh
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;执行&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;./shadowsocks.sh 2&amp;gt;&amp;amp;1 | tee shadowsocks.log
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;添加配置
在执行过程中会提示设置端口，密码，加密算法等配置，根据需要自己选择即可，端口默认&lt;code&gt;8899&lt;/code&gt;，加密算法可选&lt;code&gt;aes-256-cfb&lt;/code&gt;，适合大多数设备使用&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Congratulations, Shadowsocks-python server install completed!
Your Server IP : 127.0.0.1
Your Server Port : 8899
Your Password : password
Your Encryption Method: aes-256-cfb

Welcome to visit:https://teddysun.com/342.html
Enjoy it!
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;安装完成，在客户端设备添加配置即可&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;后续修改设置可以在 &lt;code&gt;/etc/shadowsocks.json&lt;/code&gt;中修改&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;多账户多端口配置，修改配置文件 &lt;code&gt;/etc/shadowsocks.json&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;{
 &amp;#34;server&amp;#34;:&amp;#34;0.0.0.0&amp;#34;,
 &amp;#34;local_address&amp;#34;:&amp;#34;127.0.0.1&amp;#34;,
 &amp;#34;local_port&amp;#34;:1080,
 &amp;#34;port_password&amp;#34;:{
 &amp;#34;8989&amp;#34;:&amp;#34;password0&amp;#34;,
 &amp;#34;9001&amp;#34;:&amp;#34;password1&amp;#34;,
 &amp;#34;9002&amp;#34;:&amp;#34;password2&amp;#34;,
 &amp;#34;9003&amp;#34;:&amp;#34;password3&amp;#34;,
 &amp;#34;9004&amp;#34;:&amp;#34;password4&amp;#34;
 },
 &amp;#34;timeout&amp;#34;:300,
 &amp;#34;method&amp;#34;:&amp;#34;your_encryption_method&amp;#34;,
 &amp;#34;fast_open&amp;#34;: false
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="卸载"&gt;卸载&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;./shadowsocks.sh uninstall
&lt;/code&gt;&lt;/pre&gt;</description></item><item><title>Ubuntu 服务器上传和下载文件</title><link>https://blog.hellowood.dev/posts/ubuntu-%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E4%BC%A0%E5%92%8C%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6/</link><pubDate>Tue, 10 Apr 2018 14:47:07 +0800</pubDate><guid>https://blog.hellowood.dev/posts/ubuntu-%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E4%BC%A0%E5%92%8C%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6/</guid><description>&lt;p&gt;使用 &lt;code&gt;scp&lt;/code&gt; 命令完成文件的上传和下载&lt;/p&gt;
&lt;h2 id="上传"&gt;上传&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;上传单个文件&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;scp -p port source_dictionary_file user@ServerIp:target_dictionary_file
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;prot 默认是22，如果使用默认可以不写&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;scp /User/hellowood/wechat.jpg root@192.168.0.2:/home/hellowood/wechat.jpg
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;上传整个文件夹&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;scp -p port -r source_dictionary user@ServerIp:target_dictionary
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;scp -r /User/hellowood/tomcat root@192.168.0.2:/home/hellowood/tomcat
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="下载"&gt;下载&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;下载单个文件&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;scp -p user@ServerIp:source_dictionary_file target_dictionary
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;scp root@192.168.0.2:/home/hellowood/wechat.jpg /User/hellowood/wechat.jpg
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;下载文件夹&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;scp -p port -r user@ServerIp:source_dictionary target_dictionry
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;scp -r root@192.168.0.2:/home/hellowood/tomcat /User/hellowood/tomcat
&lt;/code&gt;&lt;/pre&gt;</description></item><item><title>Docker 配置 Nginx 访问宿主机目录下的应用</title><link>https://blog.hellowood.dev/posts/docker-%E9%85%8D%E7%BD%AE-nginx-%E8%AE%BF%E9%97%AE%E5%AE%BF%E4%B8%BB%E6%9C%BA%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E5%BA%94%E7%94%A8/</link><pubDate>Tue, 10 Apr 2018 11:39:09 +0800</pubDate><guid>https://blog.hellowood.dev/posts/docker-%E9%85%8D%E7%BD%AE-nginx-%E8%AE%BF%E9%97%AE%E5%AE%BF%E4%B8%BB%E6%9C%BA%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E5%BA%94%E7%94%A8/</guid><description>&lt;blockquote&gt;
&lt;p&gt;使用 Nginx 将请求转发到宿主机的 Tomcat 应用&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="配置并启动-tomcat"&gt;配置并启动 Tomcat&lt;/h2&gt;
&lt;h2 id="安装-docker"&gt;安装 Docker&lt;/h2&gt;
&lt;h2 id="配置-nginx"&gt;配置 Nginx&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;创建配置和日志文件夹&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;mkdir /home/nginx/conf
mkdir /home/nginx/logs
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;查询宿主机 IP&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;docker inspect --format &amp;#39;{{ .NetworkSettings.IPAddress }}&amp;#39; &amp;lt;container-ID&amp;gt;

# 或
docker inspect &amp;lt;container id&amp;gt;

# 或
docker inspect -f &amp;#39;{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}&amp;#39; container_name_or_id
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;添加配置文件 &lt;code&gt;nginx.conf&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;将 &lt;code&gt;8084&lt;/code&gt;端口转发到&lt;code&gt;8080&lt;/code&gt;端口，使用 &lt;code&gt;log_format&lt;/code&gt;目的是为了使用阿里云监控切分日志，可以没有&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;log_format proxyformat &amp;#34;$remote_addr $request_time $http_x_readtime [$time_local] \&amp;#34;$request_method http://$host$request_uri\&amp;#34; $status $body_bytes_sent \&amp;#34;$http_referer\&amp;#34; \&amp;#34;$upstream_addr\&amp;#34; \&amp;#34;$http_user_agent\&amp;#34; \&amp;#34;$upstream_response_time\&amp;#34; \&amp;#34;$request_time\&amp;#34;&amp;#34;;


 server {
 listen 80;
 server_name ali.hellowood.com.cn;
 location / {
 proxy_pass http://172.17.0.1:8080;
 proxy_set_header Host $http_host;
 proxy_set_header X-Real-IP $remote_addr;
 proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
 }
 }
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;需要注意的是，Docker 会默认使用桥接路由，所以其 IP 和宿主机的 IP 位于同一 IP 段，并且默认宿主机的 IP 为第一个，即如果 Docker 的 IP 为 &lt;code&gt;10.1.0.2&lt;/code&gt;, 则可以通过 访问 &lt;code&gt;10.1.0.1&lt;/code&gt; 访问到宿主机&lt;/p&gt;</description></item><item><title>Docker 配置Ubuntu 下 Tomcat 和 Nginx 使用 HTTPS 访问</title><link>https://blog.hellowood.dev/posts/docker-%E9%85%8D%E7%BD%AEubuntu-%E4%B8%8B-tomcat-%E5%92%8C-nginx-%E4%BD%BF%E7%94%A8-https-%E8%AE%BF%E9%97%AE/</link><pubDate>Sun, 08 Apr 2018 15:38:01 +0800</pubDate><guid>https://blog.hellowood.dev/posts/docker-%E9%85%8D%E7%BD%AEubuntu-%E4%B8%8B-tomcat-%E5%92%8C-nginx-%E4%BD%BF%E7%94%A8-https-%E8%AE%BF%E9%97%AE/</guid><description>&lt;h2 id="安装-docker"&gt;安装 Docker&lt;/h2&gt;
&lt;h3 id="使用脚本自动安装"&gt;使用脚本自动安装&lt;/h3&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;curl -fsSL get.docker.com -o get-docker.sh
sudo sh get-docker.sh --mirror Aliyun
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="更改镜像地址"&gt;更改镜像地址&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;修改或新建 &lt;code&gt;/etc/docker/daemon.json&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;{
 &amp;#34;registry-mirrors&amp;#34;: [
 &amp;#34;https://registry.docker-cn.com&amp;#34;
 ]
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="启动-docker"&gt;启动 Docker&lt;/h3&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sudo systemctl daemon-reload
sudo systemctl enable docker
sudo systemctl start docker
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="配置-tomcat"&gt;配置 Tomcat&lt;/h2&gt;
&lt;h3 id="启动-tomcat-容器"&gt;启动 Tomcat 容器&lt;/h3&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;docker pull tomcat
docker run --name tomcat -d -p 8080:8080 tomcat
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="修改-tomcat-manager-应用"&gt;修改 Tomcat Manager 应用&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;修改 &lt;code&gt;webapps/manager/META-INF/content.xml&lt;/code&gt;，允许需要的IP访问，这里运行所有的IP访问&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;lt;Context antiResourceLocking=&amp;#34;false&amp;#34; privileged=&amp;#34;true&amp;#34; &amp;gt;
 &amp;lt;Valve className=&amp;#34;org.apache.catalina.valves.RemoteAddrValve&amp;#34;
 allow=&amp;#34;^.*$&amp;#34; /&amp;gt;
 &amp;lt;Manager sessionAttributeValueClassNameFilter=&amp;#34;java\.lang\.(?:Boolean|Integer|Long|Number|String)|org\.apache\.catalina\.filters\.CsrfPreventionFilter\$LruCache(?:\$1)?|java\.util\.(?:Linked)?HashMap&amp;#34;/&amp;gt;
&amp;lt;/Context&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="配置-tomcat-用户"&gt;配置 Tomcat 用户&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;修改 &lt;code&gt;conf/tomcat-user.xml&lt;/code&gt;，添加用户&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;lt;role rolename=&amp;#34;admin-gui&amp;#34;/&amp;gt;
&amp;lt;role rolename=&amp;#34;manager-gui&amp;#34;/&amp;gt;
&amp;lt;user username=&amp;#34;tomcat&amp;#34; password=&amp;#34;tomcat&amp;#34; roles=&amp;#34;manager-gui,admin-gui&amp;#34;/&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h2 id="配置-nginx"&gt;配置 Nginx&lt;/h2&gt;
&lt;h3 id="配置目录"&gt;配置目录&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;新建目录 &lt;code&gt;/home/ubuntu/hellowood/dev/nginx/conf&lt;/code&gt;, &lt;code&gt;/home/ubuntu/hellowood/dev/nginx/log&lt;/code&gt;, &lt;code&gt;/home/ubuntu/hellowood/dev/nginx/certs&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;下载并解压相应的Nginx证书文件到 &lt;code&gt;/home/ubuntu/hellowood/dev/nginx/conf&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="添加-nginx-配置"&gt;添加 Nginx 配置&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;nginx.conf&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;server {
 listen 80;
 listen 443 ssl;
 server_name hellowood.com.cn;
 ssl_certificate /etc/nginx/certs/hellowood.com.cn_bundle.crt;
 ssl_certificate_key /etc/nginx/certs/hellowood.com.cn.key;
 location / {
 proxy_pass http://tomcat:8080;
 }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;http://tomcat:8080&lt;/code&gt;: 将所有请求都转发到 &lt;code&gt;tomcat&lt;/code&gt; 容器的 &lt;code&gt;8080&lt;/code&gt;端口(不是映射端口)&lt;/p&gt;</description></item><item><title>Ubuntu安装配置 Jenkins</title><link>https://blog.hellowood.dev/posts/ubuntu%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE-jenkins/</link><pubDate>Mon, 01 Jan 2018 12:12:32 +0800</pubDate><guid>https://blog.hellowood.dev/posts/ubuntu%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE-jenkins/</guid><description>&lt;blockquote&gt;
&lt;p&gt;在 Ubuntu 下 Jenkins 服务&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="1-安装"&gt;1. 安装&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;安装前确认JDK环境配置是正确的&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;wget -q -O - https://pkg.jenkins.io/debian/jenkins-ci.org.key | sudo apt-key add -
sudo sh -c &amp;#39;echo deb http://pkg.jenkins.io/debian-stable binary/ &amp;gt; /etc/apt/sources.list.d/jenkins.list&amp;#39;

sudo apt-get update
sudo apt-get install jenkins
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;等待安装完成，如果默认的8080端口没有被占用，则会自动启动 Jenkins 服务， 如果有其他程序占用了 8080 端口，则 Jenkins 会启动失败
##2. 更改 Jenkins 端口
需要更改两个文件&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;修改&lt;code&gt;/etc/default/jenkins&lt;/code&gt;文件，将 &lt;code&gt;HTTP_PORT=8080&lt;/code&gt;更改为你需要的端口&lt;/li&gt;
&lt;li&gt;修改&lt;code&gt;/etc/init.d/jenkins&lt;/code&gt;文件，将&lt;code&gt;do_start&lt;/code&gt;函数的&lt;code&gt;check_tcp_port&lt;/code&gt;命令改为需要的端口&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;##3. 启动 Jenkins 服务&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sudo /etc/init.d/jenkins start
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;##4. 访问并配置&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;访问 Jenkins 的地址，会要求填写 Jenkins 的密码，该密码可以在&lt;code&gt;/var/log/jenkins/jenkins.log&lt;/code&gt;中找到&lt;/p&gt;
&lt;/blockquote&gt;</description></item><item><title>Ubuntu安装JDK</title><link>https://blog.hellowood.dev/posts/ubuntu%E5%AE%89%E8%A3%85jdk/</link><pubDate>Mon, 01 Jan 2018 12:11:39 +0800</pubDate><guid>https://blog.hellowood.dev/posts/ubuntu%E5%AE%89%E8%A3%85jdk/</guid><description>&lt;hr&gt;
&lt;h2 id="安装"&gt;安装&lt;/h2&gt;
&lt;p&gt;1 创建文件夹&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;mkdir java
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;2 下载JDK&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;JDK 下载地址&lt;a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html"&gt;http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;wget --no-check-certificate --no-cookies --header &amp;#34;Cookie: oraclelicense=accept-securebackup-cookie&amp;#34; http://download.oracle.com/otn-pub/java/jdk/8u144-b01/090f390dda5b47b9b721c7dfaa008135/jdk-8u144-linux-x64.tar.gz
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;3 解压&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; tar -zxvf jdk-8u144-linux-x64.tar.gz
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;4 配置环境变量&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;编辑配置文件&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sudo vim ~/.bash_profile
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;输入以下内容&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;export JAVA_HOME=/home/ubuntu/java/jdk1.8.0_144
export JRE_HOME=${JAVA_HOME}/jre
export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib
export PATH=${JAVA_HOME}/bin:$PATH
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;使配置生效&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;source ~/.bash_profile
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;5 检查是否配置正确&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;java -version
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;出现以下内容：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Java(TM) SE Runtime Environment (build 1.8.0_144-b01)
Java HotSpot(TM) 64-Bit Server VM (build 25.144-b01, mixed mode)
ubuntu@local:~/java/jdk1.8.0_144$
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;6 查看JDK的路径&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;whereis java
which java （java执行路径）
echo $JAVA_HOME
echo $PATH
&lt;/code&gt;&lt;/pre&gt;</description></item><item><title>Ubuntu安装 Nginx</title><link>https://blog.hellowood.dev/posts/ubuntu%E5%AE%89%E8%A3%85-nginx/</link><pubDate>Mon, 01 Jan 2018 12:10:38 +0800</pubDate><guid>https://blog.hellowood.dev/posts/ubuntu%E5%AE%89%E8%A3%85-nginx/</guid><description>&lt;blockquote&gt;
&lt;p&gt;在 Ubuntu 上安装 Nginx&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="安装"&gt;安装&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;安装&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; sudo apt-get install nginx
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;目录结构
&lt;ul&gt;
&lt;li&gt;所有文件都在 &lt;code&gt;/etc/nginx/&lt;/code&gt;目录下&lt;/li&gt;
&lt;li&gt;程序文件在&lt;code&gt;/user/local/nginx/sbin/&lt;/code&gt;目录下&lt;/li&gt;
&lt;li&gt;日志在&lt;code&gt;/var/log/nginx/&lt;/code&gt;目录下&lt;/li&gt;
&lt;li&gt;启动脚本为&lt;code&gt;/etc/init.d/nginx&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="启动"&gt;启动&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; sudo /etc/init.d/nginx start
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h1 id="nginx-源代码安装"&gt;Nginx 源代码安装&lt;/h1&gt;
&lt;h2 id="安装-1"&gt;安装&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;下载&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; cd /usr/local
 //下载源码
 wget http://nginx.org/download/nginx-1.2.8.tar.gz

 // 解压
 tar -zxcf nginx-1.2.8.tar.gz
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;安装依赖&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; sudo apt-get install libpcre3
 sudo apt-get install libpcre3-dev
 sudo apt-get install zlib1g-dev
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;编译安装&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; cd nginx-1.2.8
 // 检查环境
 ./configure

 // 编译
 make

 // 安装
 make install
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="配置"&gt;配置&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;默认启动&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; cd /usr/local/nginx

 // 启动
 sbin/nginx
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;配置快捷启动方式&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; // 创建启动脚本
 sudo vi /etc/init.d/nginx

 // 增加执行权限
 sudo chmod a+x /etc/init.d/nginx

 // 启动
 sudo /etc/init.d/nginx start
 // 停止
 sudo /etc/init.d/nginx stop
 // 重启
 sudo /etc/init.d/nginx restart
&lt;/code&gt;&lt;/pre&gt;</description></item><item><title>Ubuntu安装 Redis -编译方式安装</title><link>https://blog.hellowood.dev/posts/ubuntu%E5%AE%89%E8%A3%85-redis-%E7%BC%96%E8%AF%91%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85/</link><pubDate>Mon, 01 Jan 2018 12:09:09 +0800</pubDate><guid>https://blog.hellowood.dev/posts/ubuntu%E5%AE%89%E8%A3%85-redis-%E7%BC%96%E8%AF%91%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85/</guid><description>&lt;blockquote&gt;
&lt;p&gt;使用 &lt;code&gt;sudo apt install redis-server&lt;/code&gt;安装的 Redis 并不是最新的，通过在官网下载来安装最新的 Redis&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="1-创建文件夹"&gt;1 创建文件夹&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;mkdir redis
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="2-下载-redis"&gt;2 下载 Redis&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;wget http://download.redis.io/releases/redis-4.0.1.tar.gz
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="3-解压"&gt;3 解压&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; tar -xzvf redis-4.0.1.tar.gz
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="4-编译安装"&gt;4 编译安装&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;cd redis-4.0.1
make
make test
sudo make install
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="5-配置"&gt;5 配置&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;设置登录密码&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# 取消注释requirepass
requirepass your_password
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;取消登录IP限制&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# 注释bind
# bind 127.0.0.1
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="6-启动"&gt;6 启动&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;redis-server ./redis-4.0.1/redis.conf
&lt;/code&gt;&lt;/pre&gt;</description></item><item><title>Ubuntu搭建Redis服务器</title><link>https://blog.hellowood.dev/posts/ubuntu%E6%90%AD%E5%BB%BAredis%E6%9C%8D%E5%8A%A1%E5%99%A8/</link><pubDate>Mon, 01 Jan 2018 12:08:07 +0800</pubDate><guid>https://blog.hellowood.dev/posts/ubuntu%E6%90%AD%E5%BB%BAredis%E6%9C%8D%E5%8A%A1%E5%99%A8/</guid><description>&lt;blockquote&gt;
&lt;p&gt;在Ubuntu中搭建Redis服务器&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="安装"&gt;安装&lt;/h2&gt;
&lt;p&gt;###1 安装&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sudo apt-get install redis-server
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;###2 启动&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;redis-server
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;5617:C 18 Sep 12:57:10.437 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf
5617:M 18 Sep 12:57:10.437 * Increased maximum number of open files to 10032 (it was originally set to 1024).
 _._
 _.-``__ &amp;#39;&amp;#39;-._
 _.-`` `. `_. &amp;#39;&amp;#39;-._ Redis 3.0.6 (00000000/0) 64 bit
 .-`` .-```. ```\/ _.,_ &amp;#39;&amp;#39;-._
 ( &amp;#39; , .-` | `, ) Running in standalone mode
 |`-._`-...-` __...-.``-._|&amp;#39;` _.-&amp;#39;| Port: 6379
 | `-._ `._ / _.-&amp;#39; | PID: 5617
 `-._ `-._ `-./ _.-&amp;#39; _.-&amp;#39;
 |`-._`-._ `-.__.-&amp;#39; _.-&amp;#39;_.-&amp;#39;|
 | `-._`-._ _.-&amp;#39;_.-&amp;#39; | http://redis.io
 `-._ `-._`-.__.-&amp;#39;_.-&amp;#39; _.-&amp;#39;
 |`-._`-._ `-.__.-&amp;#39; _.-&amp;#39;_.-&amp;#39;|
 | `-._`-._ _.-&amp;#39;_.-&amp;#39; |
 `-._ `-._`-.__.-&amp;#39;_.-&amp;#39; _.-&amp;#39;
 `-._ `-.__.-&amp;#39; _.-&amp;#39;
 `-._ _.-&amp;#39;
 `-.__.-&amp;#39;

5617:M 18 Sep 12:57:10.438 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.
5617:M 18 Sep 12:57:10.438 # Server started, Redis version 3.0.6
5617:M 18 Sep 12:57:10.438 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add &amp;#39;vm.overcommit_memory = 1&amp;#39; to /etc/sysctl.conf and then reboot or run the command &amp;#39;sysctl vm.overcommit_memory=1&amp;#39; for this to take effect.
5617:M 18 Sep 12:57:10.438 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command &amp;#39;echo never &amp;gt; /sys/kernel/mm/transparent_hugepage/enabled&amp;#39; as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.
5617:M 18 Sep 12:57:10.438 * DB loaded from disk: 0.000 seconds
5617:M 18 Sep 12:57:10.438 * The server is now ready to accept connections on port 6379
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;###3 启动客户端&lt;/p&gt;</description></item><item><title>Ubuntu搭建Shadowsocks服务器</title><link>https://blog.hellowood.dev/posts/ubuntu%E6%90%AD%E5%BB%BAshadowsocks%E6%9C%8D%E5%8A%A1%E5%99%A8/</link><pubDate>Mon, 01 Jan 2018 00:58:24 +0800</pubDate><guid>https://blog.hellowood.dev/posts/ubuntu%E6%90%AD%E5%BB%BAshadowsocks%E6%9C%8D%E5%8A%A1%E5%99%A8/</guid><description>&lt;blockquote&gt;
&lt;p&gt;在Ubuntu环境中搭建Shadowsocks服务&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="1-安装shadowsocks"&gt;1. 安装Shadowsocks&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# 更新apt-get
sudo apt-get update

# 安装python包管理工具
sudo apt-get install python-pip

# 安装Shadowsocks
pip install shadowsocks
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="2-配置shadowsocks"&gt;2. 配置Shadowsocks&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;创建配置文件&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;mkdir shadowsocks
vi config.json
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;在config.json文件中添加以下配置&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;{
 &amp;#34;server&amp;#34;: &amp;#34;0.0.0.0&amp;#34;,
 &amp;#34;server_port&amp;#34;: 8623,
 &amp;#34;local_address&amp;#34;: &amp;#34;127.0.0.1&amp;#34;,
 &amp;#34;local_port&amp;#34;: 1080,
 &amp;#34;password&amp;#34;: &amp;#34;your password&amp;#34;,
 &amp;#34;timeout&amp;#34;: 300,
 &amp;#34;method&amp;#34;: &amp;#34;aes-256-cfb&amp;#34;,
 &amp;#34;fast_open&amp;#34;: false
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;配置说明&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;字段&lt;/th&gt;
 &lt;th&gt;说明&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;server&lt;/td&gt;
 &lt;td&gt;服务端监听地址&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;server_port&lt;/td&gt;
 &lt;td&gt;服务端端口&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;local_address&lt;/td&gt;
 &lt;td&gt;本地监听地址&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;local_port&lt;/td&gt;
 &lt;td&gt;本地监听端口&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;password&lt;/td&gt;
 &lt;td&gt;密码&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;timeout&lt;/td&gt;
 &lt;td&gt;超时时间（秒）&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;method&lt;/td&gt;
 &lt;td&gt;加密方法&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;fast_open&lt;/td&gt;
 &lt;td&gt;是否启用TCP-Fast-Open，true或者false&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="3-启动shadowsocks"&gt;3. 启动Shadowsocks&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;启动：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; sudo ssserver -c /home/ubuntu/develop/shadowsocks/shadowsocks.json -d start
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;停止：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; sudo ssserver -c /home/ubuntu/develop/shadowsocks/shadowsocks.json -d stop
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;重启：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; sudo ssserver -c /home/ubuntu/develop/shadowsocks/shadowsocks.json -d restart
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="4-设置开机自启动"&gt;4. 设置开机自启动&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sudo vi /etc/rc.local
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;加入以下内容&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sudo ssserver -c /home/ubuntu/develop/shadowsocks/shadowsocks.json -d start
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="5-配置多个用户"&gt;5. 配置多个用户&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;将配置文件修改为以下：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;{
 &amp;#34;server&amp;#34;: &amp;#34;0.0.0.0&amp;#34;,
 &amp;#34;local_address&amp;#34;: &amp;#34;127.0.0.1&amp;#34;,
 &amp;#34;local_port&amp;#34;: 1080,
 &amp;#34;port_password&amp;#34;: {
 &amp;#34;8623&amp;#34;: &amp;#34;your password1&amp;#34;,
 &amp;#34;8624&amp;#34;: &amp;#34;your password1&amp;#34;,
 &amp;#34;8625&amp;#34;: &amp;#34;your password2&amp;#34;,
 &amp;#34;8626&amp;#34;: &amp;#34;your password3&amp;#34;,
 &amp;#34;8627&amp;#34;: &amp;#34;your password4&amp;#34;
 },
 &amp;#34;timeout&amp;#34;: 300,
 &amp;#34;method&amp;#34;: &amp;#34;aes-256-cfb&amp;#34;,
 &amp;#34;fast_open&amp;#34;: false
}
&lt;/code&gt;&lt;/pre&gt;</description></item></channel></rss>