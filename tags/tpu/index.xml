<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>TPU on HelloWood</title><link>https://blog.hellowood.dev/tags/tpu/</link><description>Recent content in TPU on HelloWood</description><generator>Hugo</generator><language>cn</language><lastBuildDate>Tue, 17 Sep 2024 03:10:36 +0000</lastBuildDate><atom:link href="https://blog.hellowood.dev/tags/tpu/index.xml" rel="self" type="application/rss+xml"/><item><title>将重新训练的 Yolov8 模型编译为 Hailo 8 和 Hailo 8L 支持的模型</title><link>https://blog.hellowood.dev/posts/%E5%B0%86%E9%87%8D%E6%96%B0%E8%AE%AD%E7%BB%83%E7%9A%84-yolov8-%E6%A8%A1%E5%9E%8B%E7%BC%96%E8%AF%91%E4%B8%BA-hailo-8-%E5%92%8C-hailo-8l-%E6%94%AF%E6%8C%81%E7%9A%84%E6%A8%A1%E5%9E%8B/</link><pubDate>Sun, 08 Sep 2024 21:32:21 +0800</pubDate><guid>https://blog.hellowood.dev/posts/%E5%B0%86%E9%87%8D%E6%96%B0%E8%AE%AD%E7%BB%83%E7%9A%84-yolov8-%E6%A8%A1%E5%9E%8B%E7%BC%96%E8%AF%91%E4%B8%BA-hailo-8-%E5%92%8C-hailo-8l-%E6%94%AF%E6%8C%81%E7%9A%84%E6%A8%A1%E5%9E%8B/</guid><description>&lt;p>在 Ubuntu 22 将自行训练的 Yolov8n 模型编译为 Hailo8/Hailo8L 支持的 hef 格式的模型，在 Hailo8 上使用自行训练的模型进行对象检测&lt;/p>
&lt;h2 id="1-环境准备">1. 环境准备&lt;/h2>
&lt;ul>
&lt;li>anaconda&lt;/li>
&lt;/ul>
&lt;p>参考 &lt;a href="https://docs.anaconda.com/anaconda/install/linux/">Installing on Linux&lt;/a> 安装&lt;/p>
&lt;h2 id="2-训练-yolo-模型">2. 训练 yolo 模型&lt;/h2>
&lt;h3 id="21-安装依赖">2.1 安装依赖&lt;/h3>
&lt;ul>
&lt;li>创建环境&lt;/li>
&lt;/ul>
&lt;p>单独创建 ultralytics 的环境，用于训练和导出 yolo 模型为其他格式&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>conda create -n ultralytics &lt;span style="color:#dcaeea">python&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>3.10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>激活环境&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>conda activate ultralytics
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>安装 ultralytics&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>pip install ultralytics
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>等待安装完成后就可以使用 &lt;code>yolo&lt;/code> 命令训练和导出模型了&lt;/p>
&lt;h3 id="22-训练模型">2.2 训练模型&lt;/h3>
&lt;p>训练模型可以参考 roboflow 的博客 &lt;a href="https://blog.roboflow.com/how-to-train-yolov8-on-a-custom-dataset/">How to Train YOLOv8 Object Detection on a Custom Dataset&lt;/a>；为了测试验证流程，先使用官方提供的 yolov8n 当作训练的模型，可以从 &lt;a href="https://github.com/ultralytics/assets/releases">https://github.com/ultralytics/assets/releases/&lt;/a> 下载，以 yolov8n 为例，下载地址为 &lt;a href="https://github.com/ultralytics/assets/releases/download/v8.2.0/yolov8n.pt">https://github.com/ultralytics/assets/releases/download/v8.2.0/yolov8n.pt&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>wget https://github.com/ultralytics/assets/releases/download/v8.2.0/yolov8n.pt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="23-将模型导出为-onnx-格式">2.3 将模型导出为 onnx 格式&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>yolo &lt;span style="color:#ef8383">export&lt;/span> &lt;span style="color:#dcaeea">model&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>./yolov8n.pt &lt;span style="color:#dcaeea">imgsz&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>&lt;span style="color:#d19a66">640&lt;/span> &lt;span style="color:#dcaeea">format&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>onnx &lt;span style="color:#dcaeea">opset&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>&lt;span style="color:#d19a66">11&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>imgsz=640 指定输入图片的尺寸（图像大小），即 640x640。这个尺寸是模型在推理时处理图像的分辨率&lt;/p></description></item><item><title>Frigate 使用 Hailo 8 或 Hailo 8L 进行对象识别</title><link>https://blog.hellowood.dev/posts/frigate-%E4%BD%BF%E7%94%A8-hailo-8-%E6%88%96-hailo-8l-%E8%BF%9B%E8%A1%8C%E5%AF%B9%E8%B1%A1%E8%AF%86%E5%88%AB/</link><pubDate>Sun, 01 Sep 2024 11:25:24 +0800</pubDate><guid>https://blog.hellowood.dev/posts/frigate-%E4%BD%BF%E7%94%A8-hailo-8-%E6%88%96-hailo-8l-%E8%BF%9B%E8%A1%8C%E5%AF%B9%E8%B1%A1%E8%AF%86%E5%88%AB/</guid><description>&lt;p>Hailo8/Hailo-8L 是一家以色列的边缘人工智能公司发布的边缘加速器，定位和 &lt;a href="https://coral.ai/products/">Google Coral TPU&lt;/a> 完全一致；Hailo-8 算力为 26 TOPS，Hailo-8L 算力为 13 TOPS&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th style="text-align: left">特性&lt;/th>
 &lt;th style="text-align: left">Google Coral TPU&lt;/th>
 &lt;th style="text-align: left">Hailo8&lt;/th>
 &lt;th style="text-align: left">Hailo8L&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td style="text-align: left">&lt;strong>支持框架&lt;/strong>&lt;/td>
 &lt;td style="text-align: left">TensorFlow, TensorFlow Lite&lt;/td>
 &lt;td style="text-align: left">TensorFlow, TensorFlow Lite, Keras, PyTorch, ONNX&lt;/td>
 &lt;td style="text-align: left">TensorFlow, TensorFlow Lite, Keras, PyTorch, ONNX&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">&lt;strong>支持模型&lt;/strong>&lt;/td>
 &lt;td style="text-align: left">MobileNet, Inception, EfficientNet 等&lt;/td>
 &lt;td style="text-align: left">ResNet-50, MobileNet_v2, SSD, YOLOv3, YOLOv5 等&lt;/td>
 &lt;td style="text-align: left">ResNet-50, MobileNet_v2, SSD, YOLOv3, YOLOv5 等&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">&lt;strong>模型功能&lt;/strong>&lt;/td>
 &lt;td style="text-align: left">对象识别、对象分类，语义分割，姿态识别，音频分类&lt;/td>
 &lt;td style="text-align: left">对象识别、对象分类，语义分割，姿态识别，深度估计，人脸检测，人脸识别等&lt;/td>
 &lt;td style="text-align: left">对象识别、对象分类，语义分割，姿态识别，深度估计，人脸检测，人脸识别等&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">&lt;strong>硬件性能&lt;/strong>&lt;/td>
 &lt;td style="text-align: left">4 TOPS&lt;/td>
 &lt;td style="text-align: left">26 TOPS&lt;/td>
 &lt;td style="text-align: left">13 TOPS&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">&lt;strong>发布时间&lt;/strong>&lt;/td>
 &lt;td style="text-align: left">2019年&lt;/td>
 &lt;td style="text-align: left">2021年&lt;/td>
 &lt;td style="text-align: left">2023年&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">&lt;strong>功耗&lt;/strong>&lt;/td>
 &lt;td style="text-align: left">0.5-2 W&lt;/td>
 &lt;td style="text-align: left">2.5-4.6 W&lt;/td>
 &lt;td style="text-align: left">1.8-3.2 W&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">&lt;strong>每W性能&lt;/strong>&lt;/td>
 &lt;td style="text-align: left">8 TOPS/W&lt;/td>
 &lt;td style="text-align: left">10.4 TOPS/W&lt;/td>
 &lt;td style="text-align: left">7.2 TOPS/W&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">&lt;strong>当前价格&lt;/strong>&lt;/td>
 &lt;td style="text-align: left">约300~1000¥&lt;/td>
 &lt;td style="text-align: left">约 1300¥&lt;/td>
 &lt;td style="text-align: left">约550¥&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">&lt;strong>支持的操作系统&lt;/strong>&lt;/td>
 &lt;td style="text-align: left">Linux, Windows, MacOS&lt;/td>
 &lt;td style="text-align: left">Linux, Windows&lt;/td>
 &lt;td style="text-align: left">Linux, Windows&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">&lt;strong>可扩展性&lt;/strong>&lt;/td>
 &lt;td style="text-align: left">不支持多芯片&lt;/td>
 &lt;td style="text-align: left">支持多芯片并行处理&lt;/td>
 &lt;td style="text-align: left">支持多芯片并行处理&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">&lt;strong>应用领域&lt;/strong>&lt;/td>
 &lt;td style="text-align: left">物联网设备、嵌入式系统&lt;/td>
 &lt;td style="text-align: left">工业自动化、智能监控、自动驾驶&lt;/td>
 &lt;td style="text-align: left">工业自动化、智能监控、智能零售&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>Frigate 的最新的代码已经合并了 Hailo8L 的 PR，预计将会在 0.15 版本中正式发布，PR 参考 &lt;a href="https://github.com/blakeblackshear/frigate/pull/12431">Initial support for Hailo-8L&lt;/a> 和 &lt;a href="https://github.com/blakeblackshear/frigate/pull/12820">Hailo amd64 support&lt;/a>；虽然 PR 中支持的设备是 Hailo-8L，但是经过测试验证，只需要替换对应的模型，Hailo-8 也是可以正常运行的（Hailo-8 和 Hailo-8L 的模型不能互相使用）&lt;/p></description></item><item><title>Ubuntu22 安装初始化 Hailo 8系列 TPU 加速器</title><link>https://blog.hellowood.dev/posts/ubuntu22-%E5%AE%89%E8%A3%85%E5%88%9D%E5%A7%8B%E5%8C%96-hailo-8%E7%B3%BB%E5%88%97-tpu-%E5%8A%A0%E9%80%9F%E5%99%A8/</link><pubDate>Sun, 01 Sep 2024 11:22:23 +0800</pubDate><guid>https://blog.hellowood.dev/posts/ubuntu22-%E5%AE%89%E8%A3%85%E5%88%9D%E5%A7%8B%E5%8C%96-hailo-8%E7%B3%BB%E5%88%97-tpu-%E5%8A%A0%E9%80%9F%E5%99%A8/</guid><description>&lt;blockquote>
&lt;p>Hailo 是一家位于以色列的边缘人工智能处理器的先驱芯片制造商，该公司成立于2017年；专注于为边缘设备开发高效的深度学习处理器。Hailo 的核心产品是其自研的 Hailo-8 人工智能处理器，这款芯片特别设计用于在资源受限的边缘设备上运行复杂的深度学习模型&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Hailo-8 能够在嵌入式系统中支持实时处理应用，如计算机视觉、自动驾驶、智能城市监控、医疗设备和工业物联网等&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Hailo 在 2024年6月4日宣布被 Raspberry Pi 选中，为 Raspberry Pi AI Kit 提供 AI 加速器；支持使用 Hailo-8 和 Hailo-8L 进行加速，参考 &lt;a href="https://hailo.ai/zh-hans/company-overview/newsroom/news-zh-hans/raspberry-pi-selects-hailo-to-enable-advanced-ai-capabilities-for-raspberry-pi-5/">Raspberry Pi Selects Hailo to Enable Advanced AI Capabilities for Raspberry Pi 5&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>Hailo8 发布于 2021年，算力为 26 TOPS，Hailo8L 发布于 2023 年，算力为 13 TOPS；两款产品除了算力外，其他特性差别不大，均支持 TensorFlow，TensorFlow Lite，Keras，PyTorch &amp;amp; ONNX 框架，主机架构支持 X86 和 ARM，操作系统支持 Linux 和 Windows；更多信息参考官网介绍：&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://hailo.ai/zh-hans/products/ai-accelerators/hailo-8-ai-accelerator/#hailo-8-features">Hailo-8 AI处理器&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://hailo.ai/zh-hans/products/ai-accelerators/hailo-8l-m-2-ai-acceleration-module-for-ai-light-applications/#hailo8lm2-features">Hailo-8L M.2 Entry-Level Acceleration Module&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://hailo.ai/files/hailo-8-product-brief-en/">hailo-8-product-brief&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://hailo.ai/files/hailo-8l-m-2-et-product-brief-en/">hailo-8l-m-2-et-product-brief&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://hailo.ai/wp-content/uploads/2023/09/Hailo-8L%E2%84%A2_Entry-Level_M.2_AI_Acceleration_Module_Overview.webp" alt="Hailo8L">&lt;/p>
&lt;h1 id="hailo-环境配置">Hailo 环境配置&lt;/h1>
&lt;p>Hailo 相关软件功能如图：&lt;/p></description></item></channel></rss>